import{_ as l,C as p,c as h,o as t,j as a,b as d,a3 as r,a as i,w as n,G as k,a4 as o}from"./chunks/framework.CUcrqFol.js";const u=JSON.parse('{"title":"10.2.5 部署失败了怎么办——常见问题：端口冲突/环境变量/权限问题","description":"10.2.5 部署失败了怎么办——常见问题：端口冲突/环境变量/权限问题 部署出问题不可怕，可怕的是不知道怎么排查。 故障排查流程 第一步：查看容器日志 常见问题及解决方案 问题一：端口冲突 **错误信息**： **排查步骤**： **解决方案**： | 方案 | 操作 | |------|------| | 停止占用","frontmatter":{"title":"10.2.5 部署失败了怎么办——常见问题：端口冲突/环境变量/权限问题","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/10-deploy/10.2-1panel-deployment/10.2.5-troubleshooting.md","filePath":"Advanced-old/10-deploy/10.2-1panel-deployment/10.2.5-troubleshooting.md","lastUpdated":1766168364000}'),c={name:"Advanced-old/10-deploy/10.2-1panel-deployment/10.2.5-troubleshooting.md"};function g(F,s,y,C,b,E){const e=p("Mermaid");return t(),h("div",null,[s[1]||(s[1]=a("h1",{id:"_10-2-5-部署失败了怎么办——常见问题-端口冲突-环境变量-权限问题",tabindex:"-1"},[i("10.2.5 部署失败了怎么办——常见问题：端口冲突/环境变量/权限问题 "),a("a",{class:"header-anchor",href:"#_10-2-5-部署失败了怎么办——常见问题-端口冲突-环境变量-权限问题","aria-label":'Permalink to "10.2.5 部署失败了怎么办——常见问题：端口冲突/环境变量/权限问题"'},"​")],-1)),s[2]||(s[2]=a("p",null,"部署出问题不可怕，可怕的是不知道怎么排查。",-1)),s[3]||(s[3]=a("h2",{id:"故障排查流程",tabindex:"-1"},[i("故障排查流程 "),a("a",{class:"header-anchor",href:"#故障排查流程","aria-label":'Permalink to "故障排查流程"'},"​")],-1)),(t(),d(o,null,{default:n(()=>[k(e,{id:"mermaid-9",class:"mermaid",graph:"flowchart%20TB%0A%20%20%20%20A%5B%E9%83%A8%E7%BD%B2%E5%A4%B1%E8%B4%A5%5D%20--%3E%20B%7B%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E4%BA%86%E5%90%97%3F%7D%0A%20%20%20%20B%20--%3E%7C%E6%B2%A1%E6%9C%89%7C%20C%5B%E6%A3%80%E6%9F%A5%E9%95%9C%E5%83%8F%E5%92%8C%E9%85%8D%E7%BD%AE%5D%0A%20%20%20%20B%20--%3E%7C%E5%90%AF%E5%8A%A8%E4%BA%86%7C%20D%7B%E8%83%BD%E8%AE%BF%E9%97%AE%E5%90%97%3F%7D%0A%20%20%20%20D%20--%3E%7C%E4%B8%8D%E8%83%BD%7C%20E%5B%E6%A3%80%E6%9F%A5%E7%AB%AF%E5%8F%A3%E5%92%8C%E7%BD%91%E7%BB%9C%5D%0A%20%20%20%20D%20--%3E%7C%E8%83%BD%E8%AE%BF%E9%97%AE%7C%20F%7B%E5%8A%9F%E8%83%BD%E6%AD%A3%E5%B8%B8%E5%90%97%3F%7D%0A%20%20%20%20F%20--%3E%7C%E4%B8%8D%E6%AD%A3%E5%B8%B8%7C%20G%5B%E6%A3%80%E6%9F%A5%E6%97%A5%E5%BF%97%E5%92%8C%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%5D%0A%20%20%20%20%0A%20%20%20%20C%20--%3E%20H%5B%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97%5D%0A%20%20%20%20E%20--%3E%20H%0A%20%20%20%20G%20--%3E%20H%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[i(" Loading... ",-1)])]),_:1})),s[4]||(s[4]=r(`<h2 id="第一步-查看容器日志" tabindex="-1">第一步：查看容器日志 <a class="header-anchor" href="#第一步-查看容器日志" aria-label="Permalink to &quot;第一步：查看容器日志&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看最近100行日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 容器名</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 实时跟踪日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 容器名</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 1Panel 中</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 容器管理 → 选择容器 → 日志</span></span></code></pre></div><h2 id="常见问题及解决方案" tabindex="-1">常见问题及解决方案 <a class="header-anchor" href="#常见问题及解决方案" aria-label="Permalink to &quot;常见问题及解决方案&quot;">​</a></h2><h3 id="问题一-端口冲突" tabindex="-1">问题一：端口冲突 <a class="header-anchor" href="#问题一-端口冲突" aria-label="Permalink to &quot;问题一：端口冲突&quot;">​</a></h3><p><strong>错误信息</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Error: listen EADDRINUSE: address already in use :::3000</span></span></code></pre></div><p><strong>排查步骤</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看端口占用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -tlnp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :3000</span></span></code></pre></div><p><strong>解决方案</strong>：</p><table tabindex="0"><thead><tr><th>方案</th><th>操作</th></tr></thead><tbody><tr><td>停止占用进程</td><td><code>kill -9 PID</code></td></tr><tr><td>修改端口映射</td><td>改为 <code>3001:3000</code></td></tr><tr><td>检查其他容器</td><td><code>docker ps</code> 查看</td></tr></tbody></table><h3 id="问题二-环境变量不生效" tabindex="-1">问题二：环境变量不生效 <a class="header-anchor" href="#问题二-环境变量不生效" aria-label="Permalink to &quot;问题二：环境变量不生效&quot;">​</a></h3><p><strong>排查步骤</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入容器查看环境变量</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 容器名</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">env</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DATABASE</span></span></code></pre></div><p><strong>常见原因</strong>：</p><table tabindex="0"><thead><tr><th>原因</th><th>解决方案</th></tr></thead><tbody><tr><td>变量名拼写错误</td><td>仔细检查大小写</td></tr><tr><td>引号问题</td><td>特殊字符需要转义</td></tr><tr><td>NEXT_PUBLIC_ 前缀</td><td>构建时注入，非运行时</td></tr><tr><td>变量未传入容器</td><td>检查 1Panel 配置</td></tr></tbody></table><h3 id="问题三-数据库连接失败" tabindex="-1">问题三：数据库连接失败 <a class="header-anchor" href="#问题三-数据库连接失败" aria-label="Permalink to &quot;问题三：数据库连接失败&quot;">​</a></h3><p><strong>错误信息</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Error: Can&#39;t reach database server at &#39;localhost:5432&#39;</span></span></code></pre></div><p><strong>常见原因与解决</strong>：</p><table tabindex="0"><thead><tr><th>原因</th><th>解决方案</th></tr></thead><tbody><tr><td>使用了 <code>localhost</code></td><td>改为容器名，如 <code>postgres</code></td></tr><tr><td>容器不在同一网络</td><td>将容器加入同一 Docker 网络</td></tr><tr><td>数据库未启动</td><td>检查数据库容器状态</td></tr><tr><td>密码错误</td><td>核对 DATABASE_URL</td></tr></tbody></table><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查网络</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1panel-network</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 测试连接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nestjs-api</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -zv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> postgres</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5432</span></span></code></pre></div><h3 id="问题四-权限问题" tabindex="-1">问题四：权限问题 <a class="header-anchor" href="#问题四-权限问题" aria-label="Permalink to &quot;问题四：权限问题&quot;">​</a></h3><p><strong>错误信息</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Error: EACCES: permission denied, open &#39;/app/logs/app.log&#39;</span></span></code></pre></div><p><strong>解决方案</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改目录权限</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 755</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/directory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改目录所有者</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chown</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1000:1000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/directory</span></span></code></pre></div><h3 id="问题五-内存不足" tabindex="-1">问题五：内存不足 <a class="header-anchor" href="#问题五-内存不足" aria-label="Permalink to &quot;问题五：内存不足&quot;">​</a></h3><p><strong>错误信息</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>FATAL ERROR: CALL_AND_RETRY_LAST Allocation failed - JavaScript heap out of memory</span></span></code></pre></div><p><strong>解决方案</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 方案一：增加 Node.js 内存限制</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NODE_OPTIONS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--max-old-space-size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2048</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 方案二：Docker 限制内存</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span></code></pre></div><h3 id="问题六-镜像拉取失败" tabindex="-1">问题六：镜像拉取失败 <a class="header-anchor" href="#问题六-镜像拉取失败" aria-label="Permalink to &quot;问题六：镜像拉取失败&quot;">​</a></h3><p><strong>错误信息</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Error response from daemon: pull access denied</span></span></code></pre></div><p><strong>解决方案</strong>：</p><table tabindex="0"><thead><tr><th>原因</th><th>解决方案</th></tr></thead><tbody><tr><td>未登录私有仓库</td><td><code>docker login registry.xxx.com</code></td></tr><tr><td>镜像名错误</td><td>检查仓库地址和标签</td></tr><tr><td>网络问题</td><td>配置镜像加速器</td></tr></tbody></table><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 配置阿里云镜像加速</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/docker/daemon.json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;EOF&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;registry-mirrors&quot;: [&quot;https://xxx.mirror.aliyuncs.com&quot;]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span></code></pre></div><h2 id="快速诊断命令" tabindex="-1">快速诊断命令 <a class="header-anchor" href="#快速诊断命令" aria-label="Permalink to &quot;快速诊断命令&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 容器状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 容器详情</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 容器名</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 容器资源使用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stats</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看容器内进程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> top</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 容器名</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 进入容器调试</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 容器名</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span></span></code></pre></div><h2 id="_1panel-日志位置" tabindex="-1">1Panel 日志位置 <a class="header-anchor" href="#_1panel-日志位置" aria-label="Permalink to &quot;1Panel 日志位置&quot;">​</a></h2><table tabindex="0"><thead><tr><th>日志类型</th><th>位置</th></tr></thead><tbody><tr><td>1Panel 自身日志</td><td><code>/opt/1panel/log/</code></td></tr><tr><td>容器日志</td><td>容器管理 → 日志</td></tr><tr><td>Nginx 日志</td><td><code>/opt/1panel/apps/openresty/logs/</code></td></tr><tr><td>应用日志</td><td>挂载的日志目录</td></tr></tbody></table><h2 id="重启策略" tabindex="-1">重启策略 <a class="header-anchor" href="#重启策略" aria-label="Permalink to &quot;重启策略&quot;">​</a></h2><p>当应用异常退出时，正确的重启策略可以自动恢复：</p><table tabindex="0"><thead><tr><th>策略</th><th>说明</th><th>适用场景</th></tr></thead><tbody><tr><td><code>no</code></td><td>不自动重启</td><td>调试阶段</td></tr><tr><td><code>on-failure</code></td><td>仅失败时重启</td><td>有状态服务</td></tr><tr><td><code>always</code></td><td>总是重启</td><td>生产环境</td></tr><tr><td><code>unless-stopped</code></td><td>除非手动停止</td><td>推荐使用</td></tr></tbody></table><h2 id="故障排查清单" tabindex="-1">故障排查清单 <a class="header-anchor" href="#故障排查清单" aria-label="Permalink to &quot;故障排查清单&quot;">​</a></h2><p>遇到问题时，按顺序检查：</p><ul><li>[ ] 容器是否启动成功 (<code>docker ps</code>)</li><li>[ ] 容器日志有无错误 (<code>docker logs</code>)</li><li>[ ] 端口是否正确映射 (<code>docker port</code>)</li><li>[ ] 环境变量是否正确 (<code>docker exec ... env</code>)</li><li>[ ] 网络是否连通 (<code>docker network inspect</code>)</li><li>[ ] 磁盘空间是否充足 (<code>df -h</code>)</li><li>[ ] 内存是否充足 (<code>free -m</code>)</li><li>[ ] 安全组是否开放端口</li></ul><h2 id="ai-协作指南" tabindex="-1">AI 协作指南 <a class="header-anchor" href="#ai-协作指南" aria-label="Permalink to &quot;AI 协作指南&quot;">​</a></h2><p>向 AI 描述问题时，提供：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>环境：1Panel + Docker + Next.js</span></span>
<span class="line"><span>现象：访问返回 502</span></span>
<span class="line"><span>容器状态：[docker ps 输出]</span></span>
<span class="line"><span>容器日志：[docker logs 输出]</span></span>
<span class="line"><span>Nginx 日志：[error.log 内容]</span></span>
<span class="line"><span>请帮我分析原因。</span></span></code></pre></div><p>越详细的信息，越能快速定位问题。</p>`,51))])}const A=l(c,[["render",g]]);export{u as __pageData,A as default};
