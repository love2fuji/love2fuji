import{_ as l,C as t,c as h,o as i,a3 as a,b as p,w as e,a as k,G as d,a4 as E}from"./chunks/framework.CUcrqFol.js";const m=JSON.parse('{"title":"0.7.1 模具与标准零件——镜像与容器","description":"0.7.1 模具与标准零件——镜像与容器：构建/运行/生命周期管理 一句话破题 镜像是只读“模具”，容器是运行中的“标准零件”。先有镜像，后有容器；容器的生命周期可控：创建、启动、停止、删除。 本质还原：镜像与容器的关系 Windows PowerShell 常用命令 构建你的镜像 构建与运行： 觉知：面向失败的生命周","frontmatter":{"title":"0.7.1 模具与标准零件——镜像与容器","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/00-bootcamp/0.7-docker/0.7.1-image-and-container.md","filePath":"Advanced-old/00-bootcamp/0.7-docker/0.7.1-image-and-container.md","lastUpdated":1766168364000}'),r={name:"Advanced-old/00-bootcamp/0.7-docker/0.7.1-image-and-container.md"};function o(c,s,g,y,A,C){const n=t("Mermaid");return i(),h("div",null,[s[1]||(s[1]=a('<h1 id="_0-7-1-模具与标准零件——镜像与容器-构建-运行-生命周期管理" tabindex="-1">0.7.1 模具与标准零件——镜像与容器：构建/运行/生命周期管理 <a class="header-anchor" href="#_0-7-1-模具与标准零件——镜像与容器-构建-运行-生命周期管理" aria-label="Permalink to &quot;0.7.1 模具与标准零件——镜像与容器：构建/运行/生命周期管理&quot;">​</a></h1><h2 id="一句话破题" tabindex="-1">一句话破题 <a class="header-anchor" href="#一句话破题" aria-label="Permalink to &quot;一句话破题&quot;">​</a></h2><p>镜像是只读“模具”，容器是运行中的“标准零件”。先有镜像，后有容器；容器的生命周期可控：创建、启动、停止、删除。</p><h2 id="本质还原-镜像与容器的关系" tabindex="-1">本质还原：镜像与容器的关系 <a class="header-anchor" href="#本质还原-镜像与容器的关系" aria-label="Permalink to &quot;本质还原：镜像与容器的关系&quot;">​</a></h2>',4)),(i(),p(E,null,{default:e(()=>[d(n,{id:"mermaid-12",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20Repo%5B%E2%80%9C%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%E2%80%9D%5D%20--%3E%20Img%5B%E2%80%9C%E9%95%9C%E5%83%8F%3Atag%E2%80%9D%5D%3B%0A%20%20%20%20Img%20--%3E%20C1%5B%E2%80%9C%E5%AE%B9%E5%99%A8%20%231%E2%80%9D%5D%3B%0A%20%20%20%20Img%20--%3E%20C2%5B%E2%80%9C%E5%AE%B9%E5%99%A8%20%232%E2%80%9D%5D%3B%0A%20%20%20%20C1%20--%3E%20Life1%5B%E2%80%9C%E8%BF%90%E8%A1%8C%2F%E5%81%9C%E6%AD%A2%2F%E5%88%A0%E9%99%A4%E2%80%9D%5D%3B%0A%20%20%20%20C2%20--%3E%20Life2%5B%E2%80%9C%E8%BF%90%E8%A1%8C%2F%E5%81%9C%E6%AD%A2%2F%E5%88%A0%E9%99%A4%E2%80%9D%5D%3B%0A"})]),fallback:e(()=>[...s[0]||(s[0]=[k(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=a(`<h2 id="windows-powershell-常用命令" tabindex="-1">Windows PowerShell 常用命令 <a class="header-anchor" href="#windows-powershell-常用命令" aria-label="Permalink to &quot;Windows PowerShell 常用命令&quot;">​</a></h2><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Get-Command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> docker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker pull node:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alpine</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker run </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alpine</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker ps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker logs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker stop app</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker rm app</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker rmi node:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alpine</span></span></code></pre></div><h2 id="构建你的镜像" tabindex="-1">构建你的镜像 <a class="header-anchor" href="#构建你的镜像" aria-label="Permalink to &quot;构建你的镜像&quot;">​</a></h2><p><code>Dockerfile</code></p><div class="language-Dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> node:18-alpine</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WORKDIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /app</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> package.json package-lock.json /app/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npm ci</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COPY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> . /app</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EXPOSE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CMD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;start&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p>构建与运行：</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker build </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t myapp:latest .</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker run </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name myapp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myapp:latest</span></span></code></pre></div><h2 id="觉知-面向失败的生命周期管理" tabindex="-1">觉知：面向失败的生命周期管理 <a class="header-anchor" href="#觉知-面向失败的生命周期管理" aria-label="Permalink to &quot;觉知：面向失败的生命周期管理&quot;">​</a></h2><ul><li>容器异常退出时，先看日志再重启：<code>docker logs -f &lt;容器名&gt;</code>。</li><li>端口冲突导致启动失败，先查占用：<code>Get-NetTCPConnection | Where-Object { $_.LocalPort -eq 3000 }</code>。</li><li>保持“镜像不可变”，变更通过重建镜像与重新部署完成。</li></ul><h2 id="ai-协作指南" tabindex="-1">AI 协作指南 <a class="header-anchor" href="#ai-协作指南" aria-label="Permalink to &quot;AI 协作指南&quot;">​</a></h2><ul><li>核心意图：让 AI 输出从 Dockerfile 到运行命令的完整闭环。</li><li>需求定义公式： <ul><li>“为一个监听 <code>3000</code> 端口的 Node 应用生成 <code>Dockerfile</code> 与运行命令，使用 <code>node:18-alpine</code>，并提供查看日志与排障命令。”</li></ul></li></ul>`,11))])}const F=l(r,[["render",o]]);export{m as __pageData,F as default};
