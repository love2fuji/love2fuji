import{_ as e,C as h,c as p,o as t,j as i,b as d,a3 as k,a,w as n,G as r,a4 as E}from"./chunks/framework.CUcrqFol.js";const D=JSON.parse('{"title":"11.2 提交代码即自动上线——GitHub Actions 质量门禁与生产部署","description":"11.2 GitHub Actions 质量门禁与生产部署 认知重构 CI/CD 不是大公司的专利。通过 GitHub Actions，即使是个人项目也能实现**代码提交后自动检查、自动测试、自动部署**的完整流水线。 本节内容 | 小节 | 核心问题 | 你将学会 | |------|----------|-----","frontmatter":{"title":"11.2 提交代码即自动上线——GitHub Actions 质量门禁与生产部署","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/11-review/11.2-cd/index.md","filePath":"Advanced-old/11-review/11.2-cd/index.md","lastUpdated":1766168364000}'),o={name:"Advanced-old/11-review/11.2-cd/index.md"};function c(g,s,u,A,y,b){const l=h("Mermaid");return t(),p("div",null,[s[1]||(s[1]=i("h1",{id:"_11-2-github-actions-质量门禁与生产部署",tabindex:"-1"},[a("11.2 GitHub Actions 质量门禁与生产部署 "),i("a",{class:"header-anchor",href:"#_11-2-github-actions-质量门禁与生产部署","aria-label":'Permalink to "11.2 GitHub Actions 质量门禁与生产部署"'},"​")],-1)),s[2]||(s[2]=i("h2",{id:"认知重构",tabindex:"-1"},[a("认知重构 "),i("a",{class:"header-anchor",href:"#认知重构","aria-label":'Permalink to "认知重构"'},"​")],-1)),s[3]||(s[3]=i("p",null,[a("CI/CD 不是大公司的专利。通过 GitHub Actions，即使是个人项目也能实现"),i("strong",null,"代码提交后自动检查、自动测试、自动部署"),a("的完整流水线。")],-1)),(t(),d(E,null,{default:n(()=>[r(l,{id:"mermaid-9",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20subgraph%20CI%5B%22%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%22%5D%0A%20%20%20%20%20%20%20%20Push%5B%22%E4%BB%A3%E7%A0%81%E6%8E%A8%E9%80%81%22%5D%20--%3E%20Lint%5B%22%E4%BB%A3%E7%A0%81%E6%A3%80%E6%9F%A5%22%5D%0A%20%20%20%20%20%20%20%20Lint%20--%3E%20Test%5B%22%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95%22%5D%0A%20%20%20%20%20%20%20%20Test%20--%3E%20Build%5B%22%E6%9E%84%E5%BB%BA%E9%AA%8C%E8%AF%81%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20CD%5B%22%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2%22%5D%0A%20%20%20%20%20%20%20%20Build%20--%3E%20Deploy%5B%22%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%22%5D%0A%20%20%20%20%20%20%20%20Deploy%20--%3E%20Notify%5B%22%E9%80%9A%E7%9F%A5%22%5D%0A%20%20%20%20end%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[a(" Loading... ",-1)])]),_:1})),s[4]||(s[4]=k(`<h2 id="本节内容" tabindex="-1">本节内容 <a class="header-anchor" href="#本节内容" aria-label="Permalink to &quot;本节内容&quot;">​</a></h2><table tabindex="0"><thead><tr><th>小节</th><th>核心问题</th><th>你将学会</th></tr></thead><tbody><tr><td>11.2.1 Workflow 配置</td><td>自动化流程怎么写？</td><td>触发条件与执行环境</td></tr><tr><td>11.2.2 质量检查</td><td>如何自动检查代码？</td><td>测试、构建、安全扫描</td></tr><tr><td>11.2.3 部署流水线</td><td>如何自动部署？</td><td>生产环境自动发布</td></tr><tr><td>11.2.4 密钥管理</td><td>密码怎么存？</td><td>CI/CD 环境配置与安全</td></tr></tbody></table><h2 id="github-actions-核心概念" tabindex="-1">GitHub Actions 核心概念 <a class="header-anchor" href="#github-actions-核心概念" aria-label="Permalink to &quot;GitHub Actions 核心概念&quot;">​</a></h2><table tabindex="0"><thead><tr><th>概念</th><th>说明</th></tr></thead><tbody><tr><td><strong>Workflow</strong></td><td>自动化流程，定义在 <code>.github/workflows/*.yml</code></td></tr><tr><td><strong>Event</strong></td><td>触发工作流的事件，如 push、pull_request</td></tr><tr><td><strong>Job</strong></td><td>工作流中的一组步骤，可并行或串行执行</td></tr><tr><td><strong>Step</strong></td><td>Job 中的单个任务，可以是命令或 Action</td></tr><tr><td><strong>Action</strong></td><td>可复用的自动化单元</td></tr></tbody></table><h2 id="最小可用配置" tabindex="-1">最小可用配置 <a class="header-anchor" href="#最小可用配置" aria-label="Permalink to &quot;最小可用配置&quot;">​</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .github/workflows/ci.yml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CI</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pull_request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v4</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;20&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm ci</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm run lint</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm run build</span></span></code></pre></div><h2 id="ai-协作提示" tabindex="-1">AI 协作提示 <a class="header-anchor" href="#ai-协作提示" aria-label="Permalink to &quot;AI 协作提示&quot;">​</a></h2><p>在配置 CI/CD 时，可以这样与 AI 协作：</p><ul><li>&quot;帮我写一个 Next.js 项目的 GitHub Actions 配置&quot;</li><li>&quot;如何在 GitHub Actions 中缓存 node_modules&quot;</li><li>&quot;配置 PR 合并前必须通过测试的门禁&quot;</li></ul><div class="tip custom-block"><p class="custom-block-title">CI/CD 的价值</p><p>自动化的价值不仅在于节省时间，更在于<strong>消除人为失误</strong>。每次发布都经过相同的检查流程，保证一致性。</p></div>`,10))])}const m=e(o,[["render",c]]);export{D as __pageData,m as default};
