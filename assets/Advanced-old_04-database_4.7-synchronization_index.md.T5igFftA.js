import{_ as l,C as i,c as o,o as a,a3 as d,b as n,w as e,a as h,G as s,a4 as E}from"./chunks/framework.CUcrqFol.js";const D=JSON.parse('{"title":"4.7 数据打架了怎么办——数据同步：幂等/冲突处理","description":"4.7 数据打架了怎么办——数据同步：幂等/冲突处理 认知重构 在分布式系统和多用户场景下，数据\\"打架\\"是常态而非异常——学会处理冲突是构建健壮应用的必修课。 数据冲突的典型场景 **常见冲突场景**： 两个用户同时编辑同一篇文章 用户重复点击提交按钮 网络延迟导致请求重发 离线应用数据同步 子章节导航 | 章节 |","frontmatter":{"title":"4.7 数据打架了怎么办——数据同步：幂等/冲突处理","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/04-database/4.7-synchronization/index.md","filePath":"Advanced-old/04-database/4.7-synchronization/index.md","lastUpdated":1766168364000}'),A={name:"Advanced-old/04-database/4.7-synchronization/index.md"};function B(c,t,_,b,u,p){const r=i("Mermaid");return a(),o("div",null,[t[1]||(t[1]=d('<h1 id="_4-7-数据打架了怎么办——数据同步-幂等-冲突处理" tabindex="-1">4.7 数据打架了怎么办——数据同步：幂等/冲突处理 <a class="header-anchor" href="#_4-7-数据打架了怎么办——数据同步-幂等-冲突处理" aria-label="Permalink to &quot;4.7 数据打架了怎么办——数据同步：幂等/冲突处理&quot;">​</a></h1><h3 id="认知重构" tabindex="-1">认知重构 <a class="header-anchor" href="#认知重构" aria-label="Permalink to &quot;认知重构&quot;">​</a></h3><p>在分布式系统和多用户场景下，数据&quot;打架&quot;是常态而非异常——学会处理冲突是构建健壮应用的必修课。</p><h3 id="数据冲突的典型场景" tabindex="-1">数据冲突的典型场景 <a class="header-anchor" href="#数据冲突的典型场景" aria-label="Permalink to &quot;数据冲突的典型场景&quot;">​</a></h3>',4)),(a(),n(E,null,{default:e(()=>[s(r,{id:"mermaid-12",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5B%22%E7%94%A8%E6%88%B7%20A%20%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%22%5D%20--%3E%20B%5B%22%E7%94%A8%E6%88%B7%20A%20%E4%BF%AE%E6%94%B9%E4%B8%AD...%22%5D%0A%20%20%20%20C%5B%22%E7%94%A8%E6%88%B7%20B%20%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%22%5D%20--%3E%20D%5B%22%E7%94%A8%E6%88%B7%20B%20%E4%BF%AE%E6%94%B9%E4%B8%AD...%22%5D%0A%20%20%20%20B%20--%3E%20E%5B%22%E7%94%A8%E6%88%B7%20A%20%E4%BF%9D%E5%AD%98%22%5D%0A%20%20%20%20D%20--%3E%20F%5B%22%E7%94%A8%E6%88%B7%20B%20%E4%BF%9D%E5%AD%98%22%5D%0A%20%20%20%20E%20--%3E%20G%7B%22%E5%86%B2%E7%AA%81%EF%BC%81%22%7D%0A%20%20%20%20F%20--%3E%20G%0A"})]),fallback:e(()=>[...t[0]||(t[0]=[h(" Loading... ",-1)])]),_:1})),t[2]||(t[2]=d('<p><strong>常见冲突场景</strong>：</p><ul><li>两个用户同时编辑同一篇文章</li><li>用户重复点击提交按钮</li><li>网络延迟导致请求重发</li><li>离线应用数据同步</li></ul><h3 id="子章节导航" tabindex="-1">子章节导航 <a class="header-anchor" href="#子章节导航" aria-label="Permalink to &quot;子章节导航&quot;">​</a></h3><table tabindex="0"><thead><tr><th>章节</th><th>主题</th><th>核心问题</th></tr></thead><tbody><tr><td>4.7.1</td><td>幂等性设计</td><td>如何让重复请求安全无害？</td></tr><tr><td>4.7.2</td><td>冲突检测</td><td>如何发现数据被别人改了？</td></tr><tr><td>4.7.3</td><td>冲突解决</td><td>冲突了该听谁的？</td></tr><tr><td>4.7.4</td><td>数据一致性</td><td>如何保证数据最终正确？</td></tr></tbody></table><h3 id="冲突处理策略概览" tabindex="-1">冲突处理策略概览 <a class="header-anchor" href="#冲突处理策略概览" aria-label="Permalink to &quot;冲突处理策略概览&quot;">​</a></h3><table tabindex="0"><thead><tr><th>策略</th><th>适用场景</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>悲观锁</td><td>高冲突场景</td><td>彻底避免冲突</td><td>性能差</td></tr><tr><td>乐观锁</td><td>低冲突场景</td><td>性能好</td><td>需处理冲突</td></tr><tr><td>幂等键</td><td>表单重复提交</td><td>简单有效</td><td>需要额外存储</td></tr><tr><td>版本号</td><td>并发编辑</td><td>实现简单</td><td>需前端配合</td></tr></tbody></table><h3 id="本章定位" tabindex="-1">本章定位 <a class="header-anchor" href="#本章定位" aria-label="Permalink to &quot;本章定位&quot;">​</a></h3><p>本章聚焦于<strong>应用层</strong>的数据同步问题，不涉及数据库复制等底层机制。我们关注的是：</p><ol><li>如何让 API 安全应对重复请求</li><li>如何检测和解决用户级别的数据冲突</li><li>如何在用户体验和数据正确性之间取得平衡</li></ol><h3 id="本章小结" tabindex="-1">本章小结 <a class="header-anchor" href="#本章小结" aria-label="Permalink to &quot;本章小结&quot;">​</a></h3><ul><li>数据冲突在多用户系统中不可避免</li><li>根据业务场景选择合适的冲突处理策略</li><li>幂等性设计是 API 健壮性的基础</li><li>冲突检测和解决需要前后端配合</li></ul>',11))])}const x=l(A,[["render",B]]);export{D as __pageData,x as default};
