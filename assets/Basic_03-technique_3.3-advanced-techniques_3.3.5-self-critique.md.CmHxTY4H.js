import{_ as i,c as a,o as n,a3 as t}from"./chunks/framework.CUcrqFol.js";const g=JSON.parse('{"title":"3.3.5 Self-Critique：让 AI 自我检查","description":"3.3.5 Self-Critique：让 AI 自我检查 经过本节学习，你将掌握 Self-Critique（自我批评）的定义和原理 为什么 AI 自查能提升输出质量 自查的核心维度清单 如何在提示词中引导 AI 自查 Self-Critique 的局限性 什么是 Self-Critique Self-Critiqu","frontmatter":{"title":"3.3.5 Self-Critique：让 AI 自我检查"},"headers":[],"relativePath":"Basic/03-technique/3.3-advanced-techniques/3.3.5-self-critique.md","filePath":"Basic/03-technique/3.3-advanced-techniques/3.3.5-self-critique.md","lastUpdated":1765094268000}'),l={name:"Basic/03-technique/3.3-advanced-techniques/3.3.5-self-critique.md"};function h(p,s,e,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="_3-3-5-self-critique-让-ai-自我检查" tabindex="-1">3.3.5 Self-Critique：让 AI 自我检查 <a class="header-anchor" href="#_3-3-5-self-critique-让-ai-自我检查" aria-label="Permalink to &quot;3.3.5 Self-Critique：让 AI 自我检查&quot;">​</a></h1><h2 id="经过本节学习-你将掌握" tabindex="-1">经过本节学习，你将掌握 <a class="header-anchor" href="#经过本节学习-你将掌握" aria-label="Permalink to &quot;经过本节学习，你将掌握&quot;">​</a></h2><ul><li>Self-Critique（自我批评）的定义和原理</li><li>为什么 AI 自查能提升输出质量</li><li>自查的核心维度清单</li><li>如何在提示词中引导 AI 自查</li><li>Self-Critique 的局限性</li></ul><h2 id="什么是-self-critique" tabindex="-1">什么是 Self-Critique <a class="header-anchor" href="#什么是-self-critique" aria-label="Permalink to &quot;什么是 Self-Critique&quot;">​</a></h2><p>Self-Critique（自我批评）的核心思想是：<strong>让 AI 生成内容后，再自己检查一遍，发现并修正问题</strong>。</p><p>这就像写完文章后自己校对一遍，往往能发现最初遗漏的错误。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>生成 → 自查 → 修正</span></span></code></pre></div><h2 id="核心洞见-为什么自查有效" tabindex="-1">核心洞见：为什么自查有效 <a class="header-anchor" href="#核心洞见-为什么自查有效" aria-label="Permalink to &quot;核心洞见：为什么自查有效&quot;">​</a></h2><blockquote><p>&quot;SELF-REFINE 方法可以在无需额外训练的情况下，将 AI 输出质量提升约 20%。&quot; —— 2023 年 CMU 研究论文</p></blockquote><p>这个数据告诉我们：同一个 AI，加一步自查，效果就能明显提升。</p><p>原因在于：</p><ol><li><strong>第一次生成往往有遗漏</strong>：AI 快速生成时可能忽略边界情况</li><li><strong>自查时换个视角</strong>：审查模式会关注不同方面</li><li><strong>迭代改进更精准</strong>：基于具体问题修改，比重新生成更准确</li></ol><h2 id="自查的核心维度" tabindex="-1">自查的核心维度 <a class="header-anchor" href="#自查的核心维度" aria-label="Permalink to &quot;自查的核心维度&quot;">​</a></h2><p>不同类型的内容，需要检查的维度不同：</p><h3 id="代码自查维度" tabindex="-1">代码自查维度 <a class="header-anchor" href="#代码自查维度" aria-label="Permalink to &quot;代码自查维度&quot;">​</a></h3><table tabindex="0"><thead><tr><th>维度</th><th>检查内容</th><th>常见问题</th></tr></thead><tbody><tr><td><strong>功能正确性</strong></td><td>是否实现了需求</td><td>遗漏部分功能</td></tr><tr><td><strong>边界情况</strong></td><td>空值、极值、异常输入</td><td>没处理 null/undefined</td></tr><tr><td><strong>安全性</strong></td><td>XSS、注入、敏感数据</td><td>用户输入未过滤</td></tr><tr><td><strong>性能</strong></td><td>时间/空间复杂度</td><td>不必要的循环嵌套</td></tr><tr><td><strong>可读性</strong></td><td>命名、注释、结构</td><td>变量名不清晰</td></tr><tr><td><strong>可维护性</strong></td><td>重复代码、耦合度</td><td>硬编码 magic number</td></tr></tbody></table><h3 id="文案-文档自查维度" tabindex="-1">文案/文档自查维度 <a class="header-anchor" href="#文案-文档自查维度" aria-label="Permalink to &quot;文案/文档自查维度&quot;">​</a></h3><table tabindex="0"><thead><tr><th>维度</th><th>检查内容</th></tr></thead><tbody><tr><td><strong>准确性</strong></td><td>信息是否正确</td></tr><tr><td><strong>完整性</strong></td><td>是否遗漏关键点</td></tr><tr><td><strong>清晰度</strong></td><td>是否容易理解</td></tr><tr><td><strong>一致性</strong></td><td>术语、风格是否统一</td></tr></tbody></table><h2 id="差提示词-vs-好提示词" tabindex="-1">差提示词 vs 好提示词 <a class="header-anchor" href="#差提示词-vs-好提示词" aria-label="Permalink to &quot;差提示词 vs 好提示词&quot;">​</a></h2><h3 id="场景-生成表单验证函数" tabindex="-1">场景：生成表单验证函数 <a class="header-anchor" href="#场景-生成表单验证函数" aria-label="Permalink to &quot;场景：生成表单验证函数&quot;">​</a></h3><h3 id="❌-差提示词" tabindex="-1">❌ 差提示词 <a class="header-anchor" href="#❌-差提示词" aria-label="Permalink to &quot;❌ 差提示词&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>写一个验证用户注册表单的函数，检查邮箱和密码。</span></span></code></pre></div><p>AI 可能生成一个基础版本，但遗漏边界情况。</p><h3 id="✅-好提示词-带-self-critique" tabindex="-1">✅ 好提示词（带 Self-Critique） <a class="header-anchor" href="#✅-好提示词-带-self-critique" aria-label="Permalink to &quot;✅ 好提示词（带 Self-Critique）&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>写一个验证用户注册表单的函数，检查邮箱和密码。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>生成后，请自查：</span></span>
<span class="line"><span>1. 是否覆盖了所有边界情况（空值、空字符串、只有空格）？</span></span>
<span class="line"><span>2. 是否有安全隐患（XSS、注入风险）？</span></span>
<span class="line"><span>3. 错误提示是否清晰，用户能知道具体问题？</span></span>
<span class="line"><span>4. 是否有不必要的重复代码？</span></span>
<span class="line"><span></span></span>
<span class="line"><span>如有问题，请修正后重新输出最终版本。</span></span></code></pre></div><h3 id="好提示词的-ai-输出" tabindex="-1">好提示词的 AI 输出 <a class="header-anchor" href="#好提示词的-ai-输出" aria-label="Permalink to &quot;好提示词的 AI 输出&quot;">​</a></h3><p>AI 会先生成代码，然后逐条检查，最后给出改进版：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 自查发现的问题：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. 原版没有处理 trim 后为空的情况</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 错误提示不够具体</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. 邮箱正则可以更严格</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 改进后的版本：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validateRegistration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> errors</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 处理空白字符</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> trimmedEmail</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> email?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> trimmedPassword</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 邮箱验证</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">trimmedEmail) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    errors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;邮箱不能为空&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\s@]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\s@]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\s@]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(trimmedEmail)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    errors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;邮箱格式不正确，请检查是否包含 @ 和域名&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 密码验证</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">trimmedPassword) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    errors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;密码不能为空&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (trimmedPassword.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      errors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;密码长度至少 8 位&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[A-Z]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(trimmedPassword)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      errors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;密码需要包含至少一个大写字母&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[0-9]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(trimmedPassword)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      errors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;密码需要包含至少一个数字&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    isValid: errors.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    errors</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="常用自查指令词库" tabindex="-1">常用自查指令词库 <a class="header-anchor" href="#常用自查指令词库" aria-label="Permalink to &quot;常用自查指令词库&quot;">​</a></h2><h3 id="通用自查" tabindex="-1">通用自查 <a class="header-anchor" href="#通用自查" aria-label="Permalink to &quot;通用自查&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>生成后，请检查是否有遗漏或错误，如有请修正。</span></span></code></pre></div><h3 id="代码自查" tabindex="-1">代码自查 <a class="header-anchor" href="#代码自查" aria-label="Permalink to &quot;代码自查&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>请自查：</span></span>
<span class="line"><span>1. 边界情况是否都处理了？</span></span>
<span class="line"><span>2. 有没有潜在的安全问题？</span></span>
<span class="line"><span>3. 性能是否可以优化？</span></span>
<span class="line"><span>如有问题，请修正后输出最终版本。</span></span></code></pre></div><h3 id="严格自查" tabindex="-1">严格自查 <a class="header-anchor" href="#严格自查" aria-label="Permalink to &quot;严格自查&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>请扮演一个严格的代码审查者，审查你刚才生成的代码：</span></span>
<span class="line"><span>- 找出至少 3 个可以改进的地方</span></span>
<span class="line"><span>- 给出改进后的版本</span></span></code></pre></div><h3 id="特定维度自查" tabindex="-1">特定维度自查 <a class="header-anchor" href="#特定维度自查" aria-label="Permalink to &quot;特定维度自查&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>请从 [安全性/性能/可读性] 角度审查这段代码，指出问题并修正。</span></span></code></pre></div><h2 id="实战示例-待办清单项目" tabindex="-1">实战示例：待办清单项目 <a class="header-anchor" href="#实战示例-待办清单项目" aria-label="Permalink to &quot;实战示例：待办清单项目&quot;">​</a></h2><p>小李让 AI 生成一个任务排序函数，并要求自查。</p><h3 id="self-critique-提示词" tabindex="-1">Self-Critique 提示词 <a class="header-anchor" href="#self-critique-提示词" aria-label="Permalink to &quot;Self-Critique 提示词&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>为我的待办清单应用写一个排序函数，支持按以下方式排序：</span></span>
<span class="line"><span>- 按创建时间（新到旧）</span></span>
<span class="line"><span>- 按截止日期（近到远，无截止日期的排最后）</span></span>
<span class="line"><span>- 按优先级（高 &gt; 中 &gt; 低）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>任务数据结构：</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  id: string,</span></span>
<span class="line"><span>  title: string,</span></span>
<span class="line"><span>  createdAt: Date,</span></span>
<span class="line"><span>  dueDate: Date | null,</span></span>
<span class="line"><span>  priority: &#39;high&#39; | &#39;medium&#39; | &#39;low&#39;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>生成后，请自查：</span></span>
<span class="line"><span>1. 排序逻辑是否正确处理了 null/undefined？</span></span>
<span class="line"><span>2. 优先级排序的顺序是否符合预期？</span></span>
<span class="line"><span>3. 函数接口是否清晰易用？</span></span>
<span class="line"><span>如有问题，请修正。</span></span></code></pre></div><h3 id="ai-输出-含自查过程" tabindex="-1">AI 输出（含自查过程） <a class="header-anchor" href="#ai-输出-含自查过程" aria-label="Permalink to &quot;AI 输出（含自查过程）&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 初版实现...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 自查发现：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. dueDate 为 null 时直接比较会出问题 ✓ 已处理</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 优先级用字符串比较不可靠，需要映射为数字 → 需修正</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3. 函数可以更灵活，支持升序/降序 → 已优化</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 最终版本：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> priorityMap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { high: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, medium: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, low: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sortTasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sortBy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">order</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;desc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> direction</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> order </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;desc&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tasks].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (sortBy) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;createdAt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> direction </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b.createdAt) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a.createdAt));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dueDate&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // null 排最后</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a.dueDate </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b.dueDate) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a.dueDate) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b.dueDate) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> direction </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a.dueDate) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b.dueDate));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      case</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;priority&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> direction </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (priorityMap[b.priority] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> priorityMap[a.priority]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="迭代式-self-critique" tabindex="-1">迭代式 Self-Critique <a class="header-anchor" href="#迭代式-self-critique" aria-label="Permalink to &quot;迭代式 Self-Critique&quot;">​</a></h2><p>对于重要输出，可以进行多轮自查：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>第一轮：功能正确性检查</span></span>
<span class="line"><span>第二轮：安全性检查</span></span>
<span class="line"><span>第三轮：性能和代码质量检查</span></span></code></pre></div><p>每轮聚焦一个维度，逐步完善。</p><h2 id="self-critique-的局限性" tabindex="-1">Self-Critique 的局限性 <a class="header-anchor" href="#self-critique-的局限性" aria-label="Permalink to &quot;Self-Critique 的局限性&quot;">​</a></h2><table tabindex="0"><thead><tr><th>局限</th><th>表现</th><th>应对方法</th></tr></thead><tbody><tr><td>自我认可偏差</td><td>AI 可能认为自己的输出没问题</td><td>用「扮演严格审查者」指令</td></tr><tr><td>检查不彻底</td><td>可能遗漏某些维度</td><td>明确列出要检查的维度</td></tr><tr><td>越查越乱</td><td>修正时引入新问题</td><td>限制修改范围，一次只改一处</td></tr><tr><td>增加 token</td><td>输出变长</td><td>对重要输出使用，简单任务跳过</td></tr></tbody></table><h2 id="与人工审查的配合" tabindex="-1">与人工审查的配合 <a class="header-anchor" href="#与人工审查的配合" aria-label="Permalink to &quot;与人工审查的配合&quot;">​</a></h2><p>Self-Critique 不能替代人工审查，而是<strong>减轻人工审查负担</strong>。</p><p>推荐流程：</p><ol><li>AI 生成 + 自查 → 得到初版</li><li>你快速浏览，发现明显问题 → 让 AI 修正</li><li>最终人工确认关键逻辑</li></ol><h2 id="可复制模板" tabindex="-1">可复制模板 <a class="header-anchor" href="#可复制模板" aria-label="Permalink to &quot;可复制模板&quot;">​</a></h2><h3 id="代码生成-自查模板" tabindex="-1">代码生成 + 自查模板 <a class="header-anchor" href="#代码生成-自查模板" aria-label="Permalink to &quot;代码生成 + 自查模板&quot;">​</a></h3><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">任务描述</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">生成后，请自查：</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 是否覆盖了所有边界情况？</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 是否有安全隐患？</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">3.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 代码是否清晰可维护？</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">如有问题，请修正后输出最终版本。</span></span></code></pre></div><h3 id="严格审查模板" tabindex="-1">严格审查模板 <a class="header-anchor" href="#严格审查模板" aria-label="Permalink to &quot;严格审查模板&quot;">​</a></h3><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">请扮演一个严格的 [</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">角色：代码审查者/编辑/QA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]，审查你刚才的输出：</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 找出至少 [</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">数量</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] 个可以改进的地方</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 说明每个问题的影响</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 给出改进后的版本</span></span></code></pre></div><h3 id="特定维度审查模板" tabindex="-1">特定维度审查模板 <a class="header-anchor" href="#特定维度审查模板" aria-label="Permalink to &quot;特定维度审查模板&quot;">​</a></h3><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">请从以下维度审查你的输出：</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] [</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">维度1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] [</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">维度2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] [</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">维度3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">对每个维度，说明是否通过，如不通过请修正。</span></span></code></pre></div><h2 id="本节要点" tabindex="-1">本节要点 <a class="header-anchor" href="#本节要点" aria-label="Permalink to &quot;本节要点&quot;">​</a></h2><p>✓ <strong>Self-Critique 的本质</strong>：让 AI 生成后自我检查，发现并修正问题</p><p>✓ <strong>为什么有效</strong>：自查时换视角，能发现第一次遗漏的问题</p><p>✓ <strong>核心维度</strong>：功能正确性、边界情况、安全性、性能、可读性</p><p>✓ <strong>常用指令</strong>：「请自查...如有问题请修正」「扮演严格审查者」</p><p>✓ <strong>局限性</strong>：可能自我认可、检查不彻底，需配合人工审查</p><p>下一节，我们学习如何选择合适的技巧——技巧选择指南。</p>`,67)])])}const c=i(l,[["render",h]]);export{g as __pageData,c as default};
