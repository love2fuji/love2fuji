import{_ as t,C as e,c as p,o as i,a3 as a,b as h,w as n,a as k,G as d,a4 as r}from"./chunks/framework.CUcrqFol.js";const b=JSON.parse('{"title":"11.3.4 文档也要跟上代码——版本控制：文档与代码的同步更新","description":"11.3.4 版本控制：文档与代码的同步更新 一句话破题 **过时的文档比没有文档更糟糕**——它会误导人。文档必须和代码一起更新。 核心价值 保持文档同步能让你： 避免新人被过时信息误导 保证文档的可信度 形成文档更新的习惯 文档与代码同仓库 好处： 改代码时顺手改文档 PR 可以同时 Review 代码和文档 版本","frontmatter":{"title":"11.3.4 文档也要跟上代码——版本控制：文档与代码的同步更新","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/11-review/11.3-knowledge-base/11.3.4-versioning.md","filePath":"Advanced-old/11-review/11.3-knowledge-base/11.3.4-versioning.md","lastUpdated":1766168364000}'),o={name:"Advanced-old/11-review/11.3-knowledge-base/11.3.4-versioning.md"};function E(c,s,g,y,u,F){const l=e("Mermaid");return i(),p("div",null,[s[1]||(s[1]=a(`<h1 id="_11-3-4-版本控制-文档与代码的同步更新" tabindex="-1">11.3.4 版本控制：文档与代码的同步更新 <a class="header-anchor" href="#_11-3-4-版本控制-文档与代码的同步更新" aria-label="Permalink to &quot;11.3.4 版本控制：文档与代码的同步更新&quot;">​</a></h1><h2 id="一句话破题" tabindex="-1">一句话破题 <a class="header-anchor" href="#一句话破题" aria-label="Permalink to &quot;一句话破题&quot;">​</a></h2><p><strong>过时的文档比没有文档更糟糕</strong>——它会误导人。文档必须和代码一起更新。</p><h2 id="核心价值" tabindex="-1">核心价值 <a class="header-anchor" href="#核心价值" aria-label="Permalink to &quot;核心价值&quot;">​</a></h2><p>保持文档同步能让你：</p><ul><li>避免新人被过时信息误导</li><li>保证文档的可信度</li><li>形成文档更新的习惯</li></ul><h2 id="文档与代码同仓库" tabindex="-1">文档与代码同仓库 <a class="header-anchor" href="#文档与代码同仓库" aria-label="Permalink to &quot;文档与代码同仓库&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>project/</span></span>
<span class="line"><span>├── docs/           # 文档和代码在同一个仓库</span></span>
<span class="line"><span>│   └── api.md</span></span>
<span class="line"><span>├── src/</span></span>
<span class="line"><span>│   └── api/</span></span>
<span class="line"><span>└── package.json</span></span></code></pre></div><p>好处：</p><ul><li>改代码时顺手改文档</li><li>PR 可以同时 Review 代码和文档</li><li>版本历史一目了然</li></ul><h2 id="在-pr-模板中强制检查" tabindex="-1">在 PR 模板中强制检查 <a class="header-anchor" href="#在-pr-模板中强制检查" aria-label="Permalink to &quot;在 PR 模板中强制检查&quot;">​</a></h2><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- .github/pull_request_template.md --&gt;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## Checklist</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 代码已测试</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 类型检查通过</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] </span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold;">**相关文档已更新**</span></span></code></pre></div><h2 id="自动检测文档过时" tabindex="-1">自动检测文档过时 <a class="header-anchor" href="#自动检测文档过时" aria-label="Permalink to &quot;自动检测文档过时&quot;">​</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .github/workflows/docs-check.yml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Check Docs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pull_request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    paths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/api/**&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Check if docs updated</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          if ! git diff --name-only origin/main | grep -q &quot;docs/api&quot;; then</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            echo &quot;::warning::API 代码有变更，请确认是否需要更新 docs/api 文档&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          fi</span></span></code></pre></div><h2 id="文档版本标记" tabindex="-1">文档版本标记 <a class="header-anchor" href="#文档版本标记" aria-label="Permalink to &quot;文档版本标记&quot;">​</a></h2><p>在文档中标注适用的代码版本：</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- docs/api/users.md --&gt;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;"># 用户 API</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">&gt; 适用版本: v2.0.0+</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">&gt; 最后更新: 2024-01-15</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 接口说明</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">...</span></span></code></pre></div><h2 id="使用-typedoc-自动生成-api-文档" tabindex="-1">使用 TypeDoc 自动生成 API 文档 <a class="header-anchor" href="#使用-typedoc-自动生成-api-文档" aria-label="Permalink to &quot;使用 TypeDoc 自动生成 API 文档&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> typedoc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 生成文档</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> typedoc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --entryPoints</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/index.ts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs/api</span></span></code></pre></div><p>配置文件：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// typedoc.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;entryPoints&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/index.ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;out&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./docs/api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;excludePrivate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;excludeInternal&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="文档更新流程" tabindex="-1">文档更新流程 <a class="header-anchor" href="#文档更新流程" aria-label="Permalink to &quot;文档更新流程&quot;">​</a></h2>`,22)),(i(),h(r,null,{default:n(()=>[d(l,{id:"mermaid-82",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%22%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81%22%5D%20--%3E%20B%7B%22%E6%B6%89%E5%8F%8A%20API%2F%E9%85%8D%E7%BD%AE%E5%8F%98%E6%9B%B4%3F%22%7D%0A%20%20%20%20B%20--%3E%7C%E6%98%AF%7C%20C%5B%22%E6%9B%B4%E6%96%B0%E7%9B%B8%E5%85%B3%E6%96%87%E6%A1%A3%22%5D%0A%20%20%20%20B%20--%3E%7C%E5%90%A6%7C%20D%5B%22%E8%B7%B3%E8%BF%87%22%5D%0A%20%20%20%20C%20--%3E%20E%5B%22%E6%8F%90%E4%BA%A4%20PR%22%5D%0A%20%20%20%20D%20--%3E%20E%0A%20%20%20%20E%20--%3E%20F%5B%22Code%20Review%20%E6%A3%80%E6%9F%A5%E6%96%87%E6%A1%A3%22%5D%0A%20%20%20%20F%20--%3E%20G%5B%22%E5%90%88%E5%B9%B6%22%5D%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[k(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=a(`<h2 id="文档废弃处理" tabindex="-1">文档废弃处理 <a class="header-anchor" href="#文档废弃处理" aria-label="Permalink to &quot;文档废弃处理&quot;">​</a></h2><p>当功能废弃时，不要直接删除文档：</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;"># 旧版登录 API</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::: warning 已废弃</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">此 API 将在 v3.0.0 移除，请迁移到 [</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">新版登录 API</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">](</span><span style="--shiki-light:#24292E;--shiki-light-text-decoration:underline;--shiki-dark:#E1E4E8;--shiki-dark-text-decoration:underline;">./login-v2.md</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:::</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 迁移指南</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 将 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\`/api/login\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 改为 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\`/api/v2/login\`</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 请求体增加 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\`clientId\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 字段</span></span></code></pre></div><h2 id="避坑指南" tabindex="-1">避坑指南 <a class="header-anchor" href="#避坑指南" aria-label="Permalink to &quot;避坑指南&quot;">​</a></h2><div class="danger custom-block"><p class="custom-block-title">新手最容易犯的错</p><ol><li>改了代码忘了改文档</li><li>文档放在单独的仓库，维护困难</li><li>删除功能时直接删文档，没有迁移指引</li><li>文档没有版本标记，不知道适用哪个版本</li></ol></div>`,5))])}const B=t(o,[["render",E]]);export{b as __pageData,B as default};
