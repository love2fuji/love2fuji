import{_ as r,C as h,c as k,o as i,a3 as t,b as e,w as a,a as d,G as l,a4 as p}from"./chunks/framework.CUcrqFol.js";const b=JSON.parse('{"title":"4.4 告别手写 SQL——Prisma 实战应用","description":"4.4 告别手写 SQL——Prisma 实战应用 认知重构 Prisma 是现代 TypeScript 项目的首选 ORM——它用类型安全的 API 取代了手写 SQL，让数据库操作变得简单、安全、可维护。 为什么选择 Prisma？ | 特性 | Prisma | 传统 ORM | 原生 SQL | |------","frontmatter":{"title":"4.4 告别手写 SQL——Prisma 实战应用","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/04-database/4.4-prisma/index.md","filePath":"Advanced-old/04-database/4.4-prisma/index.md","lastUpdated":1766168364000}'),o={name:"Advanced-old/04-database/4.4-prisma/index.md"};function E(c,s,m,g,A,F){const n=h("Mermaid");return i(),k("div",null,[s[2]||(s[2]=t('<h1 id="_4-4-告别手写-sql——prisma-实战应用" tabindex="-1">4.4 告别手写 SQL——Prisma 实战应用 <a class="header-anchor" href="#_4-4-告别手写-sql——prisma-实战应用" aria-label="Permalink to &quot;4.4 告别手写 SQL——Prisma 实战应用&quot;">​</a></h1><h3 id="认知重构" tabindex="-1">认知重构 <a class="header-anchor" href="#认知重构" aria-label="Permalink to &quot;认知重构&quot;">​</a></h3><p>Prisma 是现代 TypeScript 项目的首选 ORM——它用类型安全的 API 取代了手写 SQL，让数据库操作变得简单、安全、可维护。</p><h3 id="为什么选择-prisma" tabindex="-1">为什么选择 Prisma？ <a class="header-anchor" href="#为什么选择-prisma" aria-label="Permalink to &quot;为什么选择 Prisma？&quot;">​</a></h3><table tabindex="0"><thead><tr><th>特性</th><th>Prisma</th><th>传统 ORM</th><th>原生 SQL</th></tr></thead><tbody><tr><td><strong>类型安全</strong></td><td>完全类型安全</td><td>部分支持</td><td>无</td></tr><tr><td><strong>学习成本</strong></td><td>低</td><td>中</td><td>高</td></tr><tr><td><strong>迁移管理</strong></td><td>内置</td><td>需配置</td><td>手动</td></tr><tr><td><strong>查询性能</strong></td><td>优秀</td><td>一般</td><td>最佳</td></tr><tr><td><strong>开发体验</strong></td><td>极佳</td><td>一般</td><td>差</td></tr></tbody></table><h3 id="prisma-工作流程" tabindex="-1">Prisma 工作流程 <a class="header-anchor" href="#prisma-工作流程" aria-label="Permalink to &quot;Prisma 工作流程&quot;">​</a></h3>',6)),(i(),e(p,null,{default:a(()=>[l(n,{id:"mermaid-105",class:"mermaid",graph:"graph%20LR%0A%20%20%20%20A%5B%22%E5%AE%9A%E4%B9%89%20Schema%22%5D%20--%3E%20B%5B%22%E7%94%9F%E6%88%90%E8%BF%81%E7%A7%BB%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E7%94%9F%E6%88%90%20Client%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8%E6%9F%A5%E8%AF%A2%22%5D%0A%20%20%20%20%0A%20%20%20%20A1%5B%22schema.prisma%22%5D%20--%3E%20A%0A%20%20%20%20B1%5B%22migration.sql%22%5D%20--%3E%20B%0A%20%20%20%20C1%5B%22%40prisma%2Fclient%22%5D%20--%3E%20C%0A"})]),fallback:a(()=>[...s[0]||(s[0]=[d(" Loading... ",-1)])]),_:1})),s[3]||(s[3]=t('<h3 id="子章节导航" tabindex="-1">子章节导航 <a class="header-anchor" href="#子章节导航" aria-label="Permalink to &quot;子章节导航&quot;">​</a></h3><table tabindex="0"><thead><tr><th>章节</th><th>主题</th><th>核心问题</th></tr></thead><tbody><tr><td>4.4.1</td><td>安装配置</td><td>如何初始化 Prisma 项目？</td></tr><tr><td>4.4.2</td><td>Schema 结构</td><td>schema.prisma 文件怎么写？</td></tr><tr><td>4.4.3</td><td>模型定义</td><td>如何定义表和关系？</td></tr><tr><td>4.4.4</td><td>数据库连接</td><td>如何配置数据库连接？</td></tr><tr><td>4.4.5</td><td>迁移管理</td><td>如何管理数据库变更？</td></tr><tr><td>4.4.6</td><td>种子数据</td><td>如何初始化测试数据？</td></tr><tr><td>4.4.7</td><td>建模实践</td><td>真实项目如何设计模型？</td></tr><tr><td>4.4.8</td><td>查询优化</td><td>如何优化 Prisma 查询？</td></tr><tr><td>4.4.9</td><td>事务处理</td><td>如何保证数据一致性？</td></tr></tbody></table><h3 id="prisma-核心概念" tabindex="-1">Prisma 核心概念 <a class="header-anchor" href="#prisma-核心概念" aria-label="Permalink to &quot;Prisma 核心概念&quot;">​</a></h3>',3)),(i(),e(p,null,{default:a(()=>[l(n,{id:"mermaid-228",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20%22Prisma%20%E7%BB%84%E4%BB%B6%22%0A%20%20%20%20%20%20%20%20Schema%5B%22Prisma%20Schema%3Cbr%2F%3E%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%22%5D%0A%20%20%20%20%20%20%20%20Migrate%5B%22Prisma%20Migrate%3Cbr%2F%3E%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%98%E6%9B%B4%22%5D%0A%20%20%20%20%20%20%20%20Client%5B%22Prisma%20Client%3Cbr%2F%3E%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8%E6%9F%A5%E8%AF%A2%22%5D%0A%20%20%20%20%20%20%20%20Studio%5B%22Prisma%20Studio%3Cbr%2F%3E%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20Schema%20--%3E%20Migrate%0A%20%20%20%20Schema%20--%3E%20Client%0A%20%20%20%20Client%20--%3E%20Studio%0A"})]),fallback:a(()=>[...s[1]||(s[1]=[d(" Loading... ",-1)])]),_:1})),s[4]||(s[4]=t(`<h3 id="快速体验" tabindex="-1">快速体验 <a class="header-anchor" href="#快速体验" aria-label="Permalink to &quot;快速体验&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @prisma/client</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 初始化</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 定义模型（schema.prisma）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. 生成迁移</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. 使用</span></span></code></pre></div><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { PrismaClient } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@prisma/client&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> prisma</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PrismaClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 完全类型安全的查询</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prisma.user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findMany</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  where: { status: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ACTIVE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  include: { posts: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="ai-协作指南" tabindex="-1">AI 协作指南 <a class="header-anchor" href="#ai-协作指南" aria-label="Permalink to &quot;AI 协作指南&quot;">​</a></h3><p><strong>核心意图</strong>：让 AI 帮你生成 Prisma Schema 或查询代码。</p><p><strong>常用提问模板</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>帮我写一个 Prisma Schema：</span></span>
<span class="line"><span>- 需求：[业务需求描述]</span></span>
<span class="line"><span>- 表：[需要的表]</span></span>
<span class="line"><span>- 关系：[表之间的关系]</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>帮我写 Prisma 查询：</span></span>
<span class="line"><span>- 模型：[相关模型]</span></span>
<span class="line"><span>- 需求：[查询需求]</span></span>
<span class="line"><span>- 条件：[过滤条件]</span></span></code></pre></div><h3 id="学习路径建议" tabindex="-1">学习路径建议 <a class="header-anchor" href="#学习路径建议" aria-label="Permalink to &quot;学习路径建议&quot;">​</a></h3><p><strong>新手</strong>：4.4.1 → 4.4.2 → 4.4.3 → 4.4.5 → 4.4.6 <strong>进阶</strong>：4.4.4 → 4.4.7 → 4.4.8 → 4.4.9</p>`,10))])}const y=r(o,[["render",E]]);export{b as __pageData,y as default};
