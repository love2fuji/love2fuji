import{_ as t,C as e,c as h,o as a,a3 as s,b as p,w as l,a as d,G as r,a4 as k}from"./chunks/framework.CUcrqFol.js";const y=JSON.parse('{"title":"8.2.4 同事帮你看代码——代码审查：PR 模板与审查清单","description":"8.2.4 同事帮你看代码——代码审查 代码审查不是挑刺大会，而是团队知识共享和质量保障的核心环节。 代码审查的价值 | 价值 | 说明 | |------|------| | 发现 Bug | 两双眼睛比一双更容易发现问题 | | 知识传递 | 审查者学习作者的思路，反之亦然 | | 代码质量 | 维护团队一致的代码","frontmatter":{"title":"8.2.4 同事帮你看代码——代码审查：PR 模板与审查清单","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/08-workflow/8.2-branch-strategy/8.2.4-code-review.md","filePath":"Advanced-old/08-workflow/8.2-branch-strategy/8.2.4-code-review.md","lastUpdated":1766168364000}'),o={name:"Advanced-old/08-workflow/8.2-branch-strategy/8.2.4-code-review.md"};function E(c,i,g,u,b,F){const n=e("Mermaid");return a(),h("div",null,[i[1]||(i[1]=s(`<h1 id="_8-2-4-同事帮你看代码——代码审查" tabindex="-1">8.2.4 同事帮你看代码——代码审查 <a class="header-anchor" href="#_8-2-4-同事帮你看代码——代码审查" aria-label="Permalink to &quot;8.2.4 同事帮你看代码——代码审查&quot;">​</a></h1><p>代码审查不是挑刺大会，而是团队知识共享和质量保障的核心环节。</p><h2 id="代码审查的价值" tabindex="-1">代码审查的价值 <a class="header-anchor" href="#代码审查的价值" aria-label="Permalink to &quot;代码审查的价值&quot;">​</a></h2><table tabindex="0"><thead><tr><th>价值</th><th>说明</th></tr></thead><tbody><tr><td>发现 Bug</td><td>两双眼睛比一双更容易发现问题</td></tr><tr><td>知识传递</td><td>审查者学习作者的思路，反之亦然</td></tr><tr><td>代码质量</td><td>维护团队一致的代码风格和架构</td></tr><tr><td>减少风险</td><td>降低单点故障，多人了解代码</td></tr></tbody></table><h2 id="pr-模板配置" tabindex="-1">PR 模板配置 <a class="header-anchor" href="#pr-模板配置" aria-label="Permalink to &quot;PR 模板配置&quot;">​</a></h2><p>在仓库中创建 <code>.github/PULL_REQUEST_TEMPLATE.md</code>：</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 变更类型</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 新功能 (feat)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Bug 修复 (fix)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 代码重构 (refactor)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 样式调整 (style)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 文档更新 (docs)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 测试相关 (test)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 构建配置 (build)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 变更描述</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 简要描述你做了什么变更，为什么需要这个变更 --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 关联 Issue</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 如果有的话，填写关联的 Issue 编号 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Closes #</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 自测清单</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 代码符合项目规范</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 已添加必要的测试</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 本地测试全部通过</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 已更新相关文档</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 截图 / 录屏（如适用）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 如果是 UI 变更，请附上截图或录屏 --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 其他说明</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 任何需要审查者特别注意的地方 --&gt;</span></span></code></pre></div><h2 id="审查者清单" tabindex="-1">审查者清单 <a class="header-anchor" href="#审查者清单" aria-label="Permalink to &quot;审查者清单&quot;">​</a></h2><h3 id="功能正确性" tabindex="-1">功能正确性 <a class="header-anchor" href="#功能正确性" aria-label="Permalink to &quot;功能正确性&quot;">​</a></h3><ul><li>[ ] 代码逻辑是否正确实现了需求</li><li>[ ] 边界条件是否处理得当</li><li>[ ] 错误处理是否完善</li><li>[ ] 是否考虑了并发/竞态问题</li></ul><h3 id="代码质量" tabindex="-1">代码质量 <a class="header-anchor" href="#代码质量" aria-label="Permalink to &quot;代码质量&quot;">​</a></h3><ul><li>[ ] 代码是否清晰易读</li><li>[ ] 命名是否准确描述了意图</li><li>[ ] 函数/组件是否职责单一</li><li>[ ] 是否有重复代码可以抽取</li></ul><h3 id="安全性" tabindex="-1">安全性 <a class="header-anchor" href="#安全性" aria-label="Permalink to &quot;安全性&quot;">​</a></h3><ul><li>[ ] 是否有 SQL 注入风险</li><li>[ ] 用户输入是否经过验证</li><li>[ ] 敏感数据是否正确处理</li><li>[ ] 是否有硬编码的密钥</li></ul><h3 id="性能" tabindex="-1">性能 <a class="header-anchor" href="#性能" aria-label="Permalink to &quot;性能&quot;">​</a></h3><ul><li>[ ] 是否有明显的性能问题</li><li>[ ] 数据库查询是否高效</li><li>[ ] 是否有 N+1 查询问题</li><li>[ ] 前端是否避免了不必要的渲染</li></ul><h3 id="测试" tabindex="-1">测试 <a class="header-anchor" href="#测试" aria-label="Permalink to &quot;测试&quot;">​</a></h3><ul><li>[ ] 是否有足够的测试覆盖</li><li>[ ] 测试用例是否覆盖边界情况</li><li>[ ] 测试是否易于维护</li></ul><h2 id="审查评论规范" tabindex="-1">审查评论规范 <a class="header-anchor" href="#审查评论规范" aria-label="Permalink to &quot;审查评论规范&quot;">​</a></h2><h3 id="评论类型标记" tabindex="-1">评论类型标记 <a class="header-anchor" href="#评论类型标记" aria-label="Permalink to &quot;评论类型标记&quot;">​</a></h3><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">必须</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] 这里有内存泄漏，需要在 useEffect 的清理函数中取消订阅</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">建议</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] 可以考虑用 useMemo 优化这个计算</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">疑问</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] 为什么选择在这里处理而不是在服务层？</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">赞</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] 这个封装很优雅！</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">提示</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] FYI：这个库最新版本有 breaking change</span></span></code></pre></div><h3 id="评论最佳实践" tabindex="-1">评论最佳实践 <a class="header-anchor" href="#评论最佳实践" aria-label="Permalink to &quot;评论最佳实践&quot;">​</a></h3><p><strong>要做</strong>：</p><ul><li>解释问题的原因，而不仅仅指出问题</li><li>提供具体的改进建议</li><li>肯定代码中做得好的地方</li><li>区分必须修改和可选建议</li></ul><p><strong>避免</strong>：</p><ul><li>使用贬低性语言</li><li>仅说&quot;这样不对&quot;而不说原因</li><li>追求完美主义而阻塞合并</li><li>评论与代码无关的问题</li></ul><h2 id="高效审查流程" tabindex="-1">高效审查流程 <a class="header-anchor" href="#高效审查流程" aria-label="Permalink to &quot;高效审查流程&quot;">​</a></h2>`,27)),(a(),p(k,null,{default:l(()=>[r(n,{id:"mermaid-248",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%E6%94%B6%E5%88%B0%20PR%20%E9%80%9A%E7%9F%A5%5D%20--%3E%20B%5B%E5%BF%AB%E9%80%9F%E6%B5%8F%E8%A7%88%20PR%20%E6%8F%8F%E8%BF%B0%5D%0A%20%20%20%20B%20--%3E%20C%7B%E5%8F%98%E6%9B%B4%E8%8C%83%E5%9B%B4%E5%A4%A7%E5%90%97%3F%7D%0A%20%20%20%20C%20--%3E%7C%E5%B0%8F%7C%20D%5B%E7%9B%B4%E6%8E%A5%E5%AE%A1%E6%9F%A5%E4%BB%A3%E7%A0%81%5D%0A%20%20%20%20C%20--%3E%7C%E5%A4%A7%7C%20E%5B%E5%85%88%E4%BA%86%E8%A7%A3%E6%95%B4%E4%BD%93%E6%80%9D%E8%B7%AF%5D%0A%20%20%20%20E%20--%3E%20D%0A%20%20%20%20D%20--%3E%20F%7B%E9%9C%80%E8%A6%81%E4%BF%AE%E6%94%B9%3F%7D%0A%20%20%20%20F%20--%3E%7C%E6%98%AF%7C%20G%5B%E7%95%99%E4%B8%8B%E8%AF%84%E8%AE%BA%5D%0A%20%20%20%20G%20--%3E%20H%5B%E6%A0%87%E8%AE%B0%20Request%20Changes%5D%0A%20%20%20%20F%20--%3E%7C%E5%90%A6%7C%20I%5BApprove%5D%0A%20%20%20%20H%20--%3E%20J%5B%E7%AD%89%E5%BE%85%E4%BD%9C%E8%80%85%E4%BF%AE%E6%94%B9%5D%0A%20%20%20%20J%20--%3E%20D%0A"})]),fallback:l(()=>[...i[0]||(i[0]=[d(" Loading... ",-1)])]),_:1})),i[2]||(i[2]=s(`<h2 id="审查时间管理" tabindex="-1">审查时间管理 <a class="header-anchor" href="#审查时间管理" aria-label="Permalink to &quot;审查时间管理&quot;">​</a></h2><table tabindex="0"><thead><tr><th>原则</th><th>说明</th></tr></thead><tbody><tr><td>及时响应</td><td>24 小时内完成首次审查</td></tr><tr><td>分批审查</td><td>每天固定时间处理 PR，避免频繁打断</td></tr><tr><td>优先级</td><td>紧急修复 &gt; 阻塞他人 &gt; 普通功能</td></tr><tr><td>沟通</td><td>大型 PR 先沟通，避免来回修改</td></tr></tbody></table><h2 id="作者最佳实践" tabindex="-1">作者最佳实践 <a class="header-anchor" href="#作者最佳实践" aria-label="Permalink to &quot;作者最佳实践&quot;">​</a></h2><h3 id="创建-pr-前" tabindex="-1">创建 PR 前 <a class="header-anchor" href="#创建-pr-前" aria-label="Permalink to &quot;创建 PR 前&quot;">​</a></h3><ul><li>自己先 Review 一遍代码</li><li>确保 CI 检查通过</li><li>写清楚 PR 描述</li><li>控制 PR 大小（推荐 &lt; 400 行变更）</li></ul><h3 id="响应评论" tabindex="-1">响应评论 <a class="header-anchor" href="#响应评论" aria-label="Permalink to &quot;响应评论&quot;">​</a></h3><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;"># 同意并已修改</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">已修复，采用了你建议的 useMemo 方案</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;"># 解释原因</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">保留原方案，因为这里的计算复杂度很低，useMemo 反而会增加内存开销</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;"># 需要讨论</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">这个问题比较复杂，能否线下讨论一下？</span></span></code></pre></div><h2 id="ai-辅助代码审查" tabindex="-1">AI 辅助代码审查 <a class="header-anchor" href="#ai-辅助代码审查" aria-label="Permalink to &quot;AI 辅助代码审查&quot;">​</a></h2><p>可以让 AI 帮助进行初步审查：</p><p><strong>示例 Prompt</strong>：</p><blockquote><p>&quot;请审查以下代码变更，关注以下几点：</p><ol><li>是否有明显的 bug 或逻辑错误</li><li>是否有安全隐患</li><li>是否有性能问题</li><li>代码风格是否符合 React/TypeScript 最佳实践</li></ol><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 你的代码...</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\`\`&quot;</span></span></code></pre></div></blockquote><h2 id="验收清单" tabindex="-1">验收清单 <a class="header-anchor" href="#验收清单" aria-label="Permalink to &quot;验收清单&quot;">​</a></h2><ul><li>[ ] 了解代码审查的价值</li><li>[ ] 能配置 PR 模板</li><li>[ ] 掌握审查评论的规范</li><li>[ ] 理解作者和审查者各自的职责</li></ul>`,13))])}const B=t(o,[["render",E]]);export{y as __pageData,B as default};
