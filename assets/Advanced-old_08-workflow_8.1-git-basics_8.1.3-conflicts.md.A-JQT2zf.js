import{_ as e,C as p,c as h,o as n,j as a,b as k,a3 as r,a as i,w as t,G as d,a4 as o}from"./chunks/framework.CUcrqFol.js";const C=JSON.parse('{"title":"8.1.3 代码打架了怎么办——冲突解决：合并冲突的处理方法","description":"8.1.3 代码打架了怎么办——冲突解决 当两个人同时修改了同一个文件的同一部分，Git 无法自动判断该保留哪个版本，这就产生了冲突。 冲突是如何产生的 **冲突产生的条件**： 两个分支修改了**同一文件的同一区域** Git 无法自动决定保留哪个版本 **不会产生冲突的情况**： 修改不同文件 修改同一文件的不同区","frontmatter":{"title":"8.1.3 代码打架了怎么办——冲突解决：合并冲突的处理方法","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/08-workflow/8.1-git-basics/8.1.3-conflicts.md","filePath":"Advanced-old/08-workflow/8.1-git-basics/8.1.3-conflicts.md","lastUpdated":1766168364000}'),g={name:"Advanced-old/08-workflow/8.1-git-basics/8.1.3-conflicts.md"};function c(u,s,F,E,y,b){const l=p("Mermaid");return n(),h("div",null,[s[1]||(s[1]=a("h1",{id:"_8-1-3-代码打架了怎么办——冲突解决",tabindex:"-1"},[i("8.1.3 代码打架了怎么办——冲突解决 "),a("a",{class:"header-anchor",href:"#_8-1-3-代码打架了怎么办——冲突解决","aria-label":'Permalink to "8.1.3 代码打架了怎么办——冲突解决"'},"​")],-1)),s[2]||(s[2]=a("p",null,"当两个人同时修改了同一个文件的同一部分，Git 无法自动判断该保留哪个版本，这就产生了冲突。",-1)),s[3]||(s[3]=a("h2",{id:"冲突是如何产生的",tabindex:"-1"},[i("冲突是如何产生的 "),a("a",{class:"header-anchor",href:"#冲突是如何产生的","aria-label":'Permalink to "冲突是如何产生的"'},"​")],-1)),(n(),k(o,null,{default:t(()=>[d(l,{id:"mermaid-9",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5Bmain%3A%20%E5%88%9D%E5%A7%8B%E4%BB%A3%E7%A0%81%5D%20--%3E%20B%5B%E4%BD%A0%3A%20%E4%BF%AE%E6%94%B9%E4%BA%86%E7%AC%AC10%E8%A1%8C%5D%0A%20%20%20%20A%20--%3E%20C%5B%E5%90%8C%E4%BA%8B%3A%20%E4%B9%9F%E4%BF%AE%E6%94%B9%E4%BA%86%E7%AC%AC10%E8%A1%8C%5D%0A%20%20%20%20B%20--%3E%20D%5B%E5%90%88%E5%B9%B6%E6%97%B6%E4%BA%A7%E7%94%9F%E5%86%B2%E7%AA%81%5D%0A%20%20%20%20C%20--%3E%20D%0A"})]),fallback:t(()=>[...s[0]||(s[0]=[i(" Loading... ",-1)])]),_:1})),s[4]||(s[4]=r(`<p><strong>冲突产生的条件</strong>：</p><ul><li>两个分支修改了<strong>同一文件的同一区域</strong></li><li>Git 无法自动决定保留哪个版本</li></ul><p><strong>不会产生冲突的情况</strong>：</p><ul><li>修改不同文件</li><li>修改同一文件的不同区域</li><li>一方只是新增内容</li></ul><h2 id="冲突的表现形式" tabindex="-1">冲突的表现形式 <a class="header-anchor" href="#冲突的表现形式" aria-label="Permalink to &quot;冲突的表现形式&quot;">​</a></h2><p>当冲突发生时，Git 会在文件中插入冲突标记：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span></span>
<span class="line"><span>你的修改内容</span></span>
<span class="line"><span>=======</span></span>
<span class="line"><span>对方的修改内容</span></span>
<span class="line"><span>&gt;&gt;&gt;&gt;&gt;&gt;&gt; feat/other-branch</span></span></code></pre></div><table tabindex="0"><thead><tr><th>标记</th><th>含义</th></tr></thead><tbody><tr><td><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code></td><td>当前分支的内容开始</td></tr><tr><td><code>=======</code></td><td>分隔线</td></tr><tr><td><code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch</code></td><td>被合并分支的内容结束</td></tr></tbody></table><h2 id="解决冲突的步骤" tabindex="-1">解决冲突的步骤 <a class="header-anchor" href="#解决冲突的步骤" aria-label="Permalink to &quot;解决冲突的步骤&quot;">​</a></h2><h3 id="步骤1-识别冲突文件" tabindex="-1">步骤1：识别冲突文件 <a class="header-anchor" href="#步骤1-识别冲突文件" aria-label="Permalink to &quot;步骤1：识别冲突文件&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 合并时出现冲突</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> merge</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> feat/login</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Auto-merging src/auth.ts</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># CONFLICT (content): Merge conflict in src/auth.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看冲突状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Unmerged paths:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#   both modified: src/auth.ts</span></span></code></pre></div><h3 id="步骤2-打开文件查看冲突" tabindex="-1">步骤2：打开文件查看冲突 <a class="header-anchor" href="#步骤2-打开文件查看冲突" aria-label="Permalink to &quot;步骤2：打开文件查看冲突&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/auth.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> HEAD</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 你的版本：使用 JWT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ user });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=======</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 同事的版本：使用 Session</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ user });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> feat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auth</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="步骤3-手动解决冲突" tabindex="-1">步骤3：手动解决冲突 <a class="header-anchor" href="#步骤3-手动解决冲突" aria-label="Permalink to &quot;步骤3：手动解决冲突&quot;">​</a></h3><p>根据业务需求，选择保留哪个版本（或两者结合）：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 解决后的代码</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> login</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 最终决定：使用 JWT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwt.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ user });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>删除所有冲突标记</strong>（<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>、<code>=======</code>、<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>）后保存文件。</p><h3 id="步骤4-标记冲突已解决" tabindex="-1">步骤4：标记冲突已解决 <a class="header-anchor" href="#步骤4-标记冲突已解决" aria-label="Permalink to &quot;步骤4：标记冲突已解决&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 将解决后的文件加入暂存区</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/auth.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 完成合并</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;merge: 解决 auth 模块冲突，采用 JWT 方案&quot;</span></span></code></pre></div><h2 id="使用-ide-解决冲突" tabindex="-1">使用 IDE 解决冲突 <a class="header-anchor" href="#使用-ide-解决冲突" aria-label="Permalink to &quot;使用 IDE 解决冲突&quot;">​</a></h2><p>现代 IDE（如 VS Code、Cursor）提供可视化的冲突解决工具：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────────────┐</span></span>
<span class="line"><span>│  Accept Current Change  │  当前分支版本  │</span></span>
<span class="line"><span>│  Accept Incoming Change │  被合并分支版本│</span></span>
<span class="line"><span>│  Accept Both Changes    │  保留两者      │</span></span>
<span class="line"><span>│  Compare Changes        │  对比查看      │</span></span>
<span class="line"><span>└─────────────────────────────────────────┘</span></span></code></pre></div><p><strong>推荐做法</strong>：</p><ol><li>点击 &quot;Compare Changes&quot; 查看差异</li><li>理解两边的修改意图</li><li>选择合适的方案或手动编辑</li></ol><h2 id="预防冲突的最佳实践" tabindex="-1">预防冲突的最佳实践 <a class="header-anchor" href="#预防冲突的最佳实践" aria-label="Permalink to &quot;预防冲突的最佳实践&quot;">​</a></h2><ol><li><strong>频繁同步</strong>：经常 pull 远程更新，减少分支差异</li><li><strong>小步提交</strong>：每次提交改动范围小，冲突更容易解决</li><li><strong>分工明确</strong>：团队成员尽量避免同时修改同一文件</li><li><strong>及时沟通</strong>：修改公共模块前先知会队友</li></ol><h2 id="复杂冲突处理技巧" tabindex="-1">复杂冲突处理技巧 <a class="header-anchor" href="#复杂冲突处理技巧" aria-label="Permalink to &quot;复杂冲突处理技巧&quot;">​</a></h2><h3 id="放弃合并-回到合并前" tabindex="-1">放弃合并，回到合并前 <a class="header-anchor" href="#放弃合并-回到合并前" aria-label="Permalink to &quot;放弃合并，回到合并前&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> merge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --abort</span></span></code></pre></div><h3 id="使用某一方的版本" tabindex="-1">使用某一方的版本 <a class="header-anchor" href="#使用某一方的版本" aria-label="Permalink to &quot;使用某一方的版本&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用当前分支的版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ours</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/auth.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用被合并分支的版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --theirs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/auth.ts</span></span></code></pre></div><h3 id="查看冲突的详细信息" tabindex="-1">查看冲突的详细信息 <a class="header-anchor" href="#查看冲突的详细信息" aria-label="Permalink to &quot;查看冲突的详细信息&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看冲突的三方对比</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> diff</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/auth.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看公共祖先的内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :1:src/auth.ts</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 公共祖先</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :2:src/auth.ts</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 当前分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :3:src/auth.ts</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 被合并分支</span></span></code></pre></div><h2 id="ai-协作指南" tabindex="-1">AI 协作指南 <a class="header-anchor" href="#ai-协作指南" aria-label="Permalink to &quot;AI 协作指南&quot;">​</a></h2><p>遇到复杂冲突时，可以请 AI 帮忙分析：</p><p><strong>示例 Prompt</strong>：</p><blockquote><p>&quot;这是我遇到的 Git 冲突：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span></span>
<span class="line"><span>function validateUser(user) { return user.email &amp;&amp; user.password; }</span></span>
<span class="line"><span>=======</span></span>
<span class="line"><span>function validateUser(user) { return user.email?.trim() &amp;&amp; user.password?.length &gt; 6; }</span></span>
<span class="line"><span>&gt;&gt;&gt;&gt;&gt;&gt;&gt; feat/validation</span></span></code></pre></div><p>请帮我分析两个版本的差异，并建议如何合并？&quot;</p></blockquote><h2 id="验收清单" tabindex="-1">验收清单 <a class="header-anchor" href="#验收清单" aria-label="Permalink to &quot;验收清单&quot;">​</a></h2><ul><li>[ ] 理解冲突产生的原因</li><li>[ ] 能识别冲突标记并手动解决</li><li>[ ] 能使用 IDE 的可视化工具解决冲突</li><li>[ ] 知道如何放弃合并或选择某一方版本</li></ul>`,39))])}const B=e(g,[["render",c]]);export{C as __pageData,B as default};
