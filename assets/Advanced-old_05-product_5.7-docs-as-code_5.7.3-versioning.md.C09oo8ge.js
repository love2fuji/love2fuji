import{_ as p,C as h,c as t,o as i,a3 as a,b as e,w as n,a as k,G as d,a4 as r}from"./chunks/framework.CUcrqFol.js";const b=JSON.parse('{"title":"5.7.3 文档也需要后悔药——文档版本控制：Git 管理文档变更历史","description":"5.7.3 文档也需要后悔药——文档版本控制 一句话破题 用 Git 管理文档，可以**追溯历史、回退修改、对比变化**。 为什么要版本控制文档 文档版本控制基础 Commit 信息规范 文档相关的 commit 建议使用 前缀： 文档与代码版本对应 确保每个代码版本都有对应的文档： 实现方法： 文档分支策略 对于复杂","frontmatter":{"title":"5.7.3 文档也需要后悔药——文档版本控制：Git 管理文档变更历史","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/05-product/5.7-docs-as-code/5.7.3-versioning.md","filePath":"Advanced-old/05-product/5.7-docs-as-code/5.7.3-versioning.md","lastUpdated":1766168364000}'),o={name:"Advanced-old/05-product/5.7-docs-as-code/5.7.3-versioning.md"};function g(c,s,F,y,E,C){const l=h("Mermaid");return i(),t("div",null,[s[1]||(s[1]=a(`<h1 id="_5-7-3-文档也需要后悔药——文档版本控制" tabindex="-1">5.7.3 文档也需要后悔药——文档版本控制 <a class="header-anchor" href="#_5-7-3-文档也需要后悔药——文档版本控制" aria-label="Permalink to &quot;5.7.3 文档也需要后悔药——文档版本控制&quot;">​</a></h1><h3 id="一句话破题" tabindex="-1">一句话破题 <a class="header-anchor" href="#一句话破题" aria-label="Permalink to &quot;一句话破题&quot;">​</a></h3><p>用 Git 管理文档，可以<strong>追溯历史、回退修改、对比变化</strong>。</p><h3 id="为什么要版本控制文档" tabindex="-1">为什么要版本控制文档 <a class="header-anchor" href="#为什么要版本控制文档" aria-label="Permalink to &quot;为什么要版本控制文档&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>场景 1：文档写错了</span></span>
<span class="line"><span>  没有版本控制 → 改了就改了，不知道原来写的是什么</span></span>
<span class="line"><span>  有版本控制   → git diff 看看改了什么，git revert 回退</span></span>
<span class="line"><span></span></span>
<span class="line"><span>场景 2：查历史决策</span></span>
<span class="line"><span>  没有版本控制 → 不知道为什么这样设计</span></span>
<span class="line"><span>  有版本控制   → git log 看看当时的 commit 信息</span></span>
<span class="line"><span></span></span>
<span class="line"><span>场景 3：多版本文档</span></span>
<span class="line"><span>  没有版本控制 → v1-doc.md, v2-doc.md, v2-final-doc.md</span></span>
<span class="line"><span>  有版本控制   → git checkout v1.0 看那个版本的文档</span></span></code></pre></div><h3 id="文档版本控制基础" tabindex="-1">文档版本控制基础 <a class="header-anchor" href="#文档版本控制基础" aria-label="Permalink to &quot;文档版本控制基础&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看文档变更历史</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> log</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --oneline</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看某个文档的修改</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> log</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --oneline</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs/api.md</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看具体改了什么</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> diff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD~1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs/api.md</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 回退到上一个版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD~1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs/api.md</span></span></code></pre></div><h3 id="commit-信息规范" tabindex="-1">Commit 信息规范 <a class="header-anchor" href="#commit-信息规范" aria-label="Permalink to &quot;Commit 信息规范&quot;">​</a></h3><p>文档相关的 commit 建议使用 <code>docs:</code> 前缀：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 新增文档</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 添加</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 文档</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 更新文档</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 更新部署说明</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修复文档错误</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 修正</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 参数说明</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重构文档结构</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 重新组织文档目录</span></span></code></pre></div><h3 id="文档与代码版本对应" tabindex="-1">文档与代码版本对应 <a class="header-anchor" href="#文档与代码版本对应" aria-label="Permalink to &quot;文档与代码版本对应&quot;">​</a></h3><p>确保每个代码版本都有对应的文档：</p>`,12)),(i(),e(r,null,{default:n(()=>[d(l,{id:"mermaid-30",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20%22v1.0%22%0A%20%20%20%20%20%20%20%20A1%5B%22%E4%BB%A3%E7%A0%81%20v1.0%22%5D%0A%20%20%20%20%20%20%20%20B1%5B%22%E6%96%87%E6%A1%A3%20v1.0%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%22v1.1%22%0A%20%20%20%20%20%20%20%20A2%5B%22%E4%BB%A3%E7%A0%81%20v1.1%22%5D%0A%20%20%20%20%20%20%20%20B2%5B%22%E6%96%87%E6%A1%A3%20v1.1%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20A1%20--%3E%20A2%0A%20%20%20%20B1%20--%3E%20B2%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[k(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=a(`<p>实现方法：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 打版本标签时，确保文档也更新了</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tag</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Release v1.0.0&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看某个版本的文档</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs/</span></span></code></pre></div><h3 id="文档分支策略" tabindex="-1">文档分支策略 <a class="header-anchor" href="#文档分支策略" aria-label="Permalink to &quot;文档分支策略&quot;">​</a></h3><p>对于复杂项目，文档可以有分支：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>main 分支</span></span>
<span class="line"><span>├── 最新稳定版文档</span></span>
<span class="line"><span></span></span>
<span class="line"><span>develop 分支  </span></span>
<span class="line"><span>├── 开发中的文档更新</span></span>
<span class="line"><span></span></span>
<span class="line"><span>feature/xxx 分支</span></span>
<span class="line"><span>├── 新功能相关的文档草稿</span></span></code></pre></div><p>对于个人项目，通常只用 main 分支就够了。</p><h3 id="查看文档变更示例" tabindex="-1">查看文档变更示例 <a class="header-anchor" href="#查看文档变更示例" aria-label="Permalink to &quot;查看文档变更示例&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 看 api.md 最近 5 次修改</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> log</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --oneline</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs/api.md</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 输出示例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a1b2c3d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 添加搜索接口文档</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">e4f5g6h</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 更新认证接口参数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">i7j8k9l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> feat:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 实现用户注册（含文档）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">m0n1o2p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 初始化</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 文档</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">q3r4s5t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 创建文档目录结构</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看某次修改的内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a1b2c3d</span></span></code></pre></div><h3 id="文档版本发布" tabindex="-1">文档版本发布 <a class="header-anchor" href="#文档版本发布" aria-label="Permalink to &quot;文档版本发布&quot;">​</a></h3><p>发布新版本时，确保文档同步：</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 发布检查清单</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### 代码</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 所有功能开发完成</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 测试通过</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 版本号更新</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### 文档</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] API 文档与代码一致</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] CHANGELOG 更新</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] README 版本号更新</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 部署文档检查</span></span></code></pre></div><h3 id="changelog-维护" tabindex="-1">CHANGELOG 维护 <a class="header-anchor" href="#changelog-维护" aria-label="Permalink to &quot;CHANGELOG 维护&quot;">​</a></h3><p>记录每个版本的变更：</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;"># Changelog</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## [</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">1.1.0</span><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">] - 2024-01-20</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### Added</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 文章搜索功能</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 标签管理功能</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### Changed</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 优化文章列表加载速度</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### Fixed</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 修复登录超时问题</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## [</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">1.0.0</span><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">] - 2024-01-01</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### Added</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 初始版本</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 文章 CRUD</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 用户认证</span></span></code></pre></div><h3 id="实用建议" tabindex="-1">实用建议 <a class="header-anchor" href="#实用建议" aria-label="Permalink to &quot;实用建议&quot;">​</a></h3><ol><li><strong>文档和代码一起提交</strong>：保证版本对应</li><li><strong>commit 信息要清晰</strong>：方便以后查找</li><li><strong>重要版本打 tag</strong>：便于回溯</li><li><strong>定期清理过时文档</strong>：删除或归档</li></ol>`,16))])}const u=p(o,[["render",g]]);export{b as __pageData,u as default};
