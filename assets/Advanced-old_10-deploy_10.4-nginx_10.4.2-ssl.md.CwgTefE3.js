import{_ as r,C as d,c as o,o as n,j as i,b as e,a3 as h,a,w as t,G as p,a4 as k}from"./chunks/framework.CUcrqFol.js";const A=JSON.parse('{"title":"10.4.2 HTTPS 证书怎么配——SSL 终止：HTTPS 证书配置与自动续期","description":"10.4.2 HTTPS 证书怎么配——SSL 终止：HTTPS 证书配置与自动续期 2024 年了，没有 HTTPS 的网站会被浏览器标记为\\"不安全\\"。 SSL 终止原理 Nginx 负责 HTTPS 的加密/解密，后端服务只需处理 HTTP，简化架构。 证书获取方式 | 方式 | 费用 | 有效期 | 适用场景 |","frontmatter":{"title":"10.4.2 HTTPS 证书怎么配——SSL 终止：HTTPS 证书配置与自动续期","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/10-deploy/10.4-nginx/10.4.2-ssl.md","filePath":"Advanced-old/10-deploy/10.4-nginx/10.4.2-ssl.md","lastUpdated":1766168364000}'),c={name:"Advanced-old/10-deploy/10.4-nginx/10.4.2-ssl.md"};function E(g,s,y,F,b,m){const l=d("Mermaid");return n(),o("div",null,[s[2]||(s[2]=i("h1",{id:"_10-4-2-https-证书怎么配——ssl-终止-https-证书配置与自动续期",tabindex:"-1"},[a("10.4.2 HTTPS 证书怎么配——SSL 终止：HTTPS 证书配置与自动续期 "),i("a",{class:"header-anchor",href:"#_10-4-2-https-证书怎么配——ssl-终止-https-证书配置与自动续期","aria-label":'Permalink to "10.4.2 HTTPS 证书怎么配——SSL 终止：HTTPS 证书配置与自动续期"'},"​")],-1)),s[3]||(s[3]=i("p",null,'2024 年了，没有 HTTPS 的网站会被浏览器标记为"不安全"。',-1)),s[4]||(s[4]=i("h2",{id:"ssl-终止原理",tabindex:"-1"},[a("SSL 终止原理 "),i("a",{class:"header-anchor",href:"#ssl-终止原理","aria-label":'Permalink to "SSL 终止原理"'},"​")],-1)),(n(),e(k,null,{default:t(()=>[p(l,{id:"mermaid-9",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20A%5B%E7%94%A8%E6%88%B7%5D%20--%3E%7CHTTPS%20%E5%8A%A0%E5%AF%86%7C%20B%5BNginx%5D%0A%20%20%20%20B%20--%3E%7CHTTP%20%E6%98%8E%E6%96%87%7C%20C%5B%E5%90%8E%E7%AB%AF%E6%9C%8D%E5%8A%A1%5D%0A"})]),fallback:t(()=>[...s[0]||(s[0]=[a(" Loading... ",-1)])]),_:1})),s[5]||(s[5]=h(`<p>Nginx 负责 HTTPS 的加密/解密，后端服务只需处理 HTTP，简化架构。</p><h2 id="证书获取方式" tabindex="-1">证书获取方式 <a class="header-anchor" href="#证书获取方式" aria-label="Permalink to &quot;证书获取方式&quot;">​</a></h2><table tabindex="0"><thead><tr><th>方式</th><th>费用</th><th>有效期</th><th>适用场景</th></tr></thead><tbody><tr><td>Let&#39;s Encrypt</td><td>免费</td><td>90 天</td><td>个人/小型项目</td></tr><tr><td>阿里云免费证书</td><td>免费</td><td>1 年</td><td>单域名</td></tr><tr><td>付费证书</td><td>收费</td><td>1-2 年</td><td>企业/高安全需求</td></tr></tbody></table><h2 id="_1panel-一键申请" tabindex="-1">1Panel 一键申请 <a class="header-anchor" href="#_1panel-一键申请" aria-label="Permalink to &quot;1Panel 一键申请&quot;">​</a></h2><p>1Panel 支持一键申请 Let&#39;s Encrypt 免费证书：</p><ol><li>网站 → 选择站点 → HTTPS</li><li>选择&quot;申请证书&quot;</li><li>选择 Let&#39;s Encrypt</li><li>验证方式：DNS 验证 或 HTTP 验证</li><li>点击申请</li></ol><div class="tip custom-block"><p class="custom-block-title">验证方式选择</p><ul><li><strong>HTTP 验证</strong>：需要域名已解析到当前服务器</li><li><strong>DNS 验证</strong>：可申请泛域名证书（*.example.com）</li></ul></div><h2 id="手动配置-ssl" tabindex="-1">手动配置 SSL <a class="header-anchor" href="#手动配置-ssl" aria-label="Permalink to &quot;手动配置 SSL&quot;">​</a></h2><h3 id="基本-https-配置" tabindex="-1">基本 HTTPS 配置 <a class="header-anchor" href="#基本-https-配置" aria-label="Permalink to &quot;基本 HTTPS 配置&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example.com;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # HTTP 重定向到 HTTPS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 301</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> https://$server_name$request_uri;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">443</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ssl http2;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example.com;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 证书文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_certificate </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/etc/nginx/ssl/example.com.pem;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_certificate_key </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/etc/nginx/ssl/example.com.key;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # SSL 配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_protocols </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TLSv1.2 TLSv1.3;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_ciphers </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_prefer_server_ciphers </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 安全头</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    add_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Strict-Transport-Security </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;max-age=31536000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> always;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="配置说明" tabindex="-1">配置说明 <a class="header-anchor" href="#配置说明" aria-label="Permalink to &quot;配置说明&quot;">​</a></h3><table tabindex="0"><thead><tr><th>配置</th><th>作用</th></tr></thead><tbody><tr><td><code>listen 443 ssl http2</code></td><td>启用 HTTPS 和 HTTP/2</td></tr><tr><td><code>ssl_certificate</code></td><td>证书文件路径</td></tr><tr><td><code>ssl_certificate_key</code></td><td>私钥文件路径</td></tr><tr><td><code>ssl_protocols</code></td><td>支持的 TLS 版本</td></tr><tr><td><code>ssl_ciphers</code></td><td>加密套件</td></tr><tr><td><code>HSTS</code></td><td>强制浏览器使用 HTTPS</td></tr></tbody></table><h2 id="证书自动续期" tabindex="-1">证书自动续期 <a class="header-anchor" href="#证书自动续期" aria-label="Permalink to &quot;证书自动续期&quot;">​</a></h2><h3 id="let-s-encrypt-自动续期" tabindex="-1">Let&#39;s Encrypt 自动续期 <a class="header-anchor" href="#let-s-encrypt-自动续期" aria-label="Permalink to &quot;Let&#39;s Encrypt 自动续期&quot;">​</a></h3><p>1Panel 会自动处理 Let&#39;s Encrypt 证书的续期。手动配置时：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装 certbot</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> certbot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python3-certbot-nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 申请证书</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">certbot</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 测试自动续期</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">certbot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> renew</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dry-run</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加定时任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">crontab</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 每天凌晨 2 点检查续期</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> certbot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> renew</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --quiet</span></span></code></pre></div><h3 id="续期流程" tabindex="-1">续期流程 <a class="header-anchor" href="#续期流程" aria-label="Permalink to &quot;续期流程&quot;">​</a></h3>`,17)),(n(),e(k,null,{default:t(()=>[p(l,{id:"mermaid-210",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20A%5B%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E8%A7%A6%E5%8F%91%5D%20--%3E%20B%7B%E8%AF%81%E4%B9%A6%E5%BF%AB%E8%BF%87%E6%9C%9F%3F%7D%0A%20%20%20%20B%20--%3E%7C%E6%98%AF%7C%20C%5B%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F%5D%0A%20%20%20%20B%20--%3E%7C%E5%90%A6%7C%20D%5B%E8%B7%B3%E8%BF%87%5D%0A%20%20%20%20C%20--%3E%20E%5B%E9%87%8D%E8%BD%BD%20Nginx%5D%0A"})]),fallback:t(()=>[...s[1]||(s[1]=[a(" Loading... ",-1)])]),_:1})),s[6]||(s[6]=h(`<h2 id="多域名证书" tabindex="-1">多域名证书 <a class="header-anchor" href="#多域名证书" aria-label="Permalink to &quot;多域名证书&quot;">​</a></h2><h3 id="主域名-www" tabindex="-1">主域名 + www <a class="header-anchor" href="#主域名-www" aria-label="Permalink to &quot;主域名 + www&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">443</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ssl http2;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example.com www.example.com;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_certificate </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/etc/nginx/ssl/example.com.pem;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_certificate_key </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/etc/nginx/ssl/example.com.key;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="泛域名证书" tabindex="-1">泛域名证书 <a class="header-anchor" href="#泛域名证书" aria-label="Permalink to &quot;泛域名证书&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">443</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ssl http2;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">*.example.com;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_certificate </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/etc/nginx/ssl/wildcard.example.com.pem;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_certificate_key </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/etc/nginx/ssl/wildcard.example.com.key;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">泛域名证书</p><p>泛域名证书（*.example.com）只能匹配一级子域名，不能匹配 <code>a.b.example.com</code>。</p></div><h2 id="ssl-优化" tabindex="-1">SSL 优化 <a class="header-anchor" href="#ssl-优化" aria-label="Permalink to &quot;SSL 优化&quot;">​</a></h2><h3 id="启用-ocsp-stapling" tabindex="-1">启用 OCSP Stapling <a class="header-anchor" href="#启用-ocsp-stapling" aria-label="Permalink to &quot;启用 OCSP Stapling&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ssl_stapling </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ssl_stapling_verify </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ssl_trusted_certificate </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/etc/nginx/ssl/chain.pem;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">resolver </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8.8.8.8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8.8.4.4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> valid=300s;</span></span></code></pre></div><h3 id="启用-session-缓存" tabindex="-1">启用 Session 缓存 <a class="header-anchor" href="#启用-session-缓存" aria-label="Permalink to &quot;启用 Session 缓存&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ssl_session_cache </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shared:SSL:10m;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ssl_session_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ssl_session_tickets </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">off</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="安全检测" tabindex="-1">安全检测 <a class="header-anchor" href="#安全检测" aria-label="Permalink to &quot;安全检测&quot;">​</a></h2><p>配置完成后，使用在线工具检测 SSL 配置：</p><ul><li><a href="https://www.ssllabs.com/ssltest/" target="_blank" rel="noreferrer">SSL Labs</a> - 评分 A+ 为最佳</li><li><a href="https://securityheaders.com/" target="_blank" rel="noreferrer">Security Headers</a> - 检测安全头</li></ul><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><table tabindex="0"><thead><tr><th>问题</th><th>原因</th><th>解决方案</th></tr></thead><tbody><tr><td>证书不受信任</td><td>证书链不完整</td><td>使用包含中间证书的 fullchain.pem</td></tr><tr><td>混合内容警告</td><td>页面包含 HTTP 资源</td><td>将所有资源改为 HTTPS</td></tr><tr><td>证书过期</td><td>续期失败</td><td>检查 certbot 日志</td></tr><tr><td>ERR_SSL_PROTOCOL_ERROR</td><td>配置错误</td><td>检查 ssl_protocols 和 ssl_ciphers</td></tr></tbody></table><h2 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h2><ol><li><strong>使用 HTTP/2</strong>：<code>listen 443 ssl http2</code></li><li><strong>禁用旧协议</strong>：只允许 TLS 1.2 和 1.3</li><li><strong>启用 HSTS</strong>：强制浏览器使用 HTTPS</li><li><strong>定期检查</strong>：监控证书过期时间</li><li><strong>证书备份</strong>：备份私钥和证书文件</li></ol>`,18))])}const C=r(c,[["render",E]]);export{A as __pageData,C as default};
