import{_ as l,C as e,c as p,o as i,a3 as a,b as h,w as t,a as d,G as k,a4 as r}from"./chunks/framework.CUcrqFol.js";const b=JSON.parse('{"title":"4.1.1 你的数据有哪些主角——实体识别：业务对象抽象与属性定义","description":"4.1.1 你的数据有哪些主角——实体识别：业务对象抽象与属性定义 一句话破题 实体就是业务中需要\\"记住\\"的核心对象——找对了实体，数据库设计就成功了一半。 什么是实体？ **实体**是业务领域中具有独立存在意义的事物。它可以是： **具体的人或物**：用户、商品、订单 **抽象的概念**：角色、权限、分类 **发生的","frontmatter":{"title":"4.1.1 你的数据有哪些主角——实体识别：业务对象抽象与属性定义","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/04-database/4.1-data-modeling/4.1.1-entities.md","filePath":"Advanced-old/04-database/4.1-data-modeling/4.1.1-entities.md","lastUpdated":1766168364000}'),o={name:"Advanced-old/04-database/4.1-data-modeling/4.1.1-entities.md"};function c(E,s,g,y,u,A){const n=e("Mermaid");return i(),p("div",null,[s[1]||(s[1]=a('<h1 id="_4-1-1-你的数据有哪些主角——实体识别-业务对象抽象与属性定义" tabindex="-1">4.1.1 你的数据有哪些主角——实体识别：业务对象抽象与属性定义 <a class="header-anchor" href="#_4-1-1-你的数据有哪些主角——实体识别-业务对象抽象与属性定义" aria-label="Permalink to &quot;4.1.1 你的数据有哪些主角——实体识别：业务对象抽象与属性定义&quot;">​</a></h1><h3 id="一句话破题" tabindex="-1">一句话破题 <a class="header-anchor" href="#一句话破题" aria-label="Permalink to &quot;一句话破题&quot;">​</a></h3><p>实体就是业务中需要&quot;记住&quot;的核心对象——找对了实体，数据库设计就成功了一半。</p><h3 id="什么是实体" tabindex="-1">什么是实体？ <a class="header-anchor" href="#什么是实体" aria-label="Permalink to &quot;什么是实体？&quot;">​</a></h3><p><strong>实体</strong>是业务领域中具有独立存在意义的事物。它可以是：</p><ul><li><strong>具体的人或物</strong>：用户、商品、订单</li><li><strong>抽象的概念</strong>：角色、权限、分类</li><li><strong>发生的事件</strong>：交易记录、操作日志</li></ul><h3 id="如何从需求中识别实体" tabindex="-1">如何从需求中识别实体？ <a class="header-anchor" href="#如何从需求中识别实体" aria-label="Permalink to &quot;如何从需求中识别实体？&quot;">​</a></h3><p><strong>方法一：名词提取法</strong></p><p>从需求描述中提取核心名词：</p><blockquote><p>&quot;用户可以发布文章，其他用户可以对文章进行评论和点赞&quot;</p></blockquote><p>提取的名词：<code>用户</code>、<code>文章</code>、<code>评论</code>、<code>点赞</code></p><p><strong>方法二：问答验证法</strong></p><p>对每个候选实体问三个问题：</p><ol><li>它是否需要被独立存储？</li><li>它是否有自己的属性？</li><li>它是否会被其他实体引用？</li></ol><table tabindex="0"><thead><tr><th>候选</th><th>独立存储</th><th>有属性</th><th>被引用</th><th>结论</th></tr></thead><tbody><tr><td>用户</td><td>✓</td><td>✓</td><td>✓</td><td>实体</td></tr><tr><td>文章</td><td>✓</td><td>✓</td><td>✓</td><td>实体</td></tr><tr><td>评论</td><td>✓</td><td>✓</td><td>✓</td><td>实体</td></tr><tr><td>点赞</td><td>✓</td><td>✓</td><td>✗</td><td>实体或关系表</td></tr></tbody></table><h3 id="实体的属性设计" tabindex="-1">实体的属性设计 <a class="header-anchor" href="#实体的属性设计" aria-label="Permalink to &quot;实体的属性设计&quot;">​</a></h3><p>每个实体都有若干属性，属性设计需要考虑：</p>',17)),(i(),h(r,null,{default:t(()=>[k(n,{id:"mermaid-169",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5B%22%E5%B1%9E%E6%80%A7%E8%AE%BE%E8%AE%A1%22%5D%20--%3E%20B%5B%22%E6%A0%87%E8%AF%86%E5%B1%9E%E6%80%A7%22%5D%0A%20%20%20%20A%20--%3E%20C%5B%22%E4%B8%9A%E5%8A%A1%E5%B1%9E%E6%80%A7%22%5D%0A%20%20%20%20A%20--%3E%20D%5B%22%E5%AE%A1%E8%AE%A1%E5%B1%9E%E6%80%A7%22%5D%0A%20%20%20%20%0A%20%20%20%20B%20--%3E%20B1%5B%22id%3A%20%E4%B8%BB%E9%94%AE%22%5D%0A%20%20%20%20C%20--%3E%20C1%5B%22name%2C%20email...%22%5D%0A%20%20%20%20D%20--%3E%20D1%5B%22createdAt%2C%20updatedAt%22%5D%0A"})]),fallback:t(()=>[...s[0]||(s[0]=[d(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=a(`<p><strong>标识属性</strong>：唯一标识一条记录</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 推荐使用 CUID 或 UUID</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: string  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// cuid() 或 uuid()</span></span></code></pre></div><p><strong>业务属性</strong>：描述实体的核心特征</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 用户实体的业务属性</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: string     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 必填，唯一</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: string      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 必填</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">avatar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 可选</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 可选</span></span></code></pre></div><p><strong>审计属性</strong>：记录数据变更历史</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createdAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: DateTime  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建时间</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updatedAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: DateTime  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 更新时间</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deletedAt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DateTime </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 软删除时间（可选）</span></span></code></pre></div><h3 id="prisma-中的实体定义" tabindex="-1">Prisma 中的实体定义 <a class="header-anchor" href="#prisma-中的实体定义" aria-label="Permalink to &quot;Prisma 中的实体定义&quot;">​</a></h3><div class="language-prisma vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">prisma</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 标识属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id        </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 业务属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  email     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   @unique</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  avatar    </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  bio       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 审计属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  createdAt </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  updatedAt </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @updatedAt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 关系（下一节详细介绍）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  posts     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Post</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  comments  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Comment</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="常见实体设计模式" tabindex="-1">常见实体设计模式 <a class="header-anchor" href="#常见实体设计模式" aria-label="Permalink to &quot;常见实体设计模式&quot;">​</a></h3><p><strong>用户相关</strong>：</p><ul><li><code>User</code>：用户基本信息</li><li><code>Profile</code>：用户详细资料（一对一）</li><li><code>Account</code>：第三方登录账号（一对多）</li></ul><p><strong>内容相关</strong>：</p><ul><li><code>Post</code>：文章/帖子</li><li><code>Comment</code>：评论</li><li><code>Tag</code>：标签</li><li><code>Category</code>：分类</li></ul><p><strong>交易相关</strong>：</p><ul><li><code>Order</code>：订单</li><li><code>OrderItem</code>：订单项</li><li><code>Payment</code>：支付记录</li></ul><h3 id="避坑指南" tabindex="-1">避坑指南 <a class="header-anchor" href="#避坑指南" aria-label="Permalink to &quot;避坑指南&quot;">​</a></h3><ol><li><p><strong>不要把所有东西都做成实体</strong>：如果一个&quot;东西&quot;只是另一个实体的属性（如用户的地址），可以考虑嵌入到父实体中</p></li><li><p><strong>不要过度设计</strong>：先满足当前需求，后续可以通过迁移来扩展</p></li><li><p><strong>命名要一致</strong>：选择单数（<code>User</code>）或复数（<code>Users</code>）后保持统一，推荐单数</p></li></ol><h3 id="ai-协作指南" tabindex="-1">AI 协作指南 <a class="header-anchor" href="#ai-协作指南" aria-label="Permalink to &quot;AI 协作指南&quot;">​</a></h3><p>让 AI 帮你识别实体时，可以这样提问：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>我要做一个 [业务类型] 应用，主要功能包括：</span></span>
<span class="line"><span>1. [功能1]</span></span>
<span class="line"><span>2. [功能2]</span></span>
<span class="line"><span>3. [功能3]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请帮我识别需要哪些核心实体，并列出每个实体的主要属性。</span></span></code></pre></div><h3 id="本节小结" tabindex="-1">本节小结 <a class="header-anchor" href="#本节小结" aria-label="Permalink to &quot;本节小结&quot;">​</a></h3><ul><li>实体是业务中需要独立存储的核心对象</li><li>通过&quot;名词提取 + 问答验证&quot;识别实体</li><li>每个实体都应有标识、业务、审计三类属性</li><li>使用 Prisma model 定义实体</li></ul>`,22))])}const C=l(o,[["render",c]]);export{b as __pageData,C as default};
