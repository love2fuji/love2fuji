import{_ as l,C as h,c as e,o as i,a3 as a,b as p,w as n,a as k,G as r,a4 as d}from"./chunks/framework.CUcrqFol.js";const b=JSON.parse('{"title":"1.2.4 AI 写的代码靠谱吗——代码审查：人机协作的质量保证","description":"1.2.4 AI 写的代码靠谱吗——代码审查：人机协作的质量保证 一句话破题 AI 写的代码不能直接用——它需要人类审查。代码审查不是不信任 AI，而是人机协作的必要环节。 为什么必须审查 AI 的代码？ AI 模型有以下固有局限： **知识截止日期**：AI 的训练数据有时间限制，可能不了解最新的 API 或最佳实践","frontmatter":{"title":"1.2.4 AI 写的代码靠谱吗——代码审查：人机协作的质量保证","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/01-concept/1.2-vibe-coding-mindset/1.2.4-code-review.md","filePath":"Advanced-old/01-concept/1.2-vibe-coding-mindset/1.2.4-code-review.md","lastUpdated":1766168364000}'),o={name:"Advanced-old/01-concept/1.2-vibe-coding-mindset/1.2.4-code-review.md"};function E(g,s,c,A,y,u){const t=h("Mermaid");return i(),e("div",null,[s[1]||(s[1]=a('<h1 id="_1-2-4-ai-写的代码靠谱吗——代码审查-人机协作的质量保证" tabindex="-1">1.2.4 AI 写的代码靠谱吗——代码审查：人机协作的质量保证 <a class="header-anchor" href="#_1-2-4-ai-写的代码靠谱吗——代码审查-人机协作的质量保证" aria-label="Permalink to &quot;1.2.4 AI 写的代码靠谱吗——代码审查：人机协作的质量保证&quot;">​</a></h1><h3 id="一句话破题" tabindex="-1">一句话破题 <a class="header-anchor" href="#一句话破题" aria-label="Permalink to &quot;一句话破题&quot;">​</a></h3><p>AI 写的代码不能直接用——它需要人类审查。代码审查不是不信任 AI，而是人机协作的必要环节。</p><h3 id="为什么必须审查-ai-的代码" tabindex="-1">为什么必须审查 AI 的代码？ <a class="header-anchor" href="#为什么必须审查-ai-的代码" aria-label="Permalink to &quot;为什么必须审查 AI 的代码？&quot;">​</a></h3><p>AI 模型有以下固有局限：</p><ol><li><strong>知识截止日期</strong>：AI 的训练数据有时间限制，可能不了解最新的 API 或最佳实践</li><li><strong>缺乏项目上下文</strong>：AI 不了解你项目的具体约定、历史决策和业务逻辑</li><li><strong>幻觉问题</strong>：AI 有时会&quot;发明&quot;不存在的函数、库或 API</li><li><strong>安全盲区</strong>：AI 可能忽略安全问题，如敏感信息暴露、注入攻击等</li></ol><h3 id="代码审查检查清单" tabindex="-1">代码审查检查清单 <a class="header-anchor" href="#代码审查检查清单" aria-label="Permalink to &quot;代码审查检查清单&quot;">​</a></h3>',7)),(i(),p(d,null,{default:n(()=>[r(t,{id:"mermaid-40",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5B%22AI%20%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%22%5D%20--%3E%20B%5B%22%E5%8A%9F%E8%83%BD%E6%AD%A3%E7%A1%AE%E6%80%A7%22%5D%0A%20%20%20%20B%20--%3E%20C%5B%22%E5%AE%89%E5%85%A8%E6%80%A7%E6%A3%80%E6%9F%A5%22%5D%0A%20%20%20%20C%20--%3E%20D%5B%22%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%22%5D%0A%20%20%20%20D%20--%3E%20E%5B%22%E6%80%A7%E8%83%BD%E8%80%83%E9%87%8F%22%5D%0A%20%20%20%20E%20--%3E%20F%5B%22%E8%BE%B9%E7%95%8C%E6%83%85%E5%86%B5%22%5D%0A%20%20%20%20F%20--%3E%20G%5B%22%E9%80%9A%E8%BF%87%2F%E4%BF%AE%E6%94%B9%22%5D%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[k(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=a(`<h4 id="_1-功能正确性" tabindex="-1">1. 功能正确性 <a class="header-anchor" href="#_1-功能正确性" aria-label="Permalink to &quot;1. 功能正确性&quot;">​</a></h4><ul><li>[ ] 代码是否实现了预期功能？</li><li>[ ] 逻辑流程是否正确？</li><li>[ ] 返回值和类型是否正确？</li></ul><h4 id="_2-安全性检查" tabindex="-1">2. 安全性检查 <a class="header-anchor" href="#_2-安全性检查" aria-label="Permalink to &quot;2. 安全性检查&quot;">​</a></h4><ul><li>[ ] 是否暴露了敏感信息（API Key、密码）？</li><li>[ ] 是否有 SQL 注入风险？</li><li>[ ] 是否有 XSS 风险？</li><li>[ ] 用户输入是否经过验证？</li></ul><h4 id="_3-代码规范" tabindex="-1">3. 代码规范 <a class="header-anchor" href="#_3-代码规范" aria-label="Permalink to &quot;3. 代码规范&quot;">​</a></h4><ul><li>[ ] 命名是否符合项目约定？</li><li>[ ] 代码风格是否一致？</li><li>[ ] 是否有适当的注释？</li></ul><h4 id="_4-性能考量" tabindex="-1">4. 性能考量 <a class="header-anchor" href="#_4-性能考量" aria-label="Permalink to &quot;4. 性能考量&quot;">​</a></h4><ul><li>[ ] 是否有不必要的重复计算？</li><li>[ ] 是否有 N+1 查询问题？</li><li>[ ] 是否有内存泄漏风险？</li></ul><h4 id="_5-边界情况" tabindex="-1">5. 边界情况 <a class="header-anchor" href="#_5-边界情况" aria-label="Permalink to &quot;5. 边界情况&quot;">​</a></h4><ul><li>[ ] 空值/空数组如何处理？</li><li>[ ] 超大数据量如何处理？</li><li>[ ] 网络错误如何处理？</li></ul><h3 id="ai-常见的-胡说八道" tabindex="-1">AI 常见的&quot;胡说八道&quot; <a class="header-anchor" href="#ai-常见的-胡说八道" aria-label="Permalink to &quot;AI 常见的&quot;胡说八道&quot;&quot;">​</a></h3><h4 id="问题-1-编造不存在的-api" tabindex="-1">问题 1：编造不存在的 API <a class="header-anchor" href="#问题-1-编造不存在的-api" aria-label="Permalink to &quot;问题 1：编造不存在的 API&quot;">​</a></h4><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// AI 可能会写出这样的代码</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useServerAction } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;next/server&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ❌ 这个 API 不存在！</span></span></code></pre></div><p><strong>解决方法</strong>：遇到不熟悉的 API，先去官方文档确认是否存在。</p><h4 id="问题-2-使用过时的语法" tabindex="-1">问题 2：使用过时的语法 <a class="header-anchor" href="#问题-2-使用过时的语法" aria-label="Permalink to &quot;问题 2：使用过时的语法&quot;">​</a></h4><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// AI 可能使用旧版 Next.js 的写法</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getServerSideProps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ❌ App Router 不再使用这个</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>解决方法</strong>：明确告诉 AI 你使用的版本，如&quot;我用的是 Next.js 16 App Router&quot;。</p><h4 id="问题-3-忽略错误处理" tabindex="-1">问题 3：忽略错误处理 <a class="header-anchor" href="#问题-3-忽略错误处理" aria-label="Permalink to &quot;问题 3：忽略错误处理&quot;">​</a></h4><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// AI 可能忽略错误处理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/api/users/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ❌ 没有处理请求失败的情况</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>正确做法</strong>：</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/api/users/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response.ok) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Failed to fetch user: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="审查的最佳实践" tabindex="-1">审查的最佳实践 <a class="header-anchor" href="#审查的最佳实践" aria-label="Permalink to &quot;审查的最佳实践&quot;">​</a></h3><h4 id="_1-先运行-再审查" tabindex="-1">1. 先运行，再审查 <a class="header-anchor" href="#_1-先运行-再审查" aria-label="Permalink to &quot;1. 先运行，再审查&quot;">​</a></h4><p>不要只看代码，先跑起来看效果。很多问题只有在运行时才会暴露。</p><h4 id="_2-质疑每一个依赖" tabindex="-1">2. 质疑每一个依赖 <a class="header-anchor" href="#_2-质疑每一个依赖" aria-label="Permalink to &quot;2. 质疑每一个依赖&quot;">​</a></h4><p>AI 引入的新依赖，先确认：</p><ul><li>这个库真的存在吗？</li><li>有必要引入吗？</li><li>有没有安全问题？</li></ul><h4 id="_3-关注关键路径" tabindex="-1">3. 关注关键路径 <a class="header-anchor" href="#_3-关注关键路径" aria-label="Permalink to &quot;3. 关注关键路径&quot;">​</a></h4><p>不需要逐行审查所有代码，但核心逻辑（认证、支付、数据处理）必须仔细检查。</p><h4 id="_4-利用-ai-进行交叉审查" tabindex="-1">4. 利用 AI 进行交叉审查 <a class="header-anchor" href="#_4-利用-ai-进行交叉审查" aria-label="Permalink to &quot;4. 利用 AI 进行交叉审查&quot;">​</a></h4><p>你可以让 AI 审查它自己生成的代码：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>请审查以下代码，找出潜在的问题：</span></span>
<span class="line"><span>- 安全漏洞</span></span>
<span class="line"><span>- 性能问题</span></span>
<span class="line"><span>- 逻辑错误</span></span>
<span class="line"><span>- 边界情况未处理</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[粘贴代码]</span></span></code></pre></div><h3 id="建立审查习惯" tabindex="-1">建立审查习惯 <a class="header-anchor" href="#建立审查习惯" aria-label="Permalink to &quot;建立审查习惯&quot;">​</a></h3><table tabindex="0"><thead><tr><th>阶段</th><th>审查重点</th></tr></thead><tbody><tr><td><strong>生成后立即</strong></td><td>快速浏览，检查明显错误</td></tr><tr><td><strong>运行测试后</strong></td><td>验证功能正确性</td></tr><tr><td><strong>提交前</strong></td><td>完整的代码审查清单</td></tr><tr><td><strong>合并前</strong></td><td>团队 Code Review</td></tr></tbody></table><h3 id="验收清单模板" tabindex="-1">验收清单模板 <a class="header-anchor" href="#验收清单模板" aria-label="Permalink to &quot;验收清单模板&quot;">​</a></h3><p>在每次让 AI 生成代码后，使用这个清单：</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 代码审查清单</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### 基础检查</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 代码能正常运行</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 实现了预期功能</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 没有 TypeScript 类型错误</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### 安全检查</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 无敏感信息暴露</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 用户输入有验证</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] API 调用有权限控制</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### 质量检查</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 命名清晰合理</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 有必要的错误处理</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] 边界情况已覆盖</span></span></code></pre></div>`,37))])}const B=l(o,[["render",E]]);export{b as __pageData,B as default};
