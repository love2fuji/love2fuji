import{_ as a,c as n,o as i,a3 as e}from"./chunks/framework.CUcrqFol.js";const k=JSON.parse('{"title":"4.5.3 真实案例复盘","description":"4.5.3 真实案例复盘 本节展示 6 个待办清单开发中的典型错误，包括完整的报错信息、诊断过程和修复对话。 案例速查 | 案例 | 错误类型 | 错误信息关键词 | |------|---------|---------------| | 案例 1 | TypeError | | | 案例 2 | Reference","frontmatter":{"title":"4.5.3 真实案例复盘","order":4},"headers":[],"relativePath":"Basic/04-practice-0-to-1/4.5-debug/4.5.3-real-cases.md","filePath":"Basic/04-practice-0-to-1/4.5-debug/4.5.3-real-cases.md","lastUpdated":1765094268000}'),p={name:"Basic/04-practice-0-to-1/4.5-debug/4.5.3-real-cases.md"};function l(t,s,h,d,o,r){return i(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="_4-5-3-真实案例复盘" tabindex="-1">4.5.3 真实案例复盘 <a class="header-anchor" href="#_4-5-3-真实案例复盘" aria-label="Permalink to &quot;4.5.3 真实案例复盘&quot;">​</a></h1><p>本节展示 6 个待办清单开发中的典型错误，包括完整的报错信息、诊断过程和修复对话。</p><h2 id="案例速查" tabindex="-1">案例速查 <a class="header-anchor" href="#案例速查" aria-label="Permalink to &quot;案例速查&quot;">​</a></h2><table tabindex="0"><thead><tr><th>案例</th><th>错误类型</th><th>错误信息关键词</th></tr></thead><tbody><tr><td><a href="#案例-1-任务列表是-undefined">案例 1</a></td><td>TypeError</td><td><code>Cannot read properties of undefined</code></td></tr><tr><td><a href="#案例-2-函数未定义">案例 2</a></td><td>ReferenceError</td><td><code>is not defined</code></td></tr><tr><td><a href="#案例-3-localstorage-解析失败">案例 3</a></td><td>SyntaxError</td><td><code>Unexpected token</code></td></tr><tr><td><a href="#案例-4-点击按钮没反应">案例 4</a></td><td>逻辑错误</td><td>无报错</td></tr><tr><td><a href="#案例-5-样式突然消失">案例 5</a></td><td>CSS 错误</td><td>无报错</td></tr><tr><td><a href="#案例-6-完成状态无法保存">案例 6</a></td><td>逻辑错误</td><td>无报错</td></tr></tbody></table><h2 id="案例-1-任务列表是-undefined" tabindex="-1">案例 1：任务列表是 undefined <a class="header-anchor" href="#案例-1-任务列表是-undefined" aria-label="Permalink to &quot;案例 1：任务列表是 undefined&quot;">​</a></h2><h3 id="错误现象" tabindex="-1">错误现象 <a class="header-anchor" href="#错误现象" aria-label="Permalink to &quot;错误现象&quot;">​</a></h3><p>点击添加按钮后，任务没有出现。控制台显示红色报错。</p><h3 id="控制台报错" tabindex="-1">控制台报错 <a class="header-anchor" href="#控制台报错" aria-label="Permalink to &quot;控制台报错&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Uncaught TypeError: Cannot read properties of undefined (reading &#39;push&#39;)</span></span>
<span class="line"><span>    at addTask (index.html:45:15)</span></span>
<span class="line"><span>    at HTMLButtonElement.&lt;anonymous&gt; (index.html:52:5)</span></span></code></pre></div><h3 id="问题定位" tabindex="-1">问题定位 <a class="header-anchor" href="#问题定位" aria-label="Permalink to &quot;问题定位&quot;">​</a></h3><p>这个错误的意思是：代码试图对 <code>undefined</code> 调用 <code>push</code> 方法。<code>push</code> 是数组的方法，说明代码期望这是一个数组，但实际上是 <code>undefined</code>。</p><p>查看第 45 行代码：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ text: taskText, completed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><p>问题出在 <code>tasks</code> 变量上——它没有被正确初始化。</p><h3 id="诊断对话" tabindex="-1">诊断对话 <a class="header-anchor" href="#诊断对话" aria-label="Permalink to &quot;诊断对话&quot;">​</a></h3><p><strong>你发送的 Prompt</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>我的待办清单代码报错了：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>【现象】点击添加按钮后，任务没有出现</span></span>
<span class="line"><span>【报错】Uncaught TypeError: Cannot read properties of undefined (reading &#39;push&#39;)</span></span>
<span class="line"><span>    at addTask (index.html:45:15)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>【代码】</span></span>
<span class="line"><span>function addTask() {</span></span>
<span class="line"><span>    const input = document.querySelector(&#39;.task-input&#39;);</span></span>
<span class="line"><span>    const taskText = input.value.trim();</span></span>
<span class="line"><span>    if (taskText) {</span></span>
<span class="line"><span>        tasks.push({ text: taskText, completed: false });</span></span>
<span class="line"><span>        renderTasks();</span></span>
<span class="line"><span>        input.value = &#39;&#39;;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请帮我分析原因。</span></span></code></pre></div><p><strong>AI 的分析</strong>：</p><blockquote><p>这个错误表示 <code>tasks</code> 变量在调用 <code>push</code> 时是 <code>undefined</code>。问题原因是 <code>tasks</code> 没有在使用前初始化为数组。你需要在代码开头声明 <code>let tasks = [];</code>。</p></blockquote><h3 id="修复对话" tabindex="-1">修复对话 <a class="header-anchor" href="#修复对话" aria-label="Permalink to &quot;修复对话&quot;">​</a></h3><p><strong>你发送的 Prompt</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>请帮我修复。需要：</span></span>
<span class="line"><span>1. 在代码开头初始化 tasks 变量</span></span>
<span class="line"><span>2. 给我修复后的完整代码</span></span></code></pre></div><p><strong>AI 给出的修复代码</strong>（关键部分）：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在代码开头添加这一行</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tasks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 初始化任务数组</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.task-input&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> taskText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> input.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (taskText) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tasks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ text: taskText, completed: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        renderTasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        input.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="验证方法" tabindex="-1">验证方法 <a class="header-anchor" href="#验证方法" aria-label="Permalink to &quot;验证方法&quot;">​</a></h3><ol><li>替换代码后刷新页面</li><li>在输入框输入任务，点击添加</li><li>确认任务出现在列表中</li><li>确认控制台没有红色报错</li></ol><h2 id="案例-2-函数未定义" tabindex="-1">案例 2：函数未定义 <a class="header-anchor" href="#案例-2-函数未定义" aria-label="Permalink to &quot;案例 2：函数未定义&quot;">​</a></h2><h3 id="错误现象-1" tabindex="-1">错误现象 <a class="header-anchor" href="#错误现象-1" aria-label="Permalink to &quot;错误现象&quot;">​</a></h3><p>页面加载后，控制台立即显示报错。</p><h3 id="控制台报错-1" tabindex="-1">控制台报错 <a class="header-anchor" href="#控制台报错-1" aria-label="Permalink to &quot;控制台报错&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Uncaught ReferenceError: addTask is not defined</span></span>
<span class="line"><span>    at HTMLButtonElement.onclick (index.html:15:42)</span></span></code></pre></div><h3 id="问题定位-1" tabindex="-1">问题定位 <a class="header-anchor" href="#问题定位-1" aria-label="Permalink to &quot;问题定位&quot;">​</a></h3><p><code>ReferenceError: xxx is not defined</code> 表示代码中使用了一个不存在的变量或函数。</p><p>常见原因：</p><ul><li>函数名拼写错误</li><li>函数定义在调用之后（代码顺序问题）</li><li>函数写在了错误的位置</li></ul><h3 id="诊断对话-1" tabindex="-1">诊断对话 <a class="header-anchor" href="#诊断对话-1" aria-label="Permalink to &quot;诊断对话&quot;">​</a></h3><p><strong>你发送的 Prompt</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>页面加载就报错：ReferenceError: addTask is not defined</span></span>
<span class="line"><span></span></span>
<span class="line"><span>我的 HTML 中有这样的按钮：</span></span>
<span class="line"><span>&lt;button onclick=&quot;addTask()&quot;&gt;添加&lt;/button&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>我的 JavaScript 中有这个函数：</span></span>
<span class="line"><span>function addtask() {</span></span>
<span class="line"><span>    // ... 函数内容</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请帮我分析原因。</span></span></code></pre></div><p><strong>AI 的分析</strong>：</p><blockquote><p>问题在于函数名大小写不一致。HTML 中调用的是 <code>addTask()</code>（T 大写），但 JavaScript 中定义的是 <code>addtask()</code>（t 小写）。JavaScript 对大小写敏感，这两个被视为不同的函数。</p></blockquote><h3 id="修复方法" tabindex="-1">修复方法 <a class="header-anchor" href="#修复方法" aria-label="Permalink to &quot;修复方法&quot;">​</a></h3><p>将 JavaScript 中的函数名改为 <code>addTask</code>（与 HTML 中一致）：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改前</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addtask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改后</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span></code></pre></div><h3 id="验证方法-1" tabindex="-1">验证方法 <a class="header-anchor" href="#验证方法-1" aria-label="Permalink to &quot;验证方法&quot;">​</a></h3><ol><li>替换代码后刷新页面</li><li>确认控制台没有 <code>ReferenceError</code></li><li>点击添加按钮，确认功能正常</li></ol><h2 id="案例-3-localstorage-解析失败" tabindex="-1">案例 3：localStorage 解析失败 <a class="header-anchor" href="#案例-3-localstorage-解析失败" aria-label="Permalink to &quot;案例 3：localStorage 解析失败&quot;">​</a></h2><h3 id="错误现象-2" tabindex="-1">错误现象 <a class="header-anchor" href="#错误现象-2" aria-label="Permalink to &quot;错误现象&quot;">​</a></h3><p>页面加载时报错，之前保存的任务无法显示。</p><h3 id="控制台报错-2" tabindex="-1">控制台报错 <a class="header-anchor" href="#控制台报错-2" aria-label="Permalink to &quot;控制台报错&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Uncaught SyntaxError: Unexpected token &#39;u&#39;, &quot;undefined&quot; is not valid JSON</span></span>
<span class="line"><span>    at JSON.parse (&lt;anonymous&gt;)</span></span>
<span class="line"><span>    at loadTasks (index.html:68:24)</span></span></code></pre></div><h3 id="问题定位-2" tabindex="-1">问题定位 <a class="header-anchor" href="#问题定位-2" aria-label="Permalink to &quot;问题定位&quot;">​</a></h3><p>这个错误发生在 <code>JSON.parse()</code> 时。错误信息 <code>&quot;undefined&quot; is not valid JSON</code> 表示试图解析的内容是字符串 <code>&quot;undefined&quot;</code>，而不是有效的 JSON。</p><p>常见原因：</p><ul><li>localStorage 中没有数据时，<code>getItem</code> 返回 <code>null</code></li><li>代码没有处理 <code>null</code> 的情况，直接传给了 <code>JSON.parse</code></li></ul><h3 id="诊断对话-2" tabindex="-1">诊断对话 <a class="header-anchor" href="#诊断对话-2" aria-label="Permalink to &quot;诊断对话&quot;">​</a></h3><p><strong>你发送的 Prompt</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>localStorage 读取报错：SyntaxError: Unexpected token &#39;u&#39;, &quot;undefined&quot; is not valid JSON</span></span>
<span class="line"><span></span></span>
<span class="line"><span>我的读取代码：</span></span>
<span class="line"><span>function loadTasks() {</span></span>
<span class="line"><span>    const saved = localStorage.getItem(&#39;todoList&#39;);</span></span>
<span class="line"><span>    tasks = JSON.parse(saved);</span></span>
<span class="line"><span>    renderTasks();</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请帮我分析。</span></span></code></pre></div><p><strong>AI 的分析</strong>：</p><blockquote><p>当 localStorage 中没有 &#39;todoList&#39; 这个键时，<code>getItem</code> 返回 <code>null</code>。<code>JSON.parse(null)</code> 会尝试解析，但在某些情况下可能导致问题。更常见的是，如果之前错误地存储了 <code>undefined</code> 字符串，就会出现这个错误。你需要在解析前检查数据是否存在。</p></blockquote><h3 id="修复对话-1" tabindex="-1">修复对话 <a class="header-anchor" href="#修复对话-1" aria-label="Permalink to &quot;修复对话&quot;">​</a></h3><p><strong>你发送的 Prompt</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>请帮我修复 loadTasks 函数，确保：</span></span>
<span class="line"><span>1. 如果 localStorage 没有数据，使用空数组</span></span>
<span class="line"><span>2. 如果数据格式不对，也使用空数组</span></span>
<span class="line"><span>3. 给我完整的修复代码</span></span></code></pre></div><p><strong>AI 给出的修复代码</strong>：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadTasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> saved</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> localStorage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;todoList&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 检查是否有保存的数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (saved </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> saved </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;undefined&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            tasks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(saved);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 如果解析失败，使用空数组</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;数据格式错误，已重置&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            tasks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 没有保存的数据，使用空数组</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tasks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    renderTasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="验证方法-2" tabindex="-1">验证方法 <a class="header-anchor" href="#验证方法-2" aria-label="Permalink to &quot;验证方法&quot;">​</a></h3><ol><li>替换代码后刷新页面</li><li>确认控制台没有报错</li><li>添加几个任务，刷新页面，确认任务还在</li></ol><h2 id="案例-4-点击按钮没反应" tabindex="-1">案例 4：点击按钮没反应 <a class="header-anchor" href="#案例-4-点击按钮没反应" aria-label="Permalink to &quot;案例 4：点击按钮没反应&quot;">​</a></h2><h3 id="错误现象-3" tabindex="-1">错误现象 <a class="header-anchor" href="#错误现象-3" aria-label="Permalink to &quot;错误现象&quot;">​</a></h3><p>点击添加按钮，没有任何反应。控制台也没有报错。</p><h3 id="问题定位-3" tabindex="-1">问题定位 <a class="header-anchor" href="#问题定位-3" aria-label="Permalink to &quot;问题定位&quot;">​</a></h3><p>这是典型的「逻辑错误」——代码语法正确，但行为不符合预期。</p><p>可能原因：</p><ul><li>事件监听器没有正确绑定</li><li>按钮的选择器写错了</li><li>代码执行顺序问题（在 DOM 加载前就执行了）</li></ul><h3 id="诊断对话-3" tabindex="-1">诊断对话 <a class="header-anchor" href="#诊断对话-3" aria-label="Permalink to &quot;诊断对话&quot;">​</a></h3><p><strong>你发送的 Prompt</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>我的添加按钮点击没反应，控制台也没有报错。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>HTML 中的按钮：</span></span>
<span class="line"><span>&lt;button class=&quot;add-btn&quot;&gt;添加&lt;/button&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>JavaScript 中的绑定：</span></span>
<span class="line"><span>const addBtn = document.querySelector(&#39;.add-button&#39;);</span></span>
<span class="line"><span>addBtn.addEventListener(&#39;click&#39;, addTask);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请帮我排查问题。</span></span></code></pre></div><p><strong>AI 的分析</strong>：</p><blockquote><p>问题在于 CSS 选择器不匹配。你的 HTML 中按钮的 class 是 <code>add-btn</code>，但 JavaScript 中查找的是 <code>.add-button</code>。由于找不到元素，<code>addBtn</code> 是 <code>null</code>，后续的 <code>addEventListener</code> 调用失败（虽然有时不报错）。</p></blockquote><h3 id="修复方法-1" tabindex="-1">修复方法 <a class="header-anchor" href="#修复方法-1" aria-label="Permalink to &quot;修复方法&quot;">​</a></h3><p>统一选择器名称：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改前（选择器不匹配）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> addBtn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.add-button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 修改后（与 HTML 一致）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> addBtn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.add-btn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="验证方法-3" tabindex="-1">验证方法 <a class="header-anchor" href="#验证方法-3" aria-label="Permalink to &quot;验证方法&quot;">​</a></h3><ol><li>替换代码后刷新页面</li><li>点击添加按钮，确认功能正常</li></ol><h2 id="案例-5-样式突然消失" tabindex="-1">案例 5：样式突然消失 <a class="header-anchor" href="#案例-5-样式突然消失" aria-label="Permalink to &quot;案例 5：样式突然消失&quot;">​</a></h2><h3 id="错误现象-4" tabindex="-1">错误现象 <a class="header-anchor" href="#错误现象-4" aria-label="Permalink to &quot;错误现象&quot;">​</a></h3><p>让 AI 添加新功能后，整个页面的样式都消失了，变成了纯文本。</p><h3 id="问题定位-4" tabindex="-1">问题定位 <a class="header-anchor" href="#问题定位-4" aria-label="Permalink to &quot;问题定位&quot;">​</a></h3><p>这通常发生在 AI 修改代码时，不小心删除或破坏了 CSS 部分。</p><p>常见原因：</p><ul><li>AI 只返回了 JavaScript 部分，你替换时覆盖了整个文件</li><li>CSS 代码中出现了语法错误</li><li><code>&lt;style&gt;</code> 标签被误删</li></ul><h3 id="诊断对话-4" tabindex="-1">诊断对话 <a class="header-anchor" href="#诊断对话-4" aria-label="Permalink to &quot;诊断对话&quot;">​</a></h3><p><strong>你发送的 Prompt</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>我让你添加删除功能后，页面样式全部消失了。</span></span>
<span class="line"><span>现在页面只显示纯文本，没有任何样式。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请帮我排查：</span></span>
<span class="line"><span>1. 检查 &lt;style&gt; 标签是否完整</span></span>
<span class="line"><span>2. 检查 CSS 语法是否有错误</span></span>
<span class="line"><span>3. 如果样式丢失，请帮我恢复</span></span>
<span class="line"><span></span></span>
<span class="line"><span>这是我现在的完整 HTML 文件：</span></span>
<span class="line"><span>[粘贴完整代码]</span></span></code></pre></div><p><strong>AI 的分析</strong>：</p><blockquote><p>我发现问题了。在之前的修改中，<code>&lt;style&gt;</code> 标签被误删除了。我会帮你恢复完整的样式代码。</p></blockquote><h3 id="修复方法-2" tabindex="-1">修复方法 <a class="header-anchor" href="#修复方法-2" aria-label="Permalink to &quot;修复方法&quot;">​</a></h3><p>让 AI 重新生成包含完整样式的代码，或者从之前的版本中恢复 CSS 部分。</p><h3 id="预防措施" tabindex="-1">预防措施 <a class="header-anchor" href="#预防措施" aria-label="Permalink to &quot;预防措施&quot;">​</a></h3><ul><li>每次让 AI 修改代码前，先备份当前版本</li><li>明确告诉 AI：「只修改 JavaScript 部分，不要改动 HTML 和 CSS」</li><li>收到 AI 的代码后，先检查结构是否完整再替换</li></ul><h2 id="案例-6-完成状态无法保存" tabindex="-1">案例 6：完成状态无法保存 <a class="header-anchor" href="#案例-6-完成状态无法保存" aria-label="Permalink to &quot;案例 6：完成状态无法保存&quot;">​</a></h2><h3 id="错误现象-5" tabindex="-1">错误现象 <a class="header-anchor" href="#错误现象-5" aria-label="Permalink to &quot;错误现象&quot;">​</a></h3><p>标记任务为「已完成」后，刷新页面，任务恢复为「未完成」状态。</p><h3 id="问题定位-5" tabindex="-1">问题定位 <a class="header-anchor" href="#问题定位-5" aria-label="Permalink to &quot;问题定位&quot;">​</a></h3><p>这是数据持久化的逻辑错误——完成状态的变更没有触发保存操作。</p><h3 id="诊断对话-5" tabindex="-1">诊断对话 <a class="header-anchor" href="#诊断对话-5" aria-label="Permalink to &quot;诊断对话&quot;">​</a></h3><p><strong>你发送的 Prompt</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>任务的完成状态无法保存。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>【复现步骤】</span></span>
<span class="line"><span>1. 添加一个任务</span></span>
<span class="line"><span>2. 点击完成按钮，任务显示为已完成</span></span>
<span class="line"><span>3. 刷新页面</span></span>
<span class="line"><span>4. 任务恢复为未完成状态</span></span>
<span class="line"><span></span></span>
<span class="line"><span>【现象】</span></span>
<span class="line"><span>添加和删除操作都能保存，但完成状态不行</span></span>
<span class="line"><span></span></span>
<span class="line"><span>【相关代码】</span></span>
<span class="line"><span>function toggleComplete(index) {</span></span>
<span class="line"><span>    tasks[index].completed = !tasks[index].completed;</span></span>
<span class="line"><span>    renderTasks();</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>function saveTasks() {</span></span>
<span class="line"><span>    localStorage.setItem(&#39;todoList&#39;, JSON.stringify(tasks));</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请帮我分析原因。</span></span></code></pre></div><p><strong>AI 的分析</strong>：</p><blockquote><p><code>toggleComplete</code> 函数修改了任务状态并重新渲染，但没有调用 <code>saveTasks()</code> 保存到 localStorage。添加和删除功能能保存，可能是因为它们的函数中调用了 <code>saveTasks()</code>，但 <code>toggleComplete</code> 漏掉了。</p></blockquote><h3 id="修复对话-2" tabindex="-1">修复对话 <a class="header-anchor" href="#修复对话-2" aria-label="Permalink to &quot;修复对话&quot;">​</a></h3><p><strong>你发送的 Prompt</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>请帮我修复，在 toggleComplete 函数中添加保存操作。</span></span></code></pre></div><p><strong>AI 给出的修复代码</strong>：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> toggleComplete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tasks[index].completed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tasks[index].completed;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    saveTasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 添加这一行：保存到 localStorage</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    renderTasks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="验证方法-4" tabindex="-1">验证方法 <a class="header-anchor" href="#验证方法-4" aria-label="Permalink to &quot;验证方法&quot;">​</a></h3><ol><li>替换代码后刷新页面</li><li>添加一个任务</li><li>点击完成按钮</li><li>刷新页面</li><li>确认任务仍然显示为已完成</li></ol><h2 id="本节要点" tabindex="-1">本节要点 <a class="header-anchor" href="#本节要点" aria-label="Permalink to &quot;本节要点&quot;">​</a></h2><ul><li>每个案例都遵循「现象 → 报错 → 定位 → 修复 → 验证」的流程</li><li>TypeError 通常是变量未定义或类型不对</li><li>ReferenceError 通常是拼写错误或作用域问题</li><li>SyntaxError 在 JSON.parse 时常见于数据为空或格式错误</li><li>逻辑错误没有报错信息，需要对比「期望行为」和「实际行为」</li><li>样式错误要检查 CSS 代码是否完整</li></ul><p>掌握了这些案例，你就能应对待办清单开发中的大部分问题。</p><p>→ <a href="./4.5.4-debug-mindset.html">4.5.4 Debug 心法总结</a></p>`,120)])])}const g=a(p,[["render",l]]);export{k as __pageData,g as default};
