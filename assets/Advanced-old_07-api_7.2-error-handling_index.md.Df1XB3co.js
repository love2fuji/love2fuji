import{_ as n,C as l,c as e,o as i,a3 as a,b as k,w as t,a as p,G as d,a4 as r}from"./chunks/framework.CUcrqFol.js";const D=JSON.parse('{"title":"7.2 报错也要说人话——REST 最小原则与错误返回：错误码/错误体/追踪 ID","description":"7.2 REST 与错误处理 核心问题 | 问题 | 本节解答 | |------|----------| | REST 是什么？ | 一套 API 设计约束，让接口更统一可预测 | | URL 怎么设计？ | 资源导向，名词复数，层级清晰 | | 状态码怎么用？ | 2xx 成功、4xx 客户端错误、5xx 服务端错","frontmatter":{"title":"7.2 报错也要说人话——REST 最小原则与错误返回：错误码/错误体/追踪 ID","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/07-api/7.2-error-handling/index.md","filePath":"Advanced-old/07-api/7.2-error-handling/index.md","lastUpdated":1766168364000}'),E={name:"Advanced-old/07-api/7.2-error-handling/index.md"};function o(g,s,y,A,c,u){const h=l("Mermaid");return i(),e("div",null,[s[1]||(s[1]=a('<h1 id="_7-2-rest-与错误处理" tabindex="-1">7.2 REST 与错误处理 <a class="header-anchor" href="#_7-2-rest-与错误处理" aria-label="Permalink to &quot;7.2 REST 与错误处理&quot;">​</a></h1><h2 id="核心问题" tabindex="-1">核心问题 <a class="header-anchor" href="#核心问题" aria-label="Permalink to &quot;核心问题&quot;">​</a></h2><table tabindex="0"><thead><tr><th>问题</th><th>本节解答</th></tr></thead><tbody><tr><td>REST 是什么？</td><td>一套 API 设计约束，让接口更统一可预测</td></tr><tr><td>URL 怎么设计？</td><td>资源导向，名词复数，层级清晰</td></tr><tr><td>状态码怎么用？</td><td>2xx 成功、4xx 客户端错误、5xx 服务端错误</td></tr><tr><td>错误信息怎么返回？</td><td>统一结构，包含错误码、消息、详情</td></tr><tr><td>怎么追踪请求？</td><td>每个请求分配唯一 Trace ID</td></tr></tbody></table><h2 id="rest-设计流程" tabindex="-1">REST 设计流程 <a class="header-anchor" href="#rest-设计流程" aria-label="Permalink to &quot;REST 设计流程&quot;">​</a></h2>',4)),(i(),k(r,null,{default:t(()=>[d(h,{id:"mermaid-63",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20Resource%5B%22%E5%AE%9A%E4%B9%89%E8%B5%84%E6%BA%90%22%5D%20--%3E%20URL%5B%22%E8%AE%BE%E8%AE%A1%20URL%22%5D%0A%20%20%20%20URL%20--%3E%20Method%5B%22%E9%80%89%E6%8B%A9%20HTTP%20%E6%96%B9%E6%B3%95%22%5D%0A%20%20%20%20Method%20--%3E%20Status%5B%22%E7%A1%AE%E5%AE%9A%E7%8A%B6%E6%80%81%E7%A0%81%22%5D%0A%20%20%20%20Status%20--%3E%20Error%5B%22%E8%A7%84%E8%8C%83%E9%94%99%E8%AF%AF%E6%A0%BC%E5%BC%8F%22%5D%0A%20%20%20%20Error%20--%3E%20Trace%5B%22%E6%B7%BB%E5%8A%A0%E8%BF%BD%E8%B8%AA%20ID%22%5D%0A"})]),fallback:t(()=>[...s[0]||(s[0]=[p(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=a(`<h2 id="本节内容" tabindex="-1">本节内容 <a class="header-anchor" href="#本节内容" aria-label="Permalink to &quot;本节内容&quot;">​</a></h2><table tabindex="0"><thead><tr><th>小节</th><th>主题</th><th>核心知识点</th></tr></thead><tbody><tr><td>7.2.1</td><td>REST 约束</td><td>统一接口、无状态、可缓存</td></tr><tr><td>7.2.2</td><td>资源设计</td><td>URL 路径、资源映射、命名规范</td></tr><tr><td>7.2.3</td><td>状态码标准</td><td>HTTP 状态码使用规范</td></tr><tr><td>7.2.4</td><td>错误响应格式</td><td>统一的错误信息结构</td></tr><tr><td>7.2.5</td><td>追踪 ID</td><td>请求链路跟踪与调试</td></tr></tbody></table><h2 id="快速示例" tabindex="-1">快速示例 <a class="header-anchor" href="#快速示例" aria-label="Permalink to &quot;快速示例&quot;">​</a></h2><h3 id="rest-api-设计" tabindex="-1">REST API 设计 <a class="header-anchor" href="#rest-api-设计" aria-label="Permalink to &quot;REST API 设计&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 资源: 用户 (users)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">users         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取用户列表</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取单个用户</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">users         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建用户</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 更新用户</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DELETE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 删除用户</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 嵌套资源: 用户的文章</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">posts      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取用户的文章</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">posts      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 为用户创建文章</span></span></code></pre></div><h3 id="统一错误格式" tabindex="-1">统一错误格式 <a class="header-anchor" href="#统一错误格式" aria-label="Permalink to &quot;统一错误格式&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;VALIDATION_ERROR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请求参数验证失败&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;details&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;邮箱格式不正确&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;traceId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abc-123-xyz&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="学习目标" tabindex="-1">学习目标 <a class="header-anchor" href="#学习目标" aria-label="Permalink to &quot;学习目标&quot;">​</a></h2><p>完成本节后，你将能够：</p><ol><li>理解 REST 架构约束及其意义</li><li>设计符合 RESTful 规范的 API URL</li><li>正确使用 HTTP 状态码</li><li>实现统一的错误响应格式</li><li>使用 Trace ID 追踪请求链路</li></ol>`,10))])}const C=n(E,[["render",o]]);export{D as __pageData,C as default};
