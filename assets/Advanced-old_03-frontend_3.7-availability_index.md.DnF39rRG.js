import{_ as l,C as h,c as e,o as a,a3 as i,b as p,w as t,a as r,G as k,a4 as d}from"./chunks/framework.CUcrqFol.js";const u=JSON.parse('{"title":"3.7 崩了和没数据时怎么办——可用性：错误/空态/加载骨架；Error Boundary","description":"3.7 可用性设计 一句话破题 用户不怕等待，怕的是不知道发生了什么。优秀的可用性设计让每种状态都有恰当的反馈。 核心价值 一个应用会遇到四种非正常状态：加载中、数据为空、请求失败、组件崩溃。处理好这四种状态，用户体验就不会差。 状态全景图 四种状态对比 | 状态 | 用户感知 | 解决方案 | 本章节 | |----","frontmatter":{"title":"3.7 崩了和没数据时怎么办——可用性：错误/空态/加载骨架；Error Boundary","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/03-frontend/3.7-availability/index.md","filePath":"Advanced-old/03-frontend/3.7-availability/index.md","lastUpdated":1766168364000}'),E={name:"Advanced-old/03-frontend/3.7-availability/index.md"};function o(g,s,y,c,A,B){const n=h("Mermaid");return a(),e("div",null,[s[1]||(s[1]=i('<h1 id="_3-7-可用性设计" tabindex="-1">3.7 可用性设计 <a class="header-anchor" href="#_3-7-可用性设计" aria-label="Permalink to &quot;3.7 可用性设计&quot;">​</a></h1><h3 id="一句话破题" tabindex="-1">一句话破题 <a class="header-anchor" href="#一句话破题" aria-label="Permalink to &quot;一句话破题&quot;">​</a></h3><p>用户不怕等待，怕的是不知道发生了什么。优秀的可用性设计让每种状态都有恰当的反馈。</p><h3 id="核心价值" tabindex="-1">核心价值 <a class="header-anchor" href="#核心价值" aria-label="Permalink to &quot;核心价值&quot;">​</a></h3><p>一个应用会遇到四种非正常状态：加载中、数据为空、请求失败、组件崩溃。处理好这四种状态，用户体验就不会差。</p><h3 id="状态全景图" tabindex="-1">状态全景图 <a class="header-anchor" href="#状态全景图" aria-label="Permalink to &quot;状态全景图&quot;">​</a></h3>',6)),(a(),p(d,null,{default:t(()=>[k(n,{id:"mermaid-18",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5B%22%E7%94%A8%E6%88%B7%E6%93%8D%E4%BD%9C%22%5D%20--%3E%20B%7B%22%E7%8A%B6%E6%80%81%E5%88%A4%E6%96%AD%22%7D%0A%20%20%20%20B%20--%3E%7C%22%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD%E4%B8%AD%22%7C%20C%5B%22Loading%20%E7%8A%B6%E6%80%81%22%5D%0A%20%20%20%20B%20--%3E%7C%22%E6%95%B0%E6%8D%AE%E4%B8%BA%E7%A9%BA%22%7C%20D%5B%22Empty%20%E7%8A%B6%E6%80%81%22%5D%0A%20%20%20%20B%20--%3E%7C%22%E8%AF%B7%E6%B1%82%E5%A4%B1%E8%B4%A5%22%7C%20E%5B%22Error%20%E7%8A%B6%E6%80%81%22%5D%0A%20%20%20%20B%20--%3E%7C%22%E7%BB%84%E4%BB%B6%E5%B4%A9%E6%BA%83%22%7C%20F%5B%22Crash%20%E7%8A%B6%E6%80%81%22%5D%0A%20%20%20%20%0A%20%20%20%20C%20--%3E%20G%5B%22Skeleton%20%2F%20Spinner%22%5D%0A%20%20%20%20D%20--%3E%20H%5B%22%E7%A9%BA%E6%80%81%E6%8F%92%E7%94%BB%20%2B%20%E5%BC%95%E5%AF%BC%22%5D%0A%20%20%20%20E%20--%3E%20I%5B%22%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA%20%2B%20%E9%87%8D%E8%AF%95%22%5D%0A%20%20%20%20F%20--%3E%20J%5B%22Error%20Boundary%22%5D%0A"})]),fallback:t(()=>[...s[0]||(s[0]=[r(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=i(`<h3 id="四种状态对比" tabindex="-1">四种状态对比 <a class="header-anchor" href="#四种状态对比" aria-label="Permalink to &quot;四种状态对比&quot;">​</a></h3><table tabindex="0"><thead><tr><th>状态</th><th>用户感知</th><th>解决方案</th><th>本章节</th></tr></thead><tbody><tr><td>Loading</td><td>等待焦虑</td><td>Skeleton 减少感知时间</td><td>3.7.3</td></tr><tr><td>Empty</td><td>困惑迷茫</td><td>引导用户下一步操作</td><td>3.7.2</td></tr><tr><td>Error</td><td>沮丧愤怒</td><td>提供重试和帮助</td><td>3.7.4</td></tr><tr><td>Crash</td><td>恐慌无助</td><td>优雅降级，保护全局</td><td>3.7.1</td></tr></tbody></table><h3 id="本章目标" tabindex="-1">本章目标 <a class="header-anchor" href="#本章目标" aria-label="Permalink to &quot;本章目标&quot;">​</a></h3><ol><li>学会用 Error Boundary 隔离组件崩溃</li><li>设计有引导性的空态页面</li><li>使用 Skeleton 提升加载体验</li><li>实现用户友好的错误重试机制</li></ol><h3 id="设计原则" tabindex="-1">设计原则 <a class="header-anchor" href="#设计原则" aria-label="Permalink to &quot;设计原则&quot;">​</a></h3><p><strong>1. 永远告诉用户发生了什么</strong></p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 差：无任何反馈</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{loading </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 好：明确的状态反馈</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{loading </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Skeleton</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;}</span></span></code></pre></div><p><strong>2. 提供可操作的下一步</strong></p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 差：只显示错误信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;请求失败&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 好：提供解决方案</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ErrorState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;请求失败&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  action</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onClick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{retry}&gt;重试&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span></code></pre></div><p><strong>3. 优雅降级而非全面崩溃</strong></p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 差：一个组件出错，整页白屏</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">App</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 好：错误被隔离</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ErrorBoundary</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ErrorFallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;}&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RiskyComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ErrorBoundary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="状态组件库" tabindex="-1">状态组件库 <a class="header-anchor" href="#状态组件库" aria-label="Permalink to &quot;状态组件库&quot;">​</a></h3><p>推荐使用统一的状态组件库管理各种状态：</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// components/states/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Loading, Skeleton } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./Loading&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Empty } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./Empty&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ErrorState } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./Error&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ErrorBoundary } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./ErrorBoundary&#39;</span></span></code></pre></div><h3 id="本章内容" tabindex="-1">本章内容 <a class="header-anchor" href="#本章内容" aria-label="Permalink to &quot;本章内容&quot;">​</a></h3><ul><li><a href="./3.7.1-error-boundary.html">3.7.1 错误边界</a> - 隔离组件崩溃</li><li><a href="./3.7.2-empty-state.html">3.7.2 空态设计</a> - 引导用户操作</li><li><a href="./3.7.3-loading-state.html">3.7.3 加载状态</a> - 减少等待焦虑</li><li><a href="./3.7.4-retry.html">3.7.4 错误重试</a> - 优雅处理失败</li></ul>`,16))])}const C=l(E,[["render",o]]);export{u as __pageData,C as default};
