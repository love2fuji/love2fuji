import{_ as d,C as r,c as k,o as i,a3 as t,b as n,w as s,a as l,G as p,a4 as h}from"./chunks/framework.CUcrqFol.js";const S=JSON.parse('{"title":"4.8 拓展：Supabase 为何如此强大——存储与认证联动","description":"4.8 拓展：Supabase 为何如此强大——存储与认证联动 认知重构 Supabase 不只是\\"开源 Firebase\\"——它是基于 PostgreSQL 的全栈后端平台，将数据库、认证、存储、实时订阅完美整合。 Supabase 生态全景 子章节导航 | 章节 | 主题 | 核心问题 | |------|----","frontmatter":{"title":"4.8 拓展：Supabase 为何如此强大——存储与认证联动","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/04-database/4.8-supabase-advanced/index.md","filePath":"Advanced-old/04-database/4.8-supabase-advanced/index.md","lastUpdated":1766168364000}'),o={name:"Advanced-old/04-database/4.8-supabase-advanced/index.md"};function E(u,a,b,g,c,A){const e=r("Mermaid");return i(),k("div",null,[a[2]||(a[2]=t('<h1 id="_4-8-拓展-supabase-为何如此强大——存储与认证联动" tabindex="-1">4.8 拓展：Supabase 为何如此强大——存储与认证联动 <a class="header-anchor" href="#_4-8-拓展-supabase-为何如此强大——存储与认证联动" aria-label="Permalink to &quot;4.8 拓展：Supabase 为何如此强大——存储与认证联动&quot;">​</a></h1><h3 id="认知重构" tabindex="-1">认知重构 <a class="header-anchor" href="#认知重构" aria-label="Permalink to &quot;认知重构&quot;">​</a></h3><p>Supabase 不只是&quot;开源 Firebase&quot;——它是基于 PostgreSQL 的全栈后端平台，将数据库、认证、存储、实时订阅完美整合。</p><h3 id="supabase-生态全景" tabindex="-1">Supabase 生态全景 <a class="header-anchor" href="#supabase-生态全景" aria-label="Permalink to &quot;Supabase 生态全景&quot;">​</a></h3>',4)),(i(),n(h,null,{default:s(()=>[p(e,{id:"mermaid-12",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5B%22Supabase%22%5D%20--%3E%20B%5B%22PostgreSQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%22%5D%0A%20%20%20%20A%20--%3E%20C%5B%22Auth%20%E8%AE%A4%E8%AF%81%22%5D%0A%20%20%20%20A%20--%3E%20D%5B%22Storage%20%E5%AD%98%E5%82%A8%22%5D%0A%20%20%20%20A%20--%3E%20E%5B%22Realtime%20%E5%AE%9E%E6%97%B6%22%5D%0A%20%20%20%20A%20--%3E%20F%5B%22Edge%20Functions%22%5D%0A%20%20%20%20%0A%20%20%20%20B%20--%3E%20G%5B%22RLS%20%E8%A1%8C%E7%BA%A7%E5%AE%89%E5%85%A8%22%5D%0A%20%20%20%20C%20--%3E%20G%0A%20%20%20%20D%20--%3E%20G%0A"})]),fallback:s(()=>[...a[0]||(a[0]=[l(" Loading... ",-1)])]),_:1})),a[3]||(a[3]=t(`<h3 id="子章节导航" tabindex="-1">子章节导航 <a class="header-anchor" href="#子章节导航" aria-label="Permalink to &quot;子章节导航&quot;">​</a></h3><table tabindex="0"><thead><tr><th>章节</th><th>主题</th><th>核心问题</th></tr></thead><tbody><tr><td>4.8.1</td><td>Storage</td><td>如何安全地存储和访问文件？</td></tr><tr><td>4.8.2</td><td>Realtime</td><td>如何实时推送数据变更？</td></tr><tr><td>4.8.3</td><td>Edge Functions</td><td>如何在边缘运行自定义逻辑？</td></tr></tbody></table><h3 id="为什么选择-supabase" tabindex="-1">为什么选择 Supabase？ <a class="header-anchor" href="#为什么选择-supabase" aria-label="Permalink to &quot;为什么选择 Supabase？&quot;">​</a></h3><table tabindex="0"><thead><tr><th>特性</th><th>Supabase</th><th>传统方案</th></tr></thead><tbody><tr><td>数据库</td><td>PostgreSQL（企业级）</td><td>各种选择</td></tr><tr><td>认证</td><td>内置 + RLS 联动</td><td>需要自己实现</td></tr><tr><td>文件存储</td><td>内置 + 权限控制</td><td>需要额外服务</td></tr><tr><td>实时订阅</td><td>内置 WebSocket</td><td>需要自己搭建</td></tr><tr><td>定价</td><td>免费额度充足</td><td>成本难控制</td></tr></tbody></table><h3 id="核心优势-rls-统一权限" tabindex="-1">核心优势：RLS 统一权限 <a class="header-anchor" href="#核心优势-rls-统一权限" aria-label="Permalink to &quot;核心优势：RLS 统一权限&quot;">​</a></h3><p>Supabase 的杀手锏是 <strong>Row Level Security</strong>（行级安全策略），让数据库、存储、实时订阅共享同一套权限规则：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 创建策略：用户只能访问自己的数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> POLICY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Users can view own data&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> users</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FOR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SELECT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 同样的策略自动应用于：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- - 数据库查询</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- - 文件存储访问</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- - 实时订阅过滤</span></span></code></pre></div><h3 id="快速上手" tabindex="-1">快速上手 <a class="header-anchor" href="#快速上手" aria-label="Permalink to &quot;快速上手&quot;">​</a></h3><p><strong>安装 SDK</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @supabase/supabase-js</span></span></code></pre></div><p><strong>初始化客户端</strong>：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// lib/supabase.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createClient } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@supabase/supabase-js&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> supabase</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NEXT_PUBLIC_SUPABASE_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NEXT_PUBLIC_SUPABASE_ANON_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="与-prisma-的关系" tabindex="-1">与 Prisma 的关系 <a class="header-anchor" href="#与-prisma-的关系" aria-label="Permalink to &quot;与 Prisma 的关系&quot;">​</a></h3>`,13)),(i(),n(h,null,{default:s(()=>[p(e,{id:"mermaid-162",class:"mermaid",graph:"graph%20LR%0A%20%20%20%20A%5B%22Next.js%20%E5%BA%94%E7%94%A8%22%5D%20--%3E%20B%5B%22Prisma%20ORM%22%5D%0A%20%20%20%20A%20--%3E%20C%5B%22Supabase%20Client%22%5D%0A%20%20%20%20B%20--%3E%20D%5B%22Supabase%20PostgreSQL%22%5D%0A%20%20%20%20C%20--%3E%20D%0A%20%20%20%20C%20--%3E%20E%5B%22Storage%2FRealtime%22%5D%0A"})]),fallback:s(()=>[...a[1]||(a[1]=[l(" Loading... ",-1)])]),_:1})),a[4]||(a[4]=t('<ul><li><strong>Prisma</strong>：用于复杂的数据库操作</li><li><strong>Supabase Client</strong>：用于存储、实时订阅、认证等特性</li></ul><h3 id="本章小结" tabindex="-1">本章小结 <a class="header-anchor" href="#本章小结" aria-label="Permalink to &quot;本章小结&quot;">​</a></h3><ul><li>Supabase 提供一站式后端解决方案</li><li>RLS 是统一权限控制的核心</li><li>可以与 Prisma 配合使用</li><li>适合快速构建全栈应用</li></ul>',3))])}const D=d(o,[["render",E]]);export{S as __pageData,D as default};
