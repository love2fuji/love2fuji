import{_ as o,C as E,c as i,o as a,a3 as d,b as l,w as e,a as n,G as A,a4 as s}from"./chunks/framework.CUcrqFol.js";const P=JSON.parse('{"title":"9.1 懒人的测试金字塔——优先测服务层与 API","description":"9.1 懒人的测试金字塔——优先测服务层与 API **测试金字塔的精髓不是\\"写更多测试\\"，而是\\"在正确的层级写测试\\"。** 单人开发者的测试困境 作为独立开发者，你面临一个现实问题：时间有限，但质量不能妥协。传统的测试金字塔告诉你要写大量单元测试，但现实是： 业务逻辑快速迭代，单元测试维护成本高 UI 频繁变化，E2","frontmatter":{"title":"9.1 懒人的测试金字塔——优先测服务层与 API","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/09-testing/9.1-testing-strategy/index.md","filePath":"Advanced-old/09-testing/9.1-testing-strategy/index.md","lastUpdated":1766168364000}'),h={name:"Advanced-old/09-testing/9.1-testing-strategy/index.md"};function B(_,t,u,c,p,b){const r=E("Mermaid");return a(),i("div",null,[t[1]||(t[1]=d('<h1 id="_9-1-懒人的测试金字塔——优先测服务层与-api" tabindex="-1">9.1 懒人的测试金字塔——优先测服务层与 API <a class="header-anchor" href="#_9-1-懒人的测试金字塔——优先测服务层与-api" aria-label="Permalink to &quot;9.1 懒人的测试金字塔——优先测服务层与 API&quot;">​</a></h1><p><strong>测试金字塔的精髓不是&quot;写更多测试&quot;，而是&quot;在正确的层级写测试&quot;。</strong></p><h2 id="单人开发者的测试困境" tabindex="-1">单人开发者的测试困境 <a class="header-anchor" href="#单人开发者的测试困境" aria-label="Permalink to &quot;单人开发者的测试困境&quot;">​</a></h2><p>作为独立开发者，你面临一个现实问题：时间有限，但质量不能妥协。传统的测试金字塔告诉你要写大量单元测试，但现实是：</p><ul><li>业务逻辑快速迭代，单元测试维护成本高</li><li>UI 频繁变化，E2E 测试脆弱易碎</li><li>测试覆盖率数字好看，但 bug 照样上线</li></ul><h2 id="懒人金字塔-重新分配测试投资" tabindex="-1">懒人金字塔：重新分配测试投资 <a class="header-anchor" href="#懒人金字塔-重新分配测试投资" aria-label="Permalink to &quot;懒人金字塔：重新分配测试投资&quot;">​</a></h2>',6)),(a(),l(s,null,{default:e(()=>[A(r,{id:"mermaid-32",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20%E4%BC%A0%E7%BB%9F%E9%87%91%E5%AD%97%E5%A1%94%0A%20%20%20%20%20%20%20%20E2E1%5BE2E%20%E6%B5%8B%E8%AF%95%5D%0A%20%20%20%20%20%20%20%20INT1%5B%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95%5D%0A%20%20%20%20%20%20%20%20UNIT1%5B%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%20-%20%E5%A4%A7%E9%87%8F%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%E6%87%92%E4%BA%BA%E9%87%91%E5%AD%97%E5%A1%94%0A%20%20%20%20%20%20%20%20E2E2%5BE2E%20%E6%B5%8B%E8%AF%95%20-%20%E6%A0%B8%E5%BF%83%E6%B5%81%E7%A8%8B%5D%0A%20%20%20%20%20%20%20%20API%5BAPI%20%E6%B5%8B%E8%AF%95%20-%20%E9%87%8D%E7%82%B9%E6%8A%95%E5%85%A5%5D%0A%20%20%20%20%20%20%20%20SVC%5B%E6%9C%8D%E5%8A%A1%E5%B1%82%E6%B5%8B%E8%AF%95%20-%20%E6%A0%B8%E5%BF%83%E8%A6%86%E7%9B%96%5D%0A%20%20%20%20%20%20%20%20UNIT2%5B%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%20-%20%E7%BA%AF%E5%87%BD%E6%95%B0%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20%E4%BC%A0%E7%BB%9F%E9%87%91%E5%AD%97%E5%A1%94%20--%3E%7C%E4%BC%98%E5%8C%96%7C%20%E6%87%92%E4%BA%BA%E9%87%91%E5%AD%97%E5%A1%94%0A"})]),fallback:e(()=>[...t[0]||(t[0]=[n(" Loading... ",-1)])]),_:1})),t[2]||(t[2]=d('<h2 id="核心策略-聚焦服务层与-api" tabindex="-1">核心策略：聚焦服务层与 API <a class="header-anchor" href="#核心策略-聚焦服务层与-api" aria-label="Permalink to &quot;核心策略：聚焦服务层与 API&quot;">​</a></h2><table tabindex="0"><thead><tr><th>测试类型</th><th>投入比例</th><th>覆盖目标</th><th>ROI</th></tr></thead><tbody><tr><td>单元测试</td><td>20%</td><td>纯函数、工具函数</td><td>中</td></tr><tr><td>服务层测试</td><td>40%</td><td>业务逻辑、数据处理</td><td>高</td></tr><tr><td>API 测试</td><td>30%</td><td>接口契约、边界条件</td><td>高</td></tr><tr><td>E2E 测试</td><td>10%</td><td>核心用户流程</td><td>中</td></tr></tbody></table><h2 id="为什么这样分配" tabindex="-1">为什么这样分配 <a class="header-anchor" href="#为什么这样分配" aria-label="Permalink to &quot;为什么这样分配&quot;">​</a></h2><ol><li><strong>服务层是业务核心</strong>：所有业务规则都在这里，测好服务层就等于测好了核心逻辑</li><li><strong>API 是对外契约</strong>：API 稳定，前端、移动端、第三方都能放心对接</li><li><strong>单元测试聚焦纯函数</strong>：有副作用的代码用集成测试覆盖更实际</li><li><strong>E2E 只保核心流程</strong>：登录、支付、核心业务流程，其他交给手动测试</li></ol><h2 id="本节导览" tabindex="-1">本节导览 <a class="header-anchor" href="#本节导览" aria-label="Permalink to &quot;本节导览&quot;">​</a></h2><table tabindex="0"><thead><tr><th>小节</th><th>内容</th></tr></thead><tbody><tr><td>9.1.1</td><td>测试分层：理解单元、集成、E2E 的边界</td></tr><tr><td>9.1.2</td><td>测试优先级：投入产出比分析</td></tr><tr><td>9.1.3</td><td>服务层测试：业务逻辑验证重点</td></tr><tr><td>9.1.4</td><td>API 测试：接口契约与边界条件</td></tr></tbody></table><h2 id="本节小结" tabindex="-1">本节小结 <a class="header-anchor" href="#本节小结" aria-label="Permalink to &quot;本节小结&quot;">​</a></h2><p>懒人金字塔的核心不是偷懒，而是<strong>把有限的精力投入到最有价值的地方</strong>。服务层测试保障业务逻辑正确，API 测试保障接口契约稳定，这两者加起来就能覆盖 80% 的常见问题。</p>',8))])}const m=o(h,[["render",B]]);export{P as __pageData,m as default};
