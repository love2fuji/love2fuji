import{_ as E,C as r,c as d,o as t,j as i,b as p,a3 as l,a,w as n,G as k,a4 as e}from"./chunks/framework.CUcrqFol.js";const u=JSON.parse('{"title":"9.1.2 时间花在刀刃上——测试优先级：投入产出比分析","description":"9.1.2 时间花在刀刃上——测试优先级：投入产出比分析 **测试的目的不是追求 100% 覆盖率，而是用最少的投入获得最大的质量保障。** 测试投入产出比矩阵 优先级排序原则 第一优先级：服务层业务逻辑 服务层是业务规则的聚集地，bug 在这里造成的损失最大。 第二优先级：API 接口契约 API 是对外承诺，一旦变","frontmatter":{"title":"9.1.2 时间花在刀刃上——测试优先级：投入产出比分析","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/09-testing/9.1-testing-strategy/9.1.2-prioritization.md","filePath":"Advanced-old/09-testing/9.1-testing-strategy/9.1.2-prioritization.md","lastUpdated":1766168364000}'),g={name:"Advanced-old/09-testing/9.1-testing-strategy/9.1.2-prioritization.md"};function y(F,s,c,o,B,C){const h=r("Mermaid");return t(),d("div",null,[s[2]||(s[2]=i("h1",{id:"_9-1-2-时间花在刀刃上——测试优先级-投入产出比分析",tabindex:"-1"},[a("9.1.2 时间花在刀刃上——测试优先级：投入产出比分析 "),i("a",{class:"header-anchor",href:"#_9-1-2-时间花在刀刃上——测试优先级-投入产出比分析","aria-label":'Permalink to "9.1.2 时间花在刀刃上——测试优先级：投入产出比分析"'},"​")],-1)),s[3]||(s[3]=i("p",null,[i("strong",null,"测试的目的不是追求 100% 覆盖率，而是用最少的投入获得最大的质量保障。")],-1)),s[4]||(s[4]=i("h2",{id:"测试投入产出比矩阵",tabindex:"-1"},[a("测试投入产出比矩阵 "),i("a",{class:"header-anchor",href:"#测试投入产出比矩阵","aria-label":'Permalink to "测试投入产出比矩阵"'},"​")],-1)),(t(),p(e,null,{default:n(()=>[k(h,{id:"mermaid-9",class:"mermaid",graph:"quadrantChart%0A%20%20%20%20title%20%E6%B5%8B%E8%AF%95%E4%BC%98%E5%85%88%E7%BA%A7%E7%9F%A9%E9%98%B5%0A%20%20%20%20x-axis%20%E7%BC%96%E5%86%99%E6%88%90%E6%9C%AC%E4%BD%8E%20--%3E%20%E7%BC%96%E5%86%99%E6%88%90%E6%9C%AC%E9%AB%98%0A%20%20%20%20y-axis%20%E5%8F%91%E7%8E%B0%E9%97%AE%E9%A2%98%E4%BB%B7%E5%80%BC%E4%BD%8E%20--%3E%20%E5%8F%91%E7%8E%B0%E9%97%AE%E9%A2%98%E4%BB%B7%E5%80%BC%E9%AB%98%0A%20%20%20%20quadrant-1%20%E9%87%8D%E7%82%B9%E6%8A%95%E5%85%A5%0A%20%20%20%20quadrant-2%20%E9%80%89%E6%8B%A9%E6%80%A7%E6%8A%95%E5%85%A5%0A%20%20%20%20quadrant-3%20%E5%8F%AF%E4%BB%A5%E8%B7%B3%E8%BF%87%0A%20%20%20%20quadrant-4%20%E4%BC%98%E5%85%88%E7%BC%96%E5%86%99%0A%20%20%20%20%E6%9C%8D%E5%8A%A1%E5%B1%82%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91%3A%20%5B0.3%2C%200.9%5D%0A%20%20%20%20API%E6%8E%A5%E5%8F%A3%E5%A5%91%E7%BA%A6%3A%20%5B0.4%2C%200.85%5D%0A%20%20%20%20%E7%BA%AF%E5%87%BD%E6%95%B0%E5%B7%A5%E5%85%B7%E7%B1%BB%3A%20%5B0.2%2C%200.5%5D%0A%20%20%20%20UI%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%3A%20%5B0.7%2C%200.2%5D%0A%20%20%20%20%E6%A0%B8%E5%BF%83%E7%94%A8%E6%88%B7%E6%B5%81%E7%A8%8BE2E%3A%20%5B0.85%2C%200.95%5D%0A%20%20%20%20%E8%BE%B9%E7%BC%98%E5%9C%BA%E6%99%AFE2E%3A%20%5B0.9%2C%200.3%5D%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[a(" Loading... ",-1)])]),_:1})),s[5]||(s[5]=l(`<h2 id="优先级排序原则" tabindex="-1">优先级排序原则 <a class="header-anchor" href="#优先级排序原则" aria-label="Permalink to &quot;优先级排序原则&quot;">​</a></h2><h3 id="第一优先级-服务层业务逻辑" tabindex="-1">第一优先级：服务层业务逻辑 <a class="header-anchor" href="#第一优先级-服务层业务逻辑" aria-label="Permalink to &quot;第一优先级：服务层业务逻辑&quot;">​</a></h3><p>服务层是业务规则的聚集地，bug 在这里造成的损失最大。</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 高优先级测试：订单金额计算</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">describe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OrderService.calculateTotal&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;应正确计算订单总额（含折扣）&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> total</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">calculateTotal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      items: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, quantity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { price: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, quantity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      discountCode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SAVE10&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 250 * 0.9 = 225</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(total).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">225</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;应处理库存不足的边界情况&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      orderService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ productId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;prod-1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, quantity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">999</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ).rejects.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toThrow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;库存不足&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="第二优先级-api-接口契约" tabindex="-1">第二优先级：API 接口契约 <a class="header-anchor" href="#第二优先级-api-接口契约" aria-label="Permalink to &quot;第二优先级：API 接口契约&quot;">​</a></h3><p>API 是对外承诺，一旦变更影响面广。</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 高优先级测试：API 响应格式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">describe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;POST /api/orders&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;应返回标准响应格式&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(app)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/orders&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ items: [{ productId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;prod-1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, quantity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }] });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.status).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">201</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.body).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toMatchObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      success: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      data: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        id: expect.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        status: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;PENDING&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        createdAt: expect.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;应正确处理参数校验失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(app)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/orders&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ items: [] }); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 空数组</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.status).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.body.error.code).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;VALIDATION_ERROR&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="第三优先级-纯函数工具类" tabindex="-1">第三优先级：纯函数工具类 <a class="header-anchor" href="#第三优先级-纯函数工具类" aria-label="Permalink to &quot;第三优先级：纯函数工具类&quot;">​</a></h3><p>投入产出比高，编写简单，运行快速。</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 中优先级测试：工具函数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">describe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;formatCurrency&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;应正确格式化人民币&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">formatCurrency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1234.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CNY&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;¥1,234.50&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">formatCurrency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CNY&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;¥0.00&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;应处理负数&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">formatCurrency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CNY&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-¥100.00&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="低优先级-ui-组件与样式" tabindex="-1">低优先级：UI 组件与样式 <a class="header-anchor" href="#低优先级-ui-组件与样式" aria-label="Permalink to &quot;低优先级：UI 组件与样式&quot;">​</a></h3><p>UI 变化频繁，测试维护成本高，优先考虑视觉回归测试。</p><h2 id="判断测试价值的快速检查表" tabindex="-1">判断测试价值的快速检查表 <a class="header-anchor" href="#判断测试价值的快速检查表" aria-label="Permalink to &quot;判断测试价值的快速检查表&quot;">​</a></h2><table tabindex="0"><thead><tr><th>检查项</th><th>高价值</th><th>低价值</th></tr></thead><tbody><tr><td>涉及金钱计算</td><td>✅</td><td></td></tr><tr><td>涉及用户权限</td><td>✅</td><td></td></tr><tr><td>涉及数据持久化</td><td>✅</td><td></td></tr><tr><td>对外 API 接口</td><td>✅</td><td></td></tr><tr><td>纯展示性 UI</td><td></td><td>✅</td></tr><tr><td>临时/实验性功能</td><td></td><td>✅</td></tr><tr><td>频繁变化的代码</td><td></td><td>✅</td></tr></tbody></table><h2 id="测试覆盖率的正确理解" tabindex="-1">测试覆盖率的正确理解 <a class="header-anchor" href="#测试覆盖率的正确理解" aria-label="Permalink to &quot;测试覆盖率的正确理解&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                  覆盖率的真相                         │</span></span>
<span class="line"><span>├─────────────────────────────────────────────────────┤</span></span>
<span class="line"><span>│                                                     │</span></span>
<span class="line"><span>│  ❌ 误区：追求 100% 覆盖率                            │</span></span>
<span class="line"><span>│  ✅ 正解：核心路径 100%，边缘场景 50%                  │</span></span>
<span class="line"><span>│                                                     │</span></span>
<span class="line"><span>│  代码覆盖率 80% + 业务场景覆盖率 100%                  │</span></span>
<span class="line"><span>│  = 实际质量保障 &gt; 95%                                │</span></span>
<span class="line"><span>│                                                     │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────┘</span></span></code></pre></div><h2 id="实战-如何识别高价值测试点" tabindex="-1">实战：如何识别高价值测试点 <a class="header-anchor" href="#实战-如何识别高价值测试点" aria-label="Permalink to &quot;实战：如何识别高价值测试点&quot;">​</a></h2><h3 id="场景分析法" tabindex="-1">场景分析法 <a class="header-anchor" href="#场景分析法" aria-label="Permalink to &quot;场景分析法&quot;">​</a></h3><ol><li><strong>问自己</strong>：如果这段代码出错，最坏的结果是什么？</li><li><strong>评估影响</strong>：影响用户数量 × 问题严重程度</li><li><strong>确定优先级</strong>：影响越大，测试优先级越高</li></ol><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 高影响场景：支付金额计算</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 如果出错 → 多收/少收用户的钱 → 必须测试</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 低影响场景：用户头像圆角</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 如果出错 → 稍微丑一点 → 可以不测</span></span></code></pre></div><h3 id="变更频率法" tabindex="-1">变更频率法 <a class="header-anchor" href="#变更频率法" aria-label="Permalink to &quot;变更频率法&quot;">​</a></h3>`,21)),(t(),p(e,null,{default:n(()=>[k(h,{id:"mermaid-168",class:"mermaid",graph:"graph%20LR%0A%20%20%20%20A%5B%E4%BB%A3%E7%A0%81%E5%8F%98%E6%9B%B4%E9%A2%91%E7%8E%87%5D%20--%3E%20B%7B%E9%A2%91%E7%B9%81%E5%8F%98%E6%9B%B4%3F%7D%0A%20%20%20%20B%20--%3E%7C%E6%98%AF%7C%20C%5B%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95%E4%BC%98%E5%85%88%5D%0A%20%20%20%20B%20--%3E%7C%E5%90%A6%7C%20D%5B%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E8%B6%B3%E5%A4%9F%5D%0A%20%20%20%20%0A%20%20%20%20C%20--%3E%20E%5B%E6%B5%8B%E8%AF%95%E7%B2%92%E5%BA%A6%E7%B2%97%E4%B8%80%E4%BA%9B%5D%0A%20%20%20%20D%20--%3E%20F%5B%E6%B5%8B%E8%AF%95%E7%B2%92%E5%BA%A6%E7%BB%86%E4%B8%80%E4%BA%9B%5D%0A"})]),fallback:n(()=>[...s[1]||(s[1]=[a(" Loading... ",-1)])]),_:1})),s[6]||(s[6]=l(`<ul><li><strong>频繁变更的代码</strong>：使用粗粒度的集成测试，减少维护成本</li><li><strong>稳定的核心逻辑</strong>：使用细粒度的单元测试，精确定位问题</li></ul><h2 id="ai-协作指南" tabindex="-1">AI 协作指南 <a class="header-anchor" href="#ai-协作指南" aria-label="Permalink to &quot;AI 协作指南&quot;">​</a></h2><p>让 AI 帮你识别测试优先级：</p><blockquote><p><strong>核心意图</strong>：分析代码并推荐测试优先级</p><p><strong>提示词模板</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>分析以下代码，按照测试价值从高到低排序，并说明理由：</span></span>
<span class="line"><span>1. 哪些函数/方法必须测试</span></span>
<span class="line"><span>2. 哪些可以选择性测试</span></span>
<span class="line"><span>3. 哪些可以暂时跳过</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[粘贴代码]</span></span></code></pre></div></blockquote><p><strong>关键术语</strong>：<code>业务关键路径</code>、<code>边界条件</code>、<code>错误处理</code>、<code>数据完整性</code></p><h2 id="本节小结" tabindex="-1">本节小结 <a class="header-anchor" href="#本节小结" aria-label="Permalink to &quot;本节小结&quot;">​</a></h2><p>测试优先级的核心原则是：<strong>先保障核心业务正确，再逐步扩展覆盖范围</strong>。把 80% 的测试精力投入到 20% 最关键的代码上，这就是懒人测试策略的精髓。记住，没有测试的代码不一定有 bug，但有测试的关键代码一定更可靠。</p>`,7))])}const b=E(g,[["render",y]]);export{u as __pageData,b as default};
