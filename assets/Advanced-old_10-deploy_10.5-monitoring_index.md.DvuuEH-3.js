import{_ as o,C as p,c as k,o as e,j as a,b as l,a3 as n,a as s,w as i,G as r,a4 as h}from"./chunks/framework.CUcrqFol.js";const m=JSON.parse('{"title":"10.5 网站生病了怎么办——监控与日志：可观测性体系","description":"10.5 网站生病了怎么办——监控与日志：可观测性体系 用户告诉你网站挂了？那你已经晚了。 可观测性三支柱 | 支柱 | 说明 | 回答的问题 | |------|------|------------| | Metrics | 数字化指标 | 发生了什么？多严重？ | | Logs | 事件记录 | 为什么发生？ |","frontmatter":{"title":"10.5 网站生病了怎么办——监控与日志：可观测性体系","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/10-deploy/10.5-monitoring/index.md","filePath":"Advanced-old/10-deploy/10.5-monitoring/index.md","lastUpdated":1766168364000}'),E={name:"Advanced-old/10-deploy/10.5-monitoring/index.md"};function A(c,t,B,g,b,u){const d=p("Mermaid");return e(),k("div",null,[t[2]||(t[2]=a("h1",{id:"_10-5-网站生病了怎么办——监控与日志-可观测性体系",tabindex:"-1"},[s("10.5 网站生病了怎么办——监控与日志：可观测性体系 "),a("a",{class:"header-anchor",href:"#_10-5-网站生病了怎么办——监控与日志-可观测性体系","aria-label":'Permalink to "10.5 网站生病了怎么办——监控与日志：可观测性体系"'},"​")],-1)),t[3]||(t[3]=a("p",null,"用户告诉你网站挂了？那你已经晚了。",-1)),t[4]||(t[4]=a("h2",{id:"可观测性三支柱",tabindex:"-1"},[s("可观测性三支柱 "),a("a",{class:"header-anchor",href:"#可观测性三支柱","aria-label":'Permalink to "可观测性三支柱"'},"​")],-1)),(e(),l(h,null,{default:i(()=>[r(d,{id:"mermaid-9",class:"mermaid",graph:"flowchart%20TB%0A%20%20%20%20subgraph%20%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%0A%20%20%20%20%20%20%20%20A%5BMetrics%20%E6%8C%87%E6%A0%87%5D%20--%3E%20D%5B%E7%B3%BB%E7%BB%9F%E5%81%A5%E5%BA%B7%5D%0A%20%20%20%20%20%20%20%20B%5BLogs%20%E6%97%A5%E5%BF%97%5D%20--%3E%20D%0A%20%20%20%20%20%20%20%20C%5BTraces%20%E9%93%BE%E8%B7%AF%5D%20--%3E%20D%0A%20%20%20%20end%0A"})]),fallback:i(()=>[...t[0]||(t[0]=[s(" Loading... ",-1)])]),_:1})),t[5]||(t[5]=n('<table tabindex="0"><thead><tr><th>支柱</th><th>说明</th><th>回答的问题</th></tr></thead><tbody><tr><td>Metrics</td><td>数字化指标</td><td>发生了什么？多严重？</td></tr><tr><td>Logs</td><td>事件记录</td><td>为什么发生？</td></tr><tr><td>Traces</td><td>请求链路</td><td>在哪里发生？</td></tr></tbody></table><h2 id="为什么需要监控" tabindex="-1">为什么需要监控 <a class="header-anchor" href="#为什么需要监控" aria-label="Permalink to &quot;为什么需要监控&quot;">​</a></h2><table tabindex="0"><thead><tr><th>场景</th><th>没有监控</th><th>有监控</th></tr></thead><tbody><tr><td>网站挂了</td><td>用户投诉才知道</td><td>自动告警，快速响应</td></tr><tr><td>性能下降</td><td>凭感觉猜测</td><td>数据定位瓶颈</td></tr><tr><td>错误追踪</td><td>翻日志找半天</td><td>一键定位问题</td></tr><tr><td>容量规划</td><td>拍脑袋扩容</td><td>基于数据决策</td></tr></tbody></table><h2 id="监控体系架构" tabindex="-1">监控体系架构 <a class="header-anchor" href="#监控体系架构" aria-label="Permalink to &quot;监控体系架构&quot;">​</a></h2>',4)),(e(),l(h,null,{default:i(()=>[r(d,{id:"mermaid-127",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20subgraph%20%E5%BA%94%E7%94%A8%E5%B1%82%0A%20%20%20%20%20%20%20%20A%5BNext.js%5D%0A%20%20%20%20%20%20%20%20B%5BNestJS%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%E9%87%87%E9%9B%86%E5%B1%82%0A%20%20%20%20%20%20%20%20C%5B%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5%5D%0A%20%20%20%20%20%20%20%20D%5B%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86%5D%0A%20%20%20%20%20%20%20%20E%5B%E6%8C%87%E6%A0%87%E4%B8%8A%E6%8A%A5%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%E5%AD%98%E5%82%A8%E5%B1%82%0A%20%20%20%20%20%20%20%20F%5B%E6%97%A5%E5%BF%97%E5%AD%98%E5%82%A8%5D%0A%20%20%20%20%20%20%20%20G%5B%E6%8C%87%E6%A0%87%E5%AD%98%E5%82%A8%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20%E5%B1%95%E7%A4%BA%E5%B1%82%0A%20%20%20%20%20%20%20%20H%5B%E4%BB%AA%E8%A1%A8%E7%9B%98%5D%0A%20%20%20%20%20%20%20%20I%5B%E5%91%8A%E8%AD%A6%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20A%20--%3E%20C%20%26%20D%20%26%20E%0A%20%20%20%20B%20--%3E%20C%20%26%20D%20%26%20E%0A%20%20%20%20C%20--%3E%20G%0A%20%20%20%20D%20--%3E%20F%0A%20%20%20%20E%20--%3E%20G%0A%20%20%20%20F%20--%3E%20H%0A%20%20%20%20G%20--%3E%20H%0A%20%20%20%20H%20--%3E%20I%0A"})]),fallback:i(()=>[...t[1]||(t[1]=[s(" Loading... ",-1)])]),_:1})),t[6]||(t[6]=n(`<h2 id="本节目录" tabindex="-1">本节目录 <a class="header-anchor" href="#本节目录" aria-label="Permalink to &quot;本节目录&quot;">​</a></h2><ul><li><strong>10.5.1 网站还活着吗</strong> — 健康检查与基础指标</li><li><strong>10.5.2 日志太多了怎么办</strong> — 结构化日志与管理</li><li><strong>10.5.3 一出错就通知我</strong> — 错误追踪与告警</li><li><strong>10.5.4 性能瓶颈在哪</strong> — 性能分析与优化</li></ul><h2 id="适合独立开发者的方案" tabindex="-1">适合独立开发者的方案 <a class="header-anchor" href="#适合独立开发者的方案" aria-label="Permalink to &quot;适合独立开发者的方案&quot;">​</a></h2><p>不需要复杂的 ELK Stack，简单方案也够用：</p><table tabindex="0"><thead><tr><th>工具</th><th>用途</th><th>费用</th></tr></thead><tbody><tr><td>1Panel 监控</td><td>服务器资源监控</td><td>免费</td></tr><tr><td>UptimeRobot</td><td>网站可用性监控</td><td>免费/付费</td></tr><tr><td>Sentry</td><td>错误追踪</td><td>免费/付费</td></tr><tr><td>Better Stack</td><td>日志 + 告警</td><td>免费/付费</td></tr><tr><td>Docker 日志</td><td>容器日志查看</td><td>免费</td></tr></tbody></table><h2 id="快速开始" tabindex="-1">快速开始 <a class="header-anchor" href="#快速开始" aria-label="Permalink to &quot;快速开始&quot;">​</a></h2><h3 id="_1-健康检查端点" tabindex="-1">1. 健康检查端点 <a class="header-anchor" href="#_1-健康检查端点" aria-label="Permalink to &quot;1. 健康检查端点&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// NestJS</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;health&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">healthCheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { status: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ok&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, timestamp: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-查看-docker-日志" tabindex="-1">2. 查看 Docker 日志 <a class="header-anchor" href="#_2-查看-docker-日志" aria-label="Permalink to &quot;2. 查看 Docker 日志&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看应用日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app-container</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看所有服务日志</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span></span></code></pre></div><h3 id="_3-配置告警" tabindex="-1">3. 配置告警 <a class="header-anchor" href="#_3-配置告警" aria-label="Permalink to &quot;3. 配置告警&quot;">​</a></h3><p>在 UptimeRobot 创建监控：</p><ul><li>监控地址：<code>https://example.com/api/health</code></li><li>检查间隔：5 分钟</li><li>告警方式：邮件/Webhook</li></ul>`,13))])}const y=o(E,[["render",A]]);export{m as __pageData,y as default};
