import{_ as a,c as n,o as i,a3 as l}from"./chunks/framework.CUcrqFol.js";const g=JSON.parse('{"title":"3.6.2 诊断问题：AI 错在哪里","description":"3.6.2 诊断问题：AI 错在哪里 经过本节学习，你将掌握 使用「三分钟快速诊断法」定位问题 区分「我没说清楚」和「AI 能力不足」 根据问题类型选择正确的应对策略 获得一个诊断决策树 诊断的核心问题 当 AI 输出不符合预期时，你首先要回答一个问题： **是我没说清楚，还是 AI 没做对？** 这个问题的答案，决定","frontmatter":{"title":"3.6.2 诊断问题：AI 错在哪里"},"headers":[],"relativePath":"Basic/03-technique/3.6-debugging-ai/3.6.2-diagnose-problems.md","filePath":"Basic/03-technique/3.6-debugging-ai/3.6.2-diagnose-problems.md","lastUpdated":1765094268000}'),p={name:"Basic/03-technique/3.6-debugging-ai/3.6.2-diagnose-problems.md"};function t(e,s,o,h,d,r){return i(),n("div",null,[...s[0]||(s[0]=[l(`<h1 id="_3-6-2-诊断问题-ai-错在哪里" tabindex="-1">3.6.2 诊断问题：AI 错在哪里 <a class="header-anchor" href="#_3-6-2-诊断问题-ai-错在哪里" aria-label="Permalink to &quot;3.6.2 诊断问题：AI 错在哪里&quot;">​</a></h1><h2 id="经过本节学习-你将掌握" tabindex="-1">经过本节学习，你将掌握 <a class="header-anchor" href="#经过本节学习-你将掌握" aria-label="Permalink to &quot;经过本节学习，你将掌握&quot;">​</a></h2><ul><li>使用「三分钟快速诊断法」定位问题</li><li>区分「我没说清楚」和「AI 能力不足」</li><li>根据问题类型选择正确的应对策略</li><li>获得一个诊断决策树</li></ul><h2 id="诊断的核心问题" tabindex="-1">诊断的核心问题 <a class="header-anchor" href="#诊断的核心问题" aria-label="Permalink to &quot;诊断的核心问题&quot;">​</a></h2><p>当 AI 输出不符合预期时，你首先要回答一个问题：</p><blockquote><p><strong>是我没说清楚，还是 AI 没做对？</strong></p></blockquote><p>这个问题的答案，决定了你下一步应该做什么：</p><ul><li>如果是你没说清楚 → 补充上下文，重新描述</li><li>如果是 AI 没做对 → 换种问法，或者换个策略</li></ul><h2 id="三分钟快速诊断法" tabindex="-1">三分钟快速诊断法 <a class="header-anchor" href="#三分钟快速诊断法" aria-label="Permalink to &quot;三分钟快速诊断法&quot;">​</a></h2><p>在深入分析之前，先用这三步快速排查，能捕获约 60% 的常见问题：</p><h3 id="第一步-运行代码检查-30-秒" tabindex="-1">第一步：运行代码检查（30 秒） <a class="header-anchor" href="#第一步-运行代码检查-30-秒" aria-label="Permalink to &quot;第一步：运行代码检查（30 秒）&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果是 JavaScript/TypeScript 项目</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eslint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">文件</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">名</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 检查语法和格式问题</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tsc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --noEmit</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 检查类型错误（如果用 TypeScript）</span></span></code></pre></div><p><strong>能发现的问题</strong>：</p><ul><li>语法错误（少了括号、拼错关键字）</li><li>类型不匹配</li><li>未定义的变量</li></ul><h3 id="第二步-检查依赖和-api-60-秒" tabindex="-1">第二步：检查依赖和 API（60 秒） <a class="header-anchor" href="#第二步-检查依赖和-api-60-秒" aria-label="Permalink to &quot;第二步：检查依赖和 API（60 秒）&quot;">​</a></h3><p>对照代码中的 import 语句，检查：</p><ul><li>[ ] 引入的包是否存在？（用 3.6.1 中的验证方法）</li><li>[ ] 调用的方法是否真的存在于该包中？</li><li>[ ] 版本是否匹配？</li></ul><p><strong>能发现的问题</strong>：</p><ul><li>包幻觉</li><li>API 幻觉</li><li>版本兼容问题</li></ul><h3 id="第三步-运行现有测试-90-秒" tabindex="-1">第三步：运行现有测试（90 秒） <a class="header-anchor" href="#第三步-运行现有测试-90-秒" aria-label="Permalink to &quot;第三步：运行现有测试（90 秒）&quot;">​</a></h3><p>如果项目有测试用例：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 或你项目的测试命令</span></span></code></pre></div><p><strong>能发现的问题</strong>：</p><ul><li>行为变更（原来能跑的功能被改坏了）</li><li>逻辑错误</li><li>边界情况处理不当</li></ul><h2 id="根因分析四象限" tabindex="-1">根因分析四象限 <a class="header-anchor" href="#根因分析四象限" aria-label="Permalink to &quot;根因分析四象限&quot;">​</a></h2><p>如果三分钟诊断没有定位到问题，用这个四象限来分析根本原因：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>                    我说得清楚</span></span>
<span class="line"><span>                        ↑</span></span>
<span class="line"><span>          ┌─────────────┼─────────────┐</span></span>
<span class="line"><span>          │             │             │</span></span>
<span class="line"><span>          │   AI 出错   │  补充上下文 │</span></span>
<span class="line"><span> 简单任务 │  → 换问法   │  → 重新描述 │  复杂任务</span></span>
<span class="line"><span>          │             │             │</span></span>
<span class="line"><span>          ├─────────────┼─────────────┤</span></span>
<span class="line"><span>          │             │             │</span></span>
<span class="line"><span>          │  拆分任务   │ 重描述+拆分 │</span></span>
<span class="line"><span>          │  → 分步做   │  → 降低复杂度│</span></span>
<span class="line"><span>          │             │             │</span></span>
<span class="line"><span>          └─────────────┴─────────────┘</span></span>
<span class="line"><span>                        ↓</span></span>
<span class="line"><span>                    我没说清楚</span></span></code></pre></div><h3 id="象限一-简单任务-我说得清楚-→-ai-出错" tabindex="-1">象限一：简单任务 + 我说得清楚 → AI 出错 <a class="header-anchor" href="#象限一-简单任务-我说得清楚-→-ai-出错" aria-label="Permalink to &quot;象限一：简单任务 + 我说得清楚 → AI 出错&quot;">​</a></h3><p><strong>特征</strong>：</p><ul><li>任务很明确，不应该有歧义</li><li>你给的信息足够完整</li><li>但 AI 的输出明显不对</li></ul><p><strong>应对策略</strong>：</p><ul><li>换一种问法重新描述</li><li>给出正确示例让 AI 参考</li><li>尝试不同的 AI 工具</li></ul><p><strong>示例</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>原提示词：写一个判断闰年的函数</span></span>
<span class="line"><span></span></span>
<span class="line"><span>问题：AI 给的逻辑不对</span></span>
<span class="line"><span></span></span>
<span class="line"><span>换种问法：</span></span>
<span class="line"><span>&quot;请写一个判断闰年的 JavaScript 函数。</span></span>
<span class="line"><span>闰年规则：</span></span>
<span class="line"><span>1. 能被 4 整除且不能被 100 整除，是闰年</span></span>
<span class="line"><span>2. 能被 400 整除，也是闰年</span></span>
<span class="line"><span>请严格按照这个规则实现。&quot;</span></span></code></pre></div><h3 id="象限二-简单任务-我没说清楚-→-补充上下文" tabindex="-1">象限二：简单任务 + 我没说清楚 → 补充上下文 <a class="header-anchor" href="#象限二-简单任务-我没说清楚-→-补充上下文" aria-label="Permalink to &quot;象限二：简单任务 + 我没说清楚 → 补充上下文&quot;">​</a></h3><p><strong>特征</strong>：</p><ul><li>任务本身不复杂</li><li>但你假设了 AI 知道某些背景</li><li>AI 按自己的理解做了，和你想的不一样</li></ul><p><strong>应对策略</strong>：</p><ul><li>补充项目背景</li><li>明确技术栈和约束</li><li>说明你期望的输出格式</li></ul><p><strong>示例</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>原提示词：写一个表单验证</span></span>
<span class="line"><span></span></span>
<span class="line"><span>问题：AI 用了你项目没有的验证库</span></span>
<span class="line"><span></span></span>
<span class="line"><span>补充上下文：</span></span>
<span class="line"><span>&quot;我的项目使用 React + Zod 做表单验证。</span></span>
<span class="line"><span>请用 Zod 写一个用户注册表单的验证 schema，包括：</span></span>
<span class="line"><span>- 邮箱格式验证</span></span>
<span class="line"><span>- 密码至少 8 位</span></span>
<span class="line"><span>- 确认密码要一致&quot;</span></span></code></pre></div><h3 id="象限三-复杂任务-我说得清楚-→-拆分任务" tabindex="-1">象限三：复杂任务 + 我说得清楚 → 拆分任务 <a class="header-anchor" href="#象限三-复杂任务-我说得清楚-→-拆分任务" aria-label="Permalink to &quot;象限三：复杂任务 + 我说得清楚 → 拆分任务&quot;">​</a></h3><p><strong>特征</strong>：</p><ul><li>任务涉及多个步骤或模块</li><li>你描述得很清楚</li><li>但 AI 的输出质量不稳定，有些对有些错</li></ul><p><strong>应对策略</strong>：</p><ul><li>把大任务拆成小任务</li><li>一次只让 AI 做一件事</li><li>分步骤完成后再整合</li></ul><p><strong>示例</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>原提示词（太大）：</span></span>
<span class="line"><span>&quot;实现一个完整的用户认证系统，包括注册、登录、找回密码、JWT 令牌管理&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>拆分后：</span></span>
<span class="line"><span>第一轮：&quot;先实现用户注册功能，只需要邮箱和密码&quot;</span></span>
<span class="line"><span>第二轮：&quot;现在加上登录功能，返回 JWT 令牌&quot;</span></span>
<span class="line"><span>第三轮：&quot;加上令牌验证中间件&quot;</span></span>
<span class="line"><span>第四轮：&quot;最后加上找回密码功能&quot;</span></span></code></pre></div><h3 id="象限四-复杂任务-我没说清楚-→-重新描述-拆分" tabindex="-1">象限四：复杂任务 + 我没说清楚 → 重新描述 + 拆分 <a class="header-anchor" href="#象限四-复杂任务-我没说清楚-→-重新描述-拆分" aria-label="Permalink to &quot;象限四：复杂任务 + 我没说清楚 → 重新描述 + 拆分&quot;">​</a></h3><p><strong>特征</strong>：</p><ul><li>任务复杂</li><li>你自己可能也没完全想清楚</li><li>AI 的输出和你想的差很远</li></ul><p><strong>应对策略</strong>：</p><ul><li>先退一步，理清自己的需求</li><li>用 3.4 节学的 PRD 方法整理思路</li><li>然后拆分成小任务逐个完成</li></ul><p><strong>示例</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>原提示词（模糊又复杂）：</span></span>
<span class="line"><span>&quot;帮我做一个类似 Notion 的笔记应用&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>理清需求后：</span></span>
<span class="line"><span>&quot;我想做一个个人笔记应用，MVP 版本只需要：</span></span>
<span class="line"><span>1. 创建/编辑/删除笔记</span></span>
<span class="line"><span>2. 笔记列表页</span></span>
<span class="line"><span>3. 本地存储</span></span>
<span class="line"><span></span></span>
<span class="line"><span>先帮我实现第一个功能：创建和显示笔记列表。</span></span>
<span class="line"><span>技术栈：React + localStorage&quot;</span></span></code></pre></div><h2 id="诊断-prompt-让-ai-复述理解" tabindex="-1">诊断 Prompt：让 AI 复述理解 <a class="header-anchor" href="#诊断-prompt-让-ai-复述理解" aria-label="Permalink to &quot;诊断 Prompt：让 AI 复述理解&quot;">​</a></h2><p>在开始任务之前，或者发现问题之后，可以用这个 Prompt 让 AI 复述它的理解：</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">在继续之前，请先回答以下问题：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">1.</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold;"> **你理解的任务目标是什么？**</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   （用一句话描述）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">2.</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold;"> **你计划使用什么技术方案？**</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   （列出关键技术点）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">3.</span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold;"> **有哪些地方你不确定，需要我澄清？**</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   （如果没有就说&quot;无&quot;）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">请先回答这些问题，确认理解一致后再开始写代码。</span></span></code></pre></div><p><strong>为什么这招有效</strong>：</p><ul><li>提前暴露 AI 的误解</li><li>让你在写代码前就发现问题</li><li>比事后修改成本低得多</li></ul><h2 id="常见问题的快速定位" tabindex="-1">常见问题的快速定位 <a class="header-anchor" href="#常见问题的快速定位" aria-label="Permalink to &quot;常见问题的快速定位&quot;">​</a></h2><table tabindex="0"><thead><tr><th>症状</th><th>最可能的原因</th><th>下一步</th></tr></thead><tbody><tr><td>代码无法运行，报语法错误</td><td>AI 生成了不完整的代码</td><td>让 AI 给出完整代码</td></tr><tr><td>运行时报 &quot;undefined&quot;</td><td>缺少变量定义或异步问题</td><td>检查数据流，补充初始化</td></tr><tr><td>功能和描述不符</td><td>AI 误解了需求</td><td>用更具体的语言重新描述</td></tr><tr><td>引入了不认识的库</td><td>AI 过度发挥</td><td>明确约束，指定只用某些库</td></tr><tr><td>代码能跑但结果不对</td><td>逻辑幻觉</td><td>用边界测试验证，让 AI 自查</td></tr><tr><td>编译报类型错误</td><td>API 幻觉或版本问题</td><td>查官方文档确认 API</td></tr><tr><td>改了这里坏了那里</td><td>任务太大，上下文丢失</td><td>拆分任务，分步进行</td></tr></tbody></table><h2 id="本节要点" tabindex="-1">本节要点 <a class="header-anchor" href="#本节要点" aria-label="Permalink to &quot;本节要点&quot;">​</a></h2><p>✓ <strong>核心问题</strong>：先判断是「我没说清楚」还是「AI 没做对」</p><p>✓ <strong>三分钟诊断</strong>：运行检查 → 依赖验证 → 测试运行，捕获 60% 问题</p><p>✓ <strong>四象限分析</strong>：根据任务复杂度 × 描述清晰度，选择不同策略</p><p>✓ <strong>复述技巧</strong>：让 AI 在动手前先说明理解，提前发现偏差</p><p>定位了问题之后，下一节我们来学习具体的修正策略——怎么让 AI 把代码改对。</p>`,68)])])}const u=a(p,[["render",t]]);export{g as __pageData,u as default};
