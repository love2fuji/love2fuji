import{_ as k,C as d,c as r,o as i,a3 as n,b as p,w as a,a as l,G as h,a4 as e}from"./chunks/framework.CUcrqFol.js";const b=JSON.parse('{"title":"2.1.2 文件目录就是网页路由——App Router 架构：文件系统路由与嵌套布局","description":"2.1.2 文件目录就是网页路由——App Router 架构 本质还原 App Router 的本质是**文件系统到 URL 的映射**。创建一个文件夹，就是创建一个路由段；在文件夹中放入 ，这个路由就能被访问。 可视化解构：目录结构与 URL 核心约定文件 App Router 中的每个文件夹可以包含以下约定文件：","frontmatter":{"title":"2.1.2 文件目录就是网页路由——App Router 架构：文件系统路由与嵌套布局","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/02-tech-stack/2.1-architecture/2.1.2-app-router.md","filePath":"Advanced-old/02-tech-stack/2.1-architecture/2.1.2-app-router.md","lastUpdated":1766168364000}'),E={name:"Advanced-old/02-tech-stack/2.1-architecture/2.1.2-app-router.md"};function g(o,s,c,y,u,A){const t=d("Mermaid");return i(),r("div",null,[s[2]||(s[2]=n(`<h1 id="_2-1-2-文件目录就是网页路由——app-router-架构" tabindex="-1">2.1.2 文件目录就是网页路由——App Router 架构 <a class="header-anchor" href="#_2-1-2-文件目录就是网页路由——app-router-架构" aria-label="Permalink to &quot;2.1.2 文件目录就是网页路由——App Router 架构&quot;">​</a></h1><h2 id="本质还原" tabindex="-1">本质还原 <a class="header-anchor" href="#本质还原" aria-label="Permalink to &quot;本质还原&quot;">​</a></h2><p>App Router 的本质是<strong>文件系统到 URL 的映射</strong>。创建一个文件夹，就是创建一个路由段；在文件夹中放入 <code>page.tsx</code>，这个路由就能被访问。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>传统路由：在代码中配置 URL → 组件的映射</span></span>
<span class="line"><span>App Router：文件夹结构 = URL 结构</span></span></code></pre></div><h2 id="可视化解构-目录结构与-url" tabindex="-1">可视化解构：目录结构与 URL <a class="header-anchor" href="#可视化解构-目录结构与-url" aria-label="Permalink to &quot;可视化解构：目录结构与 URL&quot;">​</a></h2>`,5)),(i(),p(e,null,{default:a(()=>[h(t,{id:"mermaid-13",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20subgraph%20Files%5B%22%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%22%5D%0A%20%20%20%20%20%20%20%20direction%20TB%0A%20%20%20%20%20%20%20%20app%5B%22app%2F%22%5D%0A%20%20%20%20%20%20%20%20app%20--%3E%20page1%5B%22page.tsx%22%5D%0A%20%20%20%20%20%20%20%20app%20--%3E%20about%5B%22about%2F%22%5D%0A%20%20%20%20%20%20%20%20about%20--%3E%20page2%5B%22page.tsx%22%5D%0A%20%20%20%20%20%20%20%20app%20--%3E%20blog%5B%22blog%2F%22%5D%0A%20%20%20%20%20%20%20%20blog%20--%3E%20slug%5B%22%5Bslug%5D%2F%22%5D%0A%20%20%20%20%20%20%20%20slug%20--%3E%20page3%5B%22page.tsx%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20subgraph%20URLs%5B%22URL%20%E8%B7%AF%E7%94%B1%22%5D%0A%20%20%20%20%20%20%20%20direction%20TB%0A%20%20%20%20%20%20%20%20url1%5B%22%2F%22%5D%0A%20%20%20%20%20%20%20%20url2%5B%22%2Fabout%22%5D%0A%20%20%20%20%20%20%20%20url3%5B%22%2Fblog%2Fhello-world%22%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20page1%20-.-%3E%20url1%0A%20%20%20%20page2%20-.-%3E%20url2%0A%20%20%20%20page3%20-.-%3E%20url3%0A"})]),fallback:a(()=>[...s[0]||(s[0]=[l(" Loading... ",-1)])]),_:1})),s[3]||(s[3]=n(`<h2 id="核心约定文件" tabindex="-1">核心约定文件 <a class="header-anchor" href="#核心约定文件" aria-label="Permalink to &quot;核心约定文件&quot;">​</a></h2><p>App Router 中的每个文件夹可以包含以下约定文件：</p><table tabindex="0"><thead><tr><th>文件名</th><th>作用</th><th>是否必需</th></tr></thead><tbody><tr><td><code>page.tsx</code></td><td>路由的 UI 内容</td><td>路由可访问则必需</td></tr><tr><td><code>layout.tsx</code></td><td>共享布局，子路由复用</td><td>可选</td></tr><tr><td><code>loading.tsx</code></td><td>加载状态 UI</td><td>可选</td></tr><tr><td><code>error.tsx</code></td><td>错误处理 UI</td><td>可选</td></tr><tr><td><code>not-found.tsx</code></td><td>404 页面</td><td>可选</td></tr><tr><td><code>route.ts</code></td><td>API 端点</td><td>与 page.tsx 互斥</td></tr></tbody></table><h3 id="最小目录结构" tabindex="-1">最小目录结构 <a class="header-anchor" href="#最小目录结构" aria-label="Permalink to &quot;最小目录结构&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>├── layout.tsx      # 根布局（必需）</span></span>
<span class="line"><span>├── page.tsx        # 首页</span></span>
<span class="line"><span>├── globals.css     # 全局样式</span></span>
<span class="line"><span>└── about/</span></span>
<span class="line"><span>    └── page.tsx    # /about 页面</span></span></code></pre></div><h2 id="嵌套布局-最强大的特性" tabindex="-1">嵌套布局：最强大的特性 <a class="header-anchor" href="#嵌套布局-最强大的特性" aria-label="Permalink to &quot;嵌套布局：最强大的特性&quot;">​</a></h2><p>布局是 App Router 最强大的特性之一。它允许你在不同层级共享 UI，且<strong>切换路由时布局不会重新渲染</strong>。</p>`,7)),(i(),p(e,null,{default:a(()=>[h(t,{id:"mermaid-113",class:"mermaid",graph:"flowchart%20TB%0A%20%20%20%20subgraph%20RootLayout%5B%22%E6%A0%B9%E5%B8%83%E5%B1%80%20app%2Flayout.tsx%22%5D%0A%20%20%20%20%20%20%20%20Header%5B%22Header%22%5D%0A%20%20%20%20%20%20%20%20subgraph%20DashboardLayout%5B%22Dashboard%20%E5%B8%83%E5%B1%80%20app%2Fdashboard%2Flayout.tsx%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20Sidebar%5B%22Sidebar%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20subgraph%20Page%5B%22%E9%A1%B5%E9%9D%A2%E5%86%85%E5%AE%B9%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Content%5B%22page.tsx%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20Footer%5B%22Footer%22%5D%0A%20%20%20%20end%0A"})]),fallback:a(()=>[...s[1]||(s[1]=[l(" Loading... ",-1)])]),_:1})),s[4]||(s[4]=n(`<h3 id="布局代码示例" tabindex="-1">布局代码示例 <a class="header-anchor" href="#布局代码示例" aria-label="Permalink to &quot;布局代码示例&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app/layout.tsx - 根布局</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RootLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  children</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> React</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReactNode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">html lang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;zh&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Header </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}  {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 子路由内容插入这里 */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Footer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      &lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app/dashboard/layout.tsx - Dashboard 布局</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DashboardLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  children</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> React</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReactNode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">div className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flex&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Sidebar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">main className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flex-1&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{children}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">main</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="动态路由" tabindex="-1">动态路由 <a class="header-anchor" href="#动态路由" aria-label="Permalink to &quot;动态路由&quot;">​</a></h2><p>使用方括号 <code>[]</code> 创建动态路由段：</p><table tabindex="0"><thead><tr><th>语法</th><th>示例文件</th><th>匹配 URL</th></tr></thead><tbody><tr><td><code>[slug]</code></td><td><code>blog/[slug]/page.tsx</code></td><td><code>/blog/hello</code></td></tr><tr><td><code>[...slug]</code></td><td><code>docs/[...slug]/page.tsx</code></td><td><code>/docs/a/b/c</code></td></tr><tr><td><code>[[...slug]]</code></td><td><code>shop/[[...slug]]/page.tsx</code></td><td><code>/shop</code> 或 <code>/shop/a/b</code></td></tr></tbody></table><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app/blog/[slug]/page.tsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BlogPost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">slug</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;文章: {params.slug}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="路由组-组织而不影响-url" tabindex="-1">路由组：组织而不影响 URL <a class="header-anchor" href="#路由组-组织而不影响-url" aria-label="Permalink to &quot;路由组：组织而不影响 URL&quot;">​</a></h2><p>使用圆括号 <code>()</code> 创建路由组，用于组织代码但不影响 URL：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>├── (marketing)/        # 不会出现在 URL 中</span></span>
<span class="line"><span>│   ├── layout.tsx      # marketing 页面共享的布局</span></span>
<span class="line"><span>│   ├── about/</span></span>
<span class="line"><span>│   │   └── page.tsx    # URL: /about</span></span>
<span class="line"><span>│   └── contact/</span></span>
<span class="line"><span>│       └── page.tsx    # URL: /contact</span></span>
<span class="line"><span>└── (shop)/             # 不会出现在 URL 中</span></span>
<span class="line"><span>    ├── layout.tsx      # shop 页面共享的布局</span></span>
<span class="line"><span>    └── products/</span></span>
<span class="line"><span>        └── page.tsx    # URL: /products</span></span></code></pre></div><h2 id="觉知-review-ai-代码时的检查点" tabindex="-1">觉知：Review AI 代码时的检查点 <a class="header-anchor" href="#觉知-review-ai-代码时的检查点" aria-label="Permalink to &quot;觉知：Review AI 代码时的检查点&quot;">​</a></h2><h3 id="_1-page-tsx-位置正确吗" tabindex="-1">1. page.tsx 位置正确吗？ <a class="header-anchor" href="#_1-page-tsx-位置正确吗" aria-label="Permalink to &quot;1. page.tsx 位置正确吗？&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>app/</span></span>
<span class="line"><span>├── dashboard/</span></span>
<span class="line"><span>│   └── settings/</span></span>
<span class="line"><span>│       └── page.tsx    # ✅ /dashboard/settings</span></span>
<span class="line"><span>│</span></span>
<span class="line"><span>├── dashboard/</span></span>
<span class="line"><span>│   └── settings.tsx    # ❌ 这不是页面，是普通组件</span></span></code></pre></div><h3 id="_2-layout-tsx-用对了吗" tabindex="-1">2. layout.tsx 用对了吗？ <a class="header-anchor" href="#_2-layout-tsx-用对了吗" aria-label="Permalink to &quot;2. layout.tsx 用对了吗？&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ❌ 错误：layout 不应该有状态</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 不要这样做</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{children}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ✅ 正确：状态应该在 Client Component 中</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UserProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;  {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 用 Context Provider */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      &lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UserProvider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">div</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-动态路由参数类型正确吗" tabindex="-1">3. 动态路由参数类型正确吗？ <a class="header-anchor" href="#_3-动态路由参数类型正确吗" aria-label="Permalink to &quot;3. 动态路由参数类型正确吗？&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// AI 可能忘记给 params 加类型</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ❌ 缺少类型</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Page</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">slug</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ✅ 明确类型</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="本节小结" tabindex="-1">本节小结 <a class="header-anchor" href="#本节小结" aria-label="Permalink to &quot;本节小结&quot;">​</a></h2><p>App Router 的核心理念：<strong>约定优于配置</strong>。</p><table tabindex="0"><thead><tr><th>概念</th><th>作用</th></tr></thead><tbody><tr><td><strong>文件系统路由</strong></td><td>文件夹结构 = URL 结构</td></tr><tr><td><strong>嵌套布局</strong></td><td>UI 复用，切换不重渲染</td></tr><tr><td><strong>约定文件</strong></td><td>page/layout/loading/error</td></tr><tr><td><strong>动态路由</strong></td><td><code>[param]</code> 语法</td></tr><tr><td><strong>路由组</strong></td><td><code>(group)</code> 组织代码</td></tr></tbody></table>`,19))])}const D=k(E,[["render",g]]);export{b as __pageData,D as default};
