import{_ as p,C as l,c as h,o as a,a3 as i,b as e,w as n,a as k,G as r,a4 as d}from"./chunks/framework.CUcrqFol.js";const C=JSON.parse('{"title":"5.1.9 AI 写的代码能用吗——代码质量控制","description":"5.1.9 AI 写的代码能用吗——代码质量控制 一句话破题 AI 生成的代码**不能直接用**，必须经过审查、测试和优化。 AI 代码的常见问题 | 问题类型 | 表现 | 风险等级 | |----------|------|----------| | **幻觉 API** | 使用不存在的库或方法 | 高 | |","frontmatter":{"title":"5.1.9 AI 写的代码能用吗——代码质量控制","typora-root-url":"../../public"},"headers":[],"relativePath":"Advanced-old/05-product/5.1-ai-product-dev/5.1.9-qa.md","filePath":"Advanced-old/05-product/5.1-ai-product-dev/5.1.9-qa.md","lastUpdated":1766168364000}'),E={name:"Advanced-old/05-product/5.1-ai-product-dev/5.1.9-qa.md"};function o(g,s,c,y,A,F){const t=l("Mermaid");return a(),h("div",null,[s[1]||(s[1]=i(`<h1 id="_5-1-9-ai-写的代码能用吗——代码质量控制" tabindex="-1">5.1.9 AI 写的代码能用吗——代码质量控制 <a class="header-anchor" href="#_5-1-9-ai-写的代码能用吗——代码质量控制" aria-label="Permalink to &quot;5.1.9 AI 写的代码能用吗——代码质量控制&quot;">​</a></h1><h3 id="一句话破题" tabindex="-1">一句话破题 <a class="header-anchor" href="#一句话破题" aria-label="Permalink to &quot;一句话破题&quot;">​</a></h3><p>AI 生成的代码<strong>不能直接用</strong>，必须经过审查、测试和优化。</p><h3 id="ai-代码的常见问题" tabindex="-1">AI 代码的常见问题 <a class="header-anchor" href="#ai-代码的常见问题" aria-label="Permalink to &quot;AI 代码的常见问题&quot;">​</a></h3><table tabindex="0"><thead><tr><th>问题类型</th><th>表现</th><th>风险等级</th></tr></thead><tbody><tr><td><strong>幻觉 API</strong></td><td>使用不存在的库或方法</td><td>高</td></tr><tr><td><strong>过时语法</strong></td><td>使用旧版本的写法</td><td>中</td></tr><tr><td><strong>逻辑漏洞</strong></td><td>边界情况未处理</td><td>高</td></tr><tr><td><strong>安全隐患</strong></td><td>敏感信息暴露、注入风险</td><td>严重</td></tr><tr><td><strong>性能问题</strong></td><td>低效算法、重复查询</td><td>中</td></tr><tr><td><strong>风格不一致</strong></td><td>与项目规范不符</td><td>低</td></tr></tbody></table><h3 id="审查清单" tabindex="-1">审查清单 <a class="header-anchor" href="#审查清单" aria-label="Permalink to &quot;审查清单&quot;">​</a></h3><p>收到 AI 生成的代码后，逐项检查：</p><h4 id="_1-依赖检查" tabindex="-1">1. 依赖检查 <a class="header-anchor" href="#_1-依赖检查" aria-label="Permalink to &quot;1. 依赖检查&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>□ 引入的库在 package.json 中存在吗？</span></span>
<span class="line"><span>□ API 方法在当前版本中存在吗？</span></span>
<span class="line"><span>□ 是否使用了正确的导入路径？</span></span></code></pre></div><h4 id="_2-逻辑检查" tabindex="-1">2. 逻辑检查 <a class="header-anchor" href="#_2-逻辑检查" aria-label="Permalink to &quot;2. 逻辑检查&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>□ 空值/undefined 处理了吗？</span></span>
<span class="line"><span>□ 数组为空的情况处理了吗？</span></span>
<span class="line"><span>□ 异步操作有错误处理吗？</span></span>
<span class="line"><span>□ 循环有终止条件吗？</span></span></code></pre></div><h4 id="_3-安全检查" tabindex="-1">3. 安全检查 <a class="header-anchor" href="#_3-安全检查" aria-label="Permalink to &quot;3. 安全检查&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>□ 用户输入有验证和过滤吗？</span></span>
<span class="line"><span>□ 敏感信息（密钥、密码）没有硬编码吧？</span></span>
<span class="line"><span>□ SQL/NoSQL 注入风险排除了吗？</span></span>
<span class="line"><span>□ XSS 风险排除了吗？</span></span></code></pre></div><h4 id="_4-性能检查" tabindex="-1">4. 性能检查 <a class="header-anchor" href="#_4-性能检查" aria-label="Permalink to &quot;4. 性能检查&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>□ 数据库查询有必要的索引吗？</span></span>
<span class="line"><span>□ N+1 查询问题解决了吗？</span></span>
<span class="line"><span>□ 大数据量有分页吗？</span></span>
<span class="line"><span>□ 没有不必要的重复计算吧？</span></span></code></pre></div><h3 id="审查流程" tabindex="-1">审查流程 <a class="header-anchor" href="#审查流程" aria-label="Permalink to &quot;审查流程&quot;">​</a></h3>`,16)),(a(),e(d,null,{default:n(()=>[r(t,{id:"mermaid-120",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5B%22%E6%94%B6%E5%88%B0%20AI%20%E4%BB%A3%E7%A0%81%22%5D%20--%3E%20B%5B%22%E5%BF%AB%E9%80%9F%E9%98%85%E8%AF%BB%E7%90%86%E8%A7%A3%22%5D%0A%20%20%20%20B%20--%3E%20C%7B%22%E8%83%BD%E7%9C%8B%E6%87%82%E5%90%97%3F%22%7D%0A%20%20%20%20C%20--%3E%7C%22%E5%90%A6%22%7C%20D%5B%22%E8%AE%A9%20AI%20%E8%A7%A3%E9%87%8A%22%5D%0A%20%20%20%20C%20--%3E%7C%22%E6%98%AF%22%7C%20E%5B%22%E8%BF%90%E8%A1%8C%E6%B5%8B%E8%AF%95%22%5D%0A%20%20%20%20D%20--%3E%20E%0A%20%20%20%20E%20--%3E%20F%7B%22%E9%80%9A%E8%BF%87%3F%22%7D%0A%20%20%20%20F%20--%3E%7C%22%E5%90%A6%22%7C%20G%5B%22%E5%88%86%E6%9E%90%E5%8E%9F%E5%9B%A0%22%5D%0A%20%20%20%20G%20--%3E%20H%5B%22%E8%AE%A9%20AI%20%E4%BF%AE%E5%A4%8D%22%5D%0A%20%20%20%20H%20--%3E%20E%0A%20%20%20%20F%20--%3E%7C%22%E6%98%AF%22%7C%20I%5B%22%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5%22%5D%0A%20%20%20%20I%20--%3E%20J%7B%22%E7%AC%A6%E5%90%88%E8%A7%84%E8%8C%83%3F%22%7D%0A%20%20%20%20J%20--%3E%7C%22%E5%90%A6%22%7C%20K%5B%22%E6%89%8B%E5%8A%A8%E8%B0%83%E6%95%B4%22%5D%0A%20%20%20%20J%20--%3E%7C%22%E6%98%AF%22%7C%20L%5B%22%E5%90%88%E5%B9%B6%E4%BB%A3%E7%A0%81%22%5D%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[k(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=i(`<h3 id="实战示例" tabindex="-1">实战示例 <a class="header-anchor" href="#实战示例" aria-label="Permalink to &quot;实战示例&quot;">​</a></h3><p><strong>AI 生成的代码</strong>：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取用户列表</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prisma.user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findMany</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(users)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>问题分析</strong>：</p><ol><li>❌ 没有分页，数据量大时会崩溃</li><li>❌ 返回了所有字段，可能暴露敏感信息</li><li>❌ 没有错误处理</li></ol><p><strong>修复后</strong>：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">searchParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request.url)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> page</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(searchParams.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;page&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> limit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(searchParams.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;limit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;10&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> users</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prisma.user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findMany</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      skip: (page </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> limit,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      take: limit,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      select: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        email: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 不返回 password 等敏感字段</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(users)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Failed to fetch users:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { error: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Internal server error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { status: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="培养代码审查能力" tabindex="-1">培养代码审查能力 <a class="header-anchor" href="#培养代码审查能力" aria-label="Permalink to &quot;培养代码审查能力&quot;">​</a></h3><ol><li><strong>多看好代码</strong>：阅读开源项目，学习最佳实践</li><li><strong>理解原理</strong>：知道为什么要这样写，而不只是照搬</li><li><strong>总结经验</strong>：记录 AI 常犯的错误，下次重点检查</li><li><strong>持续学习</strong>：关注安全公告、最佳实践更新</li></ol><h3 id="建立审查习惯" tabindex="-1">建立审查习惯 <a class="header-anchor" href="#建立审查习惯" aria-label="Permalink to &quot;建立审查习惯&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>每次收到 AI 代码后：</span></span>
<span class="line"><span>1. 先不要急着运行</span></span>
<span class="line"><span>2. 花 2 分钟快速审查</span></span>
<span class="line"><span>3. 有疑问就问 AI 为什么这样写</span></span>
<span class="line"><span>4. 运行并观察行为是否符合预期</span></span>
<span class="line"><span>5. 通过测试后再合并</span></span></code></pre></div>`,11))])}const B=p(E,[["render",o]]);export{C as __pageData,B as default};
